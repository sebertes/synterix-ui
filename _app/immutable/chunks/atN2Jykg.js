var sn=Object.defineProperty;var wa=d=>{throw TypeError(d)};var rn=(d,e,t)=>e in d?sn(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var At=(d,e,t)=>rn(d,typeof e!="symbol"?e+"":e,t),ln=(d,e,t)=>e.has(d)||wa("Cannot "+t);var oa=(d,e,t)=>(ln(d,e,"read from private field"),t?t.call(d):e.get(d)),xa=(d,e,t)=>e.has(d)?wa("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(d):e.set(d,t);import{p as ce,s as ae,a as X,u as oe,c as q,d as b,e as P,t as ne,b as ue,g as i,r as f,n as bt,M as ma,f as Ve,h as et,az as $t,aA as Sa}from"./QwNgEtIe.js";import{T as Oe}from"./BKZmce3h.js";import{g as Zt}from"./C0qwNRwb.js";import{c as Fe}from"./CH5d7z7W.js";import{p as _t,U as Xe,t as dt,a as yt,e as Ra}from"./YCu01eox.js";import{j as ea}from"./mbYHt68G.js";import{P as on,L as Va,S as ja}from"./D0-wf1hp.js";import{R as dn,D as cn}from"./BTm594px.js";import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{n as va,a as V,t as j,c as vt,b as pa}from"./DU17d604.js";import{P as Ka,R as un}from"./DWcei-3m.js";import{E as Yt}from"./CWNRuWkL.js";import{D as kt}from"./CeVNWETr.js";import{D as aa}from"./DFQwKZDI.js";import{R as Me,K as st,r as Ye}from"./BGXyWBGH.js";import{d as xe,e as Ca}from"./BUwIoTEU.js";import{a as Ha,U as mn,S as vn,c as pn,h as fn}from"./B6grDUUQ.js";import{s as je,c as Ke}from"./DGVFHOD7.js";import{S as ge}from"./D3HNHyyT.js";import{C as qe}from"./BENrx8rE.js";import{s as he}from"./DGaM1_9x.js";import{i as ye}from"./B8P2podd.js";import{I as Q,A as hn}from"./QehizvcT.js";import{C as wt}from"./Cpp2hBeD.js";import{h as gn}from"./DPTXRTMs.js";import{e as ke,i as _e}from"./bwyIVu-M.js";import{p as pe,s as na}from"./TelbXceq.js";import{s as Wa,r as bn,b as yn}from"./D7ICzF4-.js";import{o as qa}from"./CfWhJ7d3.js";import{s as Nt}from"./DlV0Rhhi.js";import{R as mt}from"./DIGuKEzC.js";import{b as ta}from"./Dric7B_l.js";import{c as kn}from"./CJT487tm.js";import{C as _n}from"./LNp-1X4U.js";var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wn(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}const da=new Map,xn={async get(d,e){let t=`${d}-${e}`;if(da.has(t))return da.get(t);let a=e?`/templates/${d}-${e}.yml`:`/templates/${d}.yml`,n=await fetch(a,{method:"get"});if(n.ok){let s=await n.text();return da.set(t,s),s}return`apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment`}};var Sn=va('<svg t="1743170784814" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14447" width="200" height="200"><path d="M505.728 25.6C777.728 25.6 998.4 243.2 998.4 512c0 268.8-220.672 486.4-492.672 486.4-192.256 0-364.416-109.76-445.312-278.08l-2.432-5.12 69.568-32.448C194.88 827.072 341.504 921.6 505.728 921.6c229.76 0 415.872-183.488 415.872-409.6 0-226.112-186.048-409.6-415.872-409.6a417.6 417.6 0 0 0-354.816 195.712L268.8 416H0V147.2l95.36 95.36A494.656 494.656 0 0 1 505.728 25.6zM588.8 268.8v332.8h-192V524.8H512v-256h76.8z" p-id="14448"></path></svg>');function Ga(d){var e=Sn();V(d,e)}var Rn=va('<svg t="1743171029652" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21085" width="200" height="200"><path d="M880 51.2c51.2 0 92.8 41.6 92.8 92.8v582.3c0 51.2-41.6 92.8-92.8 92.8-22.1 0-40-18-40-40s18-40 40-40c7 0 12.8-5.7 12.8-12.8V144c0-7-5.7-12.8-12.8-12.8H297.6c-7 0-12.8 5.7-12.8 12.8 0 22.1-17.9 40-40 40s-40-18-40-40c0-51.2 41.6-92.8 92.8-92.8H880zM707.3 328.6c0-6.6-5.4-12-12-12H139.9c-6.6 0-12 5.4-12 12v555.5c0 6.6 5.4 12 12 12h555.4c6.6 0 12-5.4 12-12V328.6z m-12-88.7c48.9 0 88.7 39.8 88.7 88.7v555.5c0 48.9-39.8 88.7-88.7 88.7H139.9c-48.9 0-88.7-39.8-88.7-88.7V328.6c0-48.9 39.8-88.7 88.7-88.7h555.4zM580.9 555.3c18.5 0 33.5 15 33.5 33.5s-15 33.5-33.5 33.5H468.7v112.2c0 18.5-15 33.5-33.4 33.5-18.6 0-33.5-15-33.5-33.5V622.3H289.5c-18.5 0-33.5-15-33.5-33.5s15-33.5 33.5-33.5h112.2V443.1c0-18.5 15-33.5 33.5-33.5s33.4 15 33.4 33.5v112.2h112.3z" p-id="21086"></path></svg>');function Pa(d){var e=Rn();V(d,e)}function Xt(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Za={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(d,e){(function(t){d.exports=t()})(function(){return function t(a,n,s){function l(y,k){if(!n[y]){if(!a[y]){var h=typeof Xt=="function"&&Xt;if(!k&&h)return h(y,!0);if(o)return o(y,!0);var g=new Error("Cannot find module '"+y+"'");throw g.code="MODULE_NOT_FOUND",g}var v=n[y]={exports:{}};a[y][0].call(v.exports,function(u){var r=a[y][1][u];return l(r||u)},v,v.exports,t,a,n,s)}return n[y].exports}for(var o=typeof Xt=="function"&&Xt,c=0;c<s.length;c++)l(s[c]);return l}({1:[function(t,a,n){var s=t("./utils"),l=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(c){for(var y,k,h,g,v,u,r,m=[],p=0,_=c.length,S=_,C=s.getTypeOf(c)!=="string";p<c.length;)S=_-p,h=C?(y=c[p++],k=p<_?c[p++]:0,p<_?c[p++]:0):(y=c.charCodeAt(p++),k=p<_?c.charCodeAt(p++):0,p<_?c.charCodeAt(p++):0),g=y>>2,v=(3&y)<<4|k>>4,u=1<S?(15&k)<<2|h>>6:64,r=2<S?63&h:64,m.push(o.charAt(g)+o.charAt(v)+o.charAt(u)+o.charAt(r));return m.join("")},n.decode=function(c){var y,k,h,g,v,u,r=0,m=0,p="data:";if(c.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var _,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&S--,c.charAt(c.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=l.uint8array?new Uint8Array(0|S):new Array(0|S);r<c.length;)y=o.indexOf(c.charAt(r++))<<2|(g=o.indexOf(c.charAt(r++)))>>4,k=(15&g)<<4|(v=o.indexOf(c.charAt(r++)))>>2,h=(3&v)<<6|(u=o.indexOf(c.charAt(r++))),_[m++]=y,v!==64&&(_[m++]=k),u!==64&&(_[m++]=h);return _}},{"./support":30,"./utils":32}],2:[function(t,a,n){var s=t("./external"),l=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function y(k,h,g,v,u){this.compressedSize=k,this.uncompressedSize=h,this.crc32=g,this.compression=v,this.compressedContent=u}y.prototype={getContentWorker:function(){var k=new l(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return k.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new l(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(k,h,g){return k.pipe(new o).pipe(new c("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},a.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,a,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,a,n){var s=t("./utils"),l=function(){for(var o,c=[],y=0;y<256;y++){o=y;for(var k=0;k<8;k++)o=1&o?3988292384^o>>>1:o>>>1;c[y]=o}return c}();a.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(y,k,h,g){var v=l,u=g+h;y^=-1;for(var r=g;r<u;r++)y=y>>>8^v[255&(y^k[r])];return-1^y}(0|c,o,o.length,0):function(y,k,h,g){var v=l,u=g+h;y^=-1;for(var r=g;r<u;r++)y=y>>>8^v[255&(y^k.charCodeAt(r))];return-1^y}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(t,a,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,a,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),a.exports={Promise:s}},{lie:37}],7:[function(t,a,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=t("pako"),o=t("./utils"),c=t("./stream/GenericWorker"),y=s?"uint8array":"array";function k(h,g){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}n.magic="\b\0",o.inherits(k,c),k.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(y,h.data),!1)},k.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},n.compressWorker=function(h){return new k("Deflate",h)},n.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,a,n){function s(v,u){var r,m="";for(r=0;r<u;r++)m+=String.fromCharCode(255&v),v>>>=8;return m}function l(v,u,r,m,p,_){var S,C,A=v.file,L=v.compression,E=_!==y.utf8encode,O=o.transformTo("string",_(A.name)),D=o.transformTo("string",y.utf8encode(A.name)),N=A.comment,G=o.transformTo("string",_(N)),R=o.transformTo("string",y.utf8encode(N)),M=D.length!==A.name.length,x=R.length!==N.length,W="",se="",z="",te=A.dir,K=A.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};u&&!r||(ie.crc32=v.crc32,ie.compressedSize=v.compressedSize,ie.uncompressedSize=v.uncompressedSize);var B=0;u&&(B|=8),E||!M&&!x||(B|=2048);var U=0,me=0;te&&(U|=16),p==="UNIX"?(me=798,U|=function(ee,Se){var Ee=ee;return ee||(Ee=Se?16893:33204),(65535&Ee)<<16}(A.unixPermissions,te)):(me=20,U|=function(ee){return 63&(ee||0)}(A.dosPermissions)),S=K.getUTCHours(),S<<=6,S|=K.getUTCMinutes(),S<<=5,S|=K.getUTCSeconds()/2,C=K.getUTCFullYear()-1980,C<<=4,C|=K.getUTCMonth()+1,C<<=5,C|=K.getUTCDate(),M&&(se=s(1,1)+s(k(O),4)+D,W+="up"+s(se.length,2)+se),x&&(z=s(1,1)+s(k(G),4)+R,W+="uc"+s(z.length,2)+z);var de="";return de+=`
\0`,de+=s(B,2),de+=L.magic,de+=s(S,2),de+=s(C,2),de+=s(ie.crc32,4),de+=s(ie.compressedSize,4),de+=s(ie.uncompressedSize,4),de+=s(O.length,2),de+=s(W.length,2),{fileRecord:h.LOCAL_FILE_HEADER+de+O+W,dirRecord:h.CENTRAL_FILE_HEADER+s(me,2)+de+s(G.length,2)+"\0\0\0\0"+s(U,4)+s(m,4)+O+W+G}}var o=t("../utils"),c=t("../stream/GenericWorker"),y=t("../utf8"),k=t("../crc32"),h=t("../signature");function g(v,u,r,m){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=u,this.zipPlatform=r,this.encodeFileName=m,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(g,c),g.prototype.push=function(v){var u=v.meta.percent||0,r=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,c.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:r?(u+100*(r-m-1))/r:100}}))},g.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var u=this.streamFiles&&!v.file.dir;if(u){var r=l(v,u,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(v){this.accumulate=!1;var u=this.streamFiles&&!v.file.dir,r=l(v,u,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),u)this.push({data:function(m){return h.DATA_DESCRIPTOR+s(m.crc32,4)+s(m.compressedSize,4)+s(m.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var v=this.bytesWritten,u=0;u<this.dirRecords.length;u++)this.push({data:this.dirRecords[u],meta:{percent:100}});var r=this.bytesWritten-v,m=function(p,_,S,C,A){var L=o.transformTo("string",A(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(_,4)+s(S,4)+s(L.length,2)+L}(this.dirRecords.length,r,v,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(v){this._sources.push(v);var u=this;return v.on("data",function(r){u.processChunk(r)}),v.on("end",function(){u.closedSource(u.previous.streamInfo),u._sources.length?u.prepareNextSource():u.end()}),v.on("error",function(r){u.error(r)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(v){var u=this._sources;if(!c.prototype.error.call(this,v))return!1;for(var r=0;r<u.length;r++)try{u[r].error(v)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var v=this._sources,u=0;u<v.length;u++)v[u].lock()},a.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,a,n){var s=t("../compressions"),l=t("./ZipFileWorker");n.generateWorker=function(o,c,y){var k=new l(c.streamFiles,y,c.platform,c.encodeFileName),h=0;try{o.forEach(function(g,v){h++;var u=function(_,S){var C=_||S,A=s[C];if(!A)throw new Error(C+" is not a valid compression method !");return A}(v.options.compression,c.compression),r=v.options.compressionOptions||c.compressionOptions||{},m=v.dir,p=v.date;v._compressWorker(u,r).withStreamInfo("file",{name:g,dir:m,date:p,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(k)}),k.entriesCount=h}catch(g){k.error(g)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,a,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new s;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(l,o){return new s().loadAsync(l,o)},s.external=t("./external"),a.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,a,n){var s=t("./utils"),l=t("./external"),o=t("./utf8"),c=t("./zipEntries"),y=t("./stream/Crc32Probe"),k=t("./nodejsUtils");function h(g){return new l.Promise(function(v,u){var r=g.decompressed.getContentWorker().pipe(new y);r.on("error",function(m){u(m)}).on("end",function(){r.streamInfo.crc32!==g.decompressed.crc32?u(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}a.exports=function(g,v){var u=this;return v=s.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),k.isNode&&k.isStream(g)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,v.optimizedBinaryString,v.base64).then(function(r){var m=new c(v);return m.load(r),m}).then(function(r){var m=[l.Promise.resolve(r)],p=r.files;if(v.checkCRC32)for(var _=0;_<p.length;_++)m.push(h(p[_]));return l.Promise.all(m)}).then(function(r){for(var m=r.shift(),p=m.files,_=0;_<p.length;_++){var S=p[_],C=S.fileNameStr,A=s.resolve(S.fileNameStr);u.file(A,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:v.createFolders}),S.dir||(u.file(A).unsafeOriginalName=C)}return m.zipComment.length&&(u.comment=m.zipComment),u})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,a,n){var s=t("../utils"),l=t("../stream/GenericWorker");function o(c,y){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(y)}s.inherits(o,l),o.prototype._bindStream=function(c){var y=this;(this._stream=c).pause(),c.on("data",function(k){y.push({data:k,meta:{percent:0}})}).on("error",function(k){y.isPaused?this.generatedError=k:y.error(k)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,a,n){var s=t("readable-stream").Readable;function l(o,c,y){s.call(this,c),this._helper=o;var k=this;o.on("data",function(h,g){k.push(h)||k._helper.pause(),y&&y(g)}).on("error",function(h){k.emit("error",h)}).on("end",function(){k.push(null)})}t("../utils").inherits(l,s),l.prototype._read=function(){this._helper.resume()},a.exports=l},{"../utils":32,"readable-stream":16}],14:[function(t,a,n){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,l);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,l)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var l=new Buffer(s);return l.fill(0),l},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,a,n){function s(A,L,E){var O,D=o.getTypeOf(L),N=o.extend(E||{},k);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(A=p(A)),N.createFolders&&(O=m(A))&&_.call(this,O,!0);var G=D==="string"&&N.binary===!1&&N.base64===!1;E&&E.binary!==void 0||(N.binary=!G),(L instanceof h&&L.uncompressedSize===0||N.dir||!L||L.length===0)&&(N.base64=!1,N.binary=!0,L="",N.compression="STORE",D="string");var R=null;R=L instanceof h||L instanceof c?L:u.isNode&&u.isStream(L)?new r(A,L):o.prepareContent(A,L,N.binary,N.optimizedBinaryString,N.base64);var M=new g(A,R,N);this.files[A]=M}var l=t("./utf8"),o=t("./utils"),c=t("./stream/GenericWorker"),y=t("./stream/StreamHelper"),k=t("./defaults"),h=t("./compressedObject"),g=t("./zipObject"),v=t("./generate"),u=t("./nodejsUtils"),r=t("./nodejs/NodejsStreamInputAdapter"),m=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var L=A.lastIndexOf("/");return 0<L?A.substring(0,L):""},p=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},_=function(A,L){return L=L!==void 0?L:k.createFolders,A=p(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:L}),this.files[A]};function S(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var L,E,O;for(L in this.files)O=this.files[L],(E=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&A(E,O)},filter:function(A){var L=[];return this.forEach(function(E,O){A(E,O)&&L.push(O)}),L},file:function(A,L,E){if(arguments.length!==1)return A=this.root+A,s.call(this,A,L,E),this;if(S(A)){var O=A;return this.filter(function(N,G){return!G.dir&&O.test(N)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(S(A))return this.filter(function(D,N){return N.dir&&A.test(D)});var L=this.root+A,E=_.call(this,L),O=this.clone();return O.root=E.name,O},remove:function(A){A=this.root+A;var L=this.files[A];if(L||(A.slice(-1)!=="/"&&(A+="/"),L=this.files[A]),L&&!L.dir)delete this.files[A];else for(var E=this.filter(function(D,N){return N.name.slice(0,A.length)===A}),O=0;O<E.length;O++)delete this.files[E[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var L,E={};try{if((E=o.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");o.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var O=E.comment||this.comment||"";L=v.generateWorker(this,E,O)}catch(D){(L=new c("error")).error(D)}return new y(L,E.type||"string",E.mimeType)},generateAsync:function(A,L){return this.generateInternalStream(A).accumulate(L)},generateNodeStream:function(A,L){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(L)}};a.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,a,n){a.exports=t("stream")},{stream:void 0}],17:[function(t,a,n){var s=t("./DataReader");function l(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}t("../utils").inherits(l,s),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),y=o.charCodeAt(1),k=o.charCodeAt(2),h=o.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===y&&this.data[g+2]===k&&this.data[g+3]===h)return g-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),y=o.charCodeAt(1),k=o.charCodeAt(2),h=o.charCodeAt(3),g=this.readData(4);return c===g[0]&&y===g[1]&&k===g[2]&&h===g[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},a.exports=l},{"../utils":32,"./DataReader":18}],18:[function(t,a,n){var s=t("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,y=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)y=(y<<8)+this.byteAt(c);return this.index+=o,y},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},a.exports=l},{"../utils":32}],19:[function(t,a,n){var s=t("./Uint8ArrayReader");function l(o){s.call(this,o)}t("../utils").inherits(l,s),l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},a.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,a,n){var s=t("./DataReader");function l(o){s.call(this,o)}t("../utils").inherits(l,s),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},a.exports=l},{"../utils":32,"./DataReader":18}],21:[function(t,a,n){var s=t("./ArrayReader");function l(o){s.call(this,o)}t("../utils").inherits(l,s),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},a.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(t,a,n){var s=t("../utils"),l=t("../support"),o=t("./ArrayReader"),c=t("./StringReader"),y=t("./NodeBufferReader"),k=t("./Uint8ArrayReader");a.exports=function(h){var g=s.getTypeOf(h);return s.checkSupport(g),g!=="string"||l.uint8array?g==="nodebuffer"?new y(h):l.uint8array?new k(s.transformTo("uint8array",h)):new o(s.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,a,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,a,n){var s=t("./GenericWorker"),l=t("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},a.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,a,n){var s=t("./GenericWorker"),l=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},a.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,a,n){var s=t("../utils"),l=t("./GenericWorker");function o(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,l),o.prototype.processChunk=function(c){if(c){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+c.data.length}l.prototype.processChunk.call(this,c)},a.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,a,n){var s=t("../utils"),l=t("./GenericWorker");function o(c){l.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(k){y.dataIsReady=!0,y.data=k,y.max=k&&k.length||0,y.type=s.getTypeOf(k),y.isPaused||y._tickAndRepeat()},function(k){y.error(k)})}s.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,y);break;case"uint8array":c=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":c=this.data.slice(this.index,y)}return this.index=y,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,a,n){function s(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(c){o.processChunk(c)}),l.on("end",function(){o.end()}),l.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},a.exports=s},{}],29:[function(t,a,n){var s=t("../utils"),l=t("./ConvertWorker"),o=t("./GenericWorker"),c=t("../base64"),y=t("../support"),k=t("../external"),h=null;if(y.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(u,r){return new k.Promise(function(m,p){var _=[],S=u._internalType,C=u._outputType,A=u._mimeType;u.on("data",function(L,E){_.push(L),r&&r(E)}).on("error",function(L){_=[],p(L)}).on("end",function(){try{var L=function(E,O,D){switch(E){case"blob":return s.newBlob(s.transformTo("arraybuffer",O),D);case"base64":return c.encode(O);default:return s.transformTo(E,O)}}(C,function(E,O){var D,N=0,G=null,R=0;for(D=0;D<O.length;D++)R+=O[D].length;switch(E){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(G=new Uint8Array(R),D=0;D<O.length;D++)G.set(O[D],N),N+=O[D].length;return G;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+E+"'")}}(S,_),A);m(L)}catch(E){p(E)}_=[]}).resume()})}function v(u,r,m){var p=r;switch(r){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=r,this._mimeType=m,s.checkSupport(p),this._worker=u.pipe(new l(p)),u.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}v.prototype={accumulate:function(u){return g(this,u)},on:function(u,r){var m=this;return u==="data"?this._worker.on(u,function(p){r.call(m,p.data,p.meta)}):this._worker.on(u,function(){s.delay(r,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},u)}},a.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,a,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(s),n.blob=l.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,a,n){for(var s=t("./utils"),l=t("./support"),o=t("./nodejsUtils"),c=t("./stream/GenericWorker"),y=new Array(256),k=0;k<256;k++)y[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;y[254]=y[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}n.utf8encode=function(v){return l.nodebuffer?o.newBufferFrom(v,"utf-8"):function(u){var r,m,p,_,S,C=u.length,A=0;for(_=0;_<C;_++)(64512&(m=u.charCodeAt(_)))==55296&&_+1<C&&(64512&(p=u.charCodeAt(_+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),_++),A+=m<128?1:m<2048?2:m<65536?3:4;for(r=l.uint8array?new Uint8Array(A):new Array(A),_=S=0;S<A;_++)(64512&(m=u.charCodeAt(_)))==55296&&_+1<C&&(64512&(p=u.charCodeAt(_+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),_++),m<128?r[S++]=m:(m<2048?r[S++]=192|m>>>6:(m<65536?r[S++]=224|m>>>12:(r[S++]=240|m>>>18,r[S++]=128|m>>>12&63),r[S++]=128|m>>>6&63),r[S++]=128|63&m);return r}(v)},n.utf8decode=function(v){return l.nodebuffer?s.transformTo("nodebuffer",v).toString("utf-8"):function(u){var r,m,p,_,S=u.length,C=new Array(2*S);for(r=m=0;r<S;)if((p=u[r++])<128)C[m++]=p;else if(4<(_=y[p]))C[m++]=65533,r+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&r<S;)p=p<<6|63&u[r++],_--;1<_?C[m++]=65533:p<65536?C[m++]=p:(p-=65536,C[m++]=55296|p>>10&1023,C[m++]=56320|1023&p)}return C.length!==m&&(C.subarray?C=C.subarray(0,m):C.length=m),s.applyFromCharCode(C)}(v=s.transformTo(l.uint8array?"uint8array":"array",v))},s.inherits(h,c),h.prototype.processChunk=function(v){var u=s.transformTo(l.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var r=u;(u=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),u.set(r,this.leftOver.length)}else u=this.leftOver.concat(u);this.leftOver=null}var m=function(_,S){var C;for((S=S||_.length)>_.length&&(S=_.length),C=S-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?S:C+y[_[C]]>S?C:S}(u),p=u;m!==u.length&&(l.uint8array?(p=u.subarray(0,m),this.leftOver=u.subarray(m,u.length)):(p=u.slice(0,m),this.leftOver=u.slice(m,u.length))),this.push({data:n.utf8decode(p),meta:v.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,s.inherits(g,c),g.prototype.processChunk=function(v){this.push({data:n.utf8encode(v.data),meta:v.meta})},n.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,a,n){var s=t("./support"),l=t("./base64"),o=t("./nodejsUtils"),c=t("./external");function y(r){return r}function k(r,m){for(var p=0;p<r.length;++p)m[p]=255&r.charCodeAt(p);return m}t("setimmediate"),n.newBlob=function(r,m){n.checkSupport("blob");try{return new Blob([r],{type:m})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(r),p.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(r,m,p){var _=[],S=0,C=r.length;if(C<=p)return String.fromCharCode.apply(null,r);for(;S<C;)m==="array"||m==="nodebuffer"?_.push(String.fromCharCode.apply(null,r.slice(S,Math.min(S+p,C)))):_.push(String.fromCharCode.apply(null,r.subarray(S,Math.min(S+p,C)))),S+=p;return _.join("")},stringifyByChar:function(r){for(var m="",p=0;p<r.length;p++)m+=String.fromCharCode(r[p]);return m},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function g(r){var m=65536,p=n.getTypeOf(r),_=!0;if(p==="uint8array"?_=h.applyCanBeUsed.uint8array:p==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<m;)try{return h.stringifyByChunk(r,p,m)}catch{m=Math.floor(m/2)}return h.stringifyByChar(r)}function v(r,m){for(var p=0;p<r.length;p++)m[p]=r[p];return m}n.applyFromCharCode=g;var u={};u.string={string:y,array:function(r){return k(r,new Array(r.length))},arraybuffer:function(r){return u.string.uint8array(r).buffer},uint8array:function(r){return k(r,new Uint8Array(r.length))},nodebuffer:function(r){return k(r,o.allocBuffer(r.length))}},u.array={string:g,array:y,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return o.newBufferFrom(r)}},u.arraybuffer={string:function(r){return g(new Uint8Array(r))},array:function(r){return v(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:y,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return o.newBufferFrom(new Uint8Array(r))}},u.uint8array={string:g,array:function(r){return v(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:y,nodebuffer:function(r){return o.newBufferFrom(r)}},u.nodebuffer={string:g,array:function(r){return v(r,new Array(r.length))},arraybuffer:function(r){return u.nodebuffer.uint8array(r).buffer},uint8array:function(r){return v(r,new Uint8Array(r.length))},nodebuffer:y},n.transformTo=function(r,m){if(m=m||"",!r)return m;n.checkSupport(r);var p=n.getTypeOf(m);return u[p][r](m)},n.resolve=function(r){for(var m=r.split("/"),p=[],_=0;_<m.length;_++){var S=m[_];S==="."||S===""&&_!==0&&_!==m.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},n.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(r)?"nodebuffer":s.uint8array&&r instanceof Uint8Array?"uint8array":s.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(r){if(!s[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(r){var m,p,_="";for(p=0;p<(r||"").length;p++)_+="\\x"+((m=r.charCodeAt(p))<16?"0":"")+m.toString(16).toUpperCase();return _},n.delay=function(r,m,p){setImmediate(function(){r.apply(p||null,m||[])})},n.inherits=function(r,m){function p(){}p.prototype=m.prototype,r.prototype=new p},n.extend=function(){var r,m,p={};for(r=0;r<arguments.length;r++)for(m in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],m)&&p[m]===void 0&&(p[m]=arguments[r][m]);return p},n.prepareContent=function(r,m,p,_,S){return c.Promise.resolve(m).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,L){var E=new FileReader;E.onload=function(O){A(O.target.result)},E.onerror=function(O){L(O.target.error)},E.readAsArrayBuffer(C)}):C}).then(function(C){var A=n.getTypeOf(C);return A?(A==="arraybuffer"?C=n.transformTo("uint8array",C):A==="string"&&(S?C=l.decode(C):p&&_!==!0&&(C=function(L){return k(L,s.uint8array?new Uint8Array(L.length):new Array(L.length))}(C))),C):c.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,a,n){var s=t("./reader/readerFor"),l=t("./utils"),o=t("./signature"),c=t("./zipEntry"),y=t("./support");function k(h){this.files=[],this.loadOptions=h}k.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(g)+", expected "+l.pretty(h)+")")}},isSignature:function(h,g){var v=this.reader.index;this.reader.setIndex(h);var u=this.reader.readString(4)===g;return this.reader.setIndex(v),u},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=y.uint8array?"uint8array":"array",v=l.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,v,u=this.zip64EndOfCentralSize-44;0<u;)h=this.reader.readInt(2),g=this.reader.readInt(4),v=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var u=g-v;if(0<u)this.isSignature(g,o.CENTRAL_FILE_HEADER)||(this.reader.zero=u);else if(u<0)throw new Error("Corrupted zip: missing "+Math.abs(u)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,a,n){var s=t("./reader/readerFor"),l=t("./utils"),o=t("./compressedObject"),c=t("./crc32"),y=t("./utf8"),k=t("./compressions"),h=t("./support");function g(v,u){this.options=v,this.loadOptions=u}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var u,r;if(v.skip(22),this.fileNameLength=v.readInt(2),r=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((u=function(m){for(var p in k)if(Object.prototype.hasOwnProperty.call(k,p)&&k[p].magic===m)return k[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,u,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var u=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(u),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=s(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var u,r,m,p=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<p;)u=v.readInt(2),r=v.readInt(2),m=v.readData(r),this.extraFields[u]={id:u,length:r,value:m};v.setIndex(p)},handleUTF8:function(){var v=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();if(u!==null)this.fileNameStr=u;else{var r=l.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var p=l.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var u=s(v.value);return u.readInt(1)!==1||c(this.fileName)!==u.readInt(4)?null:y.utf8decode(u.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var u=s(v.value);return u.readInt(1)!==1||c(this.fileComment)!==u.readInt(4)?null:y.utf8decode(u.readData(v.length-5))}return null}},a.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,a,n){function s(u,r,m){this.name=u,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=r,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var l=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),c=t("./utf8"),y=t("./compressedObject"),k=t("./stream/GenericWorker");s.prototype={internalStream:function(u){var r=null,m="string";try{if(!u)throw new Error("No output type specified.");var p=(m=u.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),r=this._decompressWorker();var _=!this._dataBinary;_&&!p&&(r=r.pipe(new c.Utf8EncodeWorker)),!_&&p&&(r=r.pipe(new c.Utf8DecodeWorker))}catch(S){(r=new k("error")).error(S)}return new l(r,m,"")},async:function(u,r){return this.internalStream(u).accumulate(r)},nodeStream:function(u,r){return this.internalStream(u||"nodebuffer").toNodejsStream(r)},_compressWorker:function(u,r){if(this._data instanceof y&&this._data.compression.magic===u.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new c.Utf8EncodeWorker)),y.createWorkerFrom(m,u,r)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof k?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<h.length;v++)s.prototype[h[v]]=g;a.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,a,n){(function(s){var l,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var y=0,k=new c(u),h=s.document.createTextNode("");k.observe(h,{characterData:!0}),l=function(){h.data=y=++y%2}}else if(s.setImmediate||s.MessageChannel===void 0)l="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var r=s.document.createElement("script");r.onreadystatechange=function(){u(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},s.document.documentElement.appendChild(r)}:function(){setTimeout(u,0)};else{var g=new s.MessageChannel;g.port1.onmessage=u,l=function(){g.port2.postMessage(0)}}var v=[];function u(){var r,m;o=!0;for(var p=v.length;p;){for(m=v,v=[],r=-1;++r<p;)m[r]();p=v.length}o=!1}a.exports=function(r){v.push(r)!==1||o||l()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,a,n){var s=t("immediate");function l(){}var o={},c=["REJECTED"],y=["FULFILLED"],k=["PENDING"];function h(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,p!==l&&r(this,p)}function g(p,_,S){this.promise=p,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function v(p,_,S){s(function(){var C;try{C=_(S)}catch(A){return o.reject(p,A)}C===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,C)})}function u(p){var _=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof _=="function")return function(){_.apply(p,arguments)}}function r(p,_){var S=!1;function C(E){S||(S=!0,o.reject(p,E))}function A(E){S||(S=!0,o.resolve(p,E))}var L=m(function(){_(A,C)});L.status==="error"&&C(L.value)}function m(p,_){var S={};try{S.value=p(_),S.status="success"}catch(C){S.status="error",S.value=C}return S}(a.exports=h).prototype.finally=function(p){if(typeof p!="function")return this;var _=this.constructor;return this.then(function(S){return _.resolve(p()).then(function(){return S})},function(S){return _.resolve(p()).then(function(){throw S})})},h.prototype.catch=function(p){return this.then(null,p)},h.prototype.then=function(p,_){if(typeof p!="function"&&this.state===y||typeof _!="function"&&this.state===c)return this;var S=new this.constructor(l);return this.state!==k?v(S,this.state===y?p:_,this.outcome):this.queue.push(new g(S,p,_)),S},g.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},g.prototype.otherCallFulfilled=function(p){v(this.promise,this.onFulfilled,p)},g.prototype.callRejected=function(p){o.reject(this.promise,p)},g.prototype.otherCallRejected=function(p){v(this.promise,this.onRejected,p)},o.resolve=function(p,_){var S=m(u,_);if(S.status==="error")return o.reject(p,S.value);var C=S.value;if(C)r(p,C);else{p.state=y,p.outcome=_;for(var A=-1,L=p.queue.length;++A<L;)p.queue[A].callFulfilled(_)}return p},o.reject=function(p,_){p.state=c,p.outcome=_;for(var S=-1,C=p.queue.length;++S<C;)p.queue[S].callRejected(_);return p},h.resolve=function(p){return p instanceof this?p:o.resolve(new this(l),p)},h.reject=function(p){var _=new this(l);return o.reject(_,p)},h.all=function(p){var _=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),L=0,E=-1,O=new this(l);++E<S;)D(p[E],E);return O;function D(N,G){_.resolve(N).then(function(R){A[G]=R,++L!==S||C||(C=!0,o.resolve(O,A))},function(R){C||(C=!0,o.reject(O,R))})}},h.race=function(p){var _=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,L=new this(l);++A<S;)E=p[A],_.resolve(E).then(function(O){C||(C=!0,o.resolve(L,O))},function(O){C||(C=!0,o.reject(L,O))});var E;return L}},{immediate:36}],38:[function(t,a,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),a.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,a,n){var s=t("./zlib/deflate"),l=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/messages"),y=t("./zlib/zstream"),k=Object.prototype.toString,h=0,g=-1,v=0,u=8;function r(p){if(!(this instanceof r))return new r(p);this.options=l.assign({level:g,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},p||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(S!==h)throw new Error(c[S]);if(_.header&&s.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?o.string2buf(_.dictionary):k.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(S=s.deflateSetDictionary(this.strm,C))!==h)throw new Error(c[S]);this._dict_set=!0}}function m(p,_){var S=new r(_);if(S.push(p,!0),S.err)throw S.msg||c[S.err];return S.result}r.prototype.push=function(p,_){var S,C,A=this.strm,L=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof p=="string"?A.input=o.string2buf(p):k.call(p)==="[object ArrayBuffer]"?A.input=new Uint8Array(p):A.input=p,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new l.Buf8(L),A.next_out=0,A.avail_out=L),(S=s.deflate(A,C))!==1&&S!==h)return this.onEnd(S),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(A.output,A.next_out))):this.onData(l.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&S!==1);return C===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===h):C!==2||(this.onEnd(h),!(A.avail_out=0))},r.prototype.onData=function(p){this.chunks.push(p)},r.prototype.onEnd=function(p){p===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},n.Deflate=r,n.deflate=m,n.deflateRaw=function(p,_){return(_=_||{}).raw=!0,m(p,_)},n.gzip=function(p,_){return(_=_||{}).gzip=!0,m(p,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,a,n){var s=t("./zlib/inflate"),l=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/constants"),y=t("./zlib/messages"),k=t("./zlib/zstream"),h=t("./zlib/gzheader"),g=Object.prototype.toString;function v(r){if(!(this instanceof v))return new v(r);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},r||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||r&&r.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,m.windowBits);if(p!==c.Z_OK)throw new Error(y[p]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function u(r,m){var p=new v(m);if(p.push(r,!0),p.err)throw p.msg||y[p.err];return p.result}v.prototype.push=function(r,m){var p,_,S,C,A,L,E=this.strm,O=this.options.chunkSize,D=this.options.dictionary,N=!1;if(this.ended)return!1;_=m===~~m?m:m===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof r=="string"?E.input=o.binstring2buf(r):g.call(r)==="[object ArrayBuffer]"?E.input=new Uint8Array(r):E.input=r,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new l.Buf8(O),E.next_out=0,E.avail_out=O),(p=s.inflate(E,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(L=typeof D=="string"?o.string2buf(D):g.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,p=s.inflateSetDictionary(this.strm,L)),p===c.Z_BUF_ERROR&&N===!0&&(p=c.Z_OK,N=!1),p!==c.Z_STREAM_END&&p!==c.Z_OK)return this.onEnd(p),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&p!==c.Z_STREAM_END&&(E.avail_in!==0||_!==c.Z_FINISH&&_!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(E.output,E.next_out),C=E.next_out-S,A=o.buf2string(E.output,S),E.next_out=C,E.avail_out=O-C,C&&l.arraySet(E.output,E.output,S,C,0),this.onData(A)):this.onData(l.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(N=!0)}while((0<E.avail_in||E.avail_out===0)&&p!==c.Z_STREAM_END);return p===c.Z_STREAM_END&&(_=c.Z_FINISH),_===c.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===c.Z_OK):_!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(E.avail_out=0))},v.prototype.onData=function(r){this.chunks.push(r)},v.prototype.onEnd=function(r){r===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},n.Inflate=v,n.inflate=u,n.inflateRaw=function(r,m){return(m=m||{}).raw=!0,u(r,m)},n.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,a,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(c){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var k=y.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var h in k)k.hasOwnProperty(h)&&(c[h]=k[h])}}return c},n.shrinkBuf=function(c,y){return c.length===y?c:c.subarray?c.subarray(0,y):(c.length=y,c)};var l={arraySet:function(c,y,k,h,g){if(y.subarray&&c.subarray)c.set(y.subarray(k,k+h),g);else for(var v=0;v<h;v++)c[g+v]=y[k+v]},flattenChunks:function(c){var y,k,h,g,v,u;for(y=h=0,k=c.length;y<k;y++)h+=c[y].length;for(u=new Uint8Array(h),y=g=0,k=c.length;y<k;y++)v=c[y],u.set(v,g),g+=v.length;return u}},o={arraySet:function(c,y,k,h,g){for(var v=0;v<h;v++)c[g+v]=y[k+v]},flattenChunks:function(c){return[].concat.apply([],c)}};n.setTyped=function(c){c?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,l)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],42:[function(t,a,n){var s=t("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),y=0;y<256;y++)c[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function k(h,g){if(g<65537&&(h.subarray&&o||!h.subarray&&l))return String.fromCharCode.apply(null,s.shrinkBuf(h,g));for(var v="",u=0;u<g;u++)v+=String.fromCharCode(h[u]);return v}c[254]=c[254]=1,n.string2buf=function(h){var g,v,u,r,m,p=h.length,_=0;for(r=0;r<p;r++)(64512&(v=h.charCodeAt(r)))==55296&&r+1<p&&(64512&(u=h.charCodeAt(r+1)))==56320&&(v=65536+(v-55296<<10)+(u-56320),r++),_+=v<128?1:v<2048?2:v<65536?3:4;for(g=new s.Buf8(_),r=m=0;m<_;r++)(64512&(v=h.charCodeAt(r)))==55296&&r+1<p&&(64512&(u=h.charCodeAt(r+1)))==56320&&(v=65536+(v-55296<<10)+(u-56320),r++),v<128?g[m++]=v:(v<2048?g[m++]=192|v>>>6:(v<65536?g[m++]=224|v>>>12:(g[m++]=240|v>>>18,g[m++]=128|v>>>12&63),g[m++]=128|v>>>6&63),g[m++]=128|63&v);return g},n.buf2binstring=function(h){return k(h,h.length)},n.binstring2buf=function(h){for(var g=new s.Buf8(h.length),v=0,u=g.length;v<u;v++)g[v]=h.charCodeAt(v);return g},n.buf2string=function(h,g){var v,u,r,m,p=g||h.length,_=new Array(2*p);for(v=u=0;v<p;)if((r=h[v++])<128)_[u++]=r;else if(4<(m=c[r]))_[u++]=65533,v+=m-1;else{for(r&=m===2?31:m===3?15:7;1<m&&v<p;)r=r<<6|63&h[v++],m--;1<m?_[u++]=65533:r<65536?_[u++]=r:(r-=65536,_[u++]=55296|r>>10&1023,_[u++]=56320|1023&r)}return k(_,u)},n.utf8border=function(h,g){var v;for((g=g||h.length)>h.length&&(g=h.length),v=g-1;0<=v&&(192&h[v])==128;)v--;return v<0||v===0?g:v+c[h[v]]>g?v:g}},{"./common":41}],43:[function(t,a,n){a.exports=function(s,l,o,c){for(var y=65535&s|0,k=s>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;k=k+(y=y+l[c++]|0)|0,--h;);y%=65521,k%=65521}return y|k<<16|0}},{}],44:[function(t,a,n){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,a,n){var s=function(){for(var l,o=[],c=0;c<256;c++){l=c;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;o[c]=l}return o}();a.exports=function(l,o,c,y){var k=s,h=y+c;l^=-1;for(var g=y;g<h;g++)l=l>>>8^k[255&(l^o[g])];return-1^l}},{}],46:[function(t,a,n){var s,l=t("../utils/common"),o=t("./trees"),c=t("./adler32"),y=t("./crc32"),k=t("./messages"),h=0,g=4,v=0,u=-2,r=-1,m=4,p=2,_=8,S=9,C=286,A=30,L=19,E=2*C+1,O=15,D=3,N=258,G=N+D+1,R=42,M=113,x=1,W=2,se=3,z=4;function te(w,Y){return w.msg=k[Y],Y}function K(w){return(w<<1)-(4<w?9:0)}function ie(w){for(var Y=w.length;0<=--Y;)w[Y]=0}function B(w){var Y=w.state,Z=Y.pending;Z>w.avail_out&&(Z=w.avail_out),Z!==0&&(l.arraySet(w.output,Y.pending_buf,Y.pending_out,Z,w.next_out),w.next_out+=Z,Y.pending_out+=Z,w.total_out+=Z,w.avail_out-=Z,Y.pending-=Z,Y.pending===0&&(Y.pending_out=0))}function U(w,Y){o._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,Y),w.block_start=w.strstart,B(w.strm)}function me(w,Y){w.pending_buf[w.pending++]=Y}function de(w,Y){w.pending_buf[w.pending++]=Y>>>8&255,w.pending_buf[w.pending++]=255&Y}function ee(w,Y){var Z,I,T=w.max_chain_length,F=w.strstart,J=w.prev_length,$=w.nice_match,H=w.strstart>w.w_size-G?w.strstart-(w.w_size-G):0,re=w.window,ve=w.w_mask,le=w.prev,fe=w.strstart+N,Ne=re[F+J-1],Re=re[F+J];w.prev_length>=w.good_match&&(T>>=2),$>w.lookahead&&($=w.lookahead);do if(re[(Z=Y)+J]===Re&&re[Z+J-1]===Ne&&re[Z]===re[F]&&re[++Z]===re[F+1]){F+=2,Z++;do;while(re[++F]===re[++Z]&&re[++F]===re[++Z]&&re[++F]===re[++Z]&&re[++F]===re[++Z]&&re[++F]===re[++Z]&&re[++F]===re[++Z]&&re[++F]===re[++Z]&&re[++F]===re[++Z]&&F<fe);if(I=N-(fe-F),F=fe-N,J<I){if(w.match_start=Y,$<=(J=I))break;Ne=re[F+J-1],Re=re[F+J]}}while((Y=le[Y&ve])>H&&--T!=0);return J<=w.lookahead?J:w.lookahead}function Se(w){var Y,Z,I,T,F,J,$,H,re,ve,le=w.w_size;do{if(T=w.window_size-w.lookahead-w.strstart,w.strstart>=le+(le-G)){for(l.arraySet(w.window,w.window,le,le,0),w.match_start-=le,w.strstart-=le,w.block_start-=le,Y=Z=w.hash_size;I=w.head[--Y],w.head[Y]=le<=I?I-le:0,--Z;);for(Y=Z=le;I=w.prev[--Y],w.prev[Y]=le<=I?I-le:0,--Z;);T+=le}if(w.strm.avail_in===0)break;if(J=w.strm,$=w.window,H=w.strstart+w.lookahead,re=T,ve=void 0,ve=J.avail_in,re<ve&&(ve=re),Z=ve===0?0:(J.avail_in-=ve,l.arraySet($,J.input,J.next_in,ve,H),J.state.wrap===1?J.adler=c(J.adler,$,ve,H):J.state.wrap===2&&(J.adler=y(J.adler,$,ve,H)),J.next_in+=ve,J.total_in+=ve,ve),w.lookahead+=Z,w.lookahead+w.insert>=D)for(F=w.strstart-w.insert,w.ins_h=w.window[F],w.ins_h=(w.ins_h<<w.hash_shift^w.window[F+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[F+D-1])&w.hash_mask,w.prev[F&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=F,F++,w.insert--,!(w.lookahead+w.insert<D)););}while(w.lookahead<G&&w.strm.avail_in!==0)}function Ee(w,Y){for(var Z,I;;){if(w.lookahead<G){if(Se(w),w.lookahead<G&&Y===h)return x;if(w.lookahead===0)break}if(Z=0,w.lookahead>=D&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,Z=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),Z!==0&&w.strstart-Z<=w.w_size-G&&(w.match_length=ee(w,Z)),w.match_length>=D)if(I=o._tr_tally(w,w.strstart-w.match_start,w.match_length-D),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=D){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,Z=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else I=o._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(I&&(U(w,!1),w.strm.avail_out===0))return x}return w.insert=w.strstart<D-1?w.strstart:D-1,Y===g?(U(w,!0),w.strm.avail_out===0?se:z):w.last_lit&&(U(w,!1),w.strm.avail_out===0)?x:W}function we(w,Y){for(var Z,I,T;;){if(w.lookahead<G){if(Se(w),w.lookahead<G&&Y===h)return x;if(w.lookahead===0)break}if(Z=0,w.lookahead>=D&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,Z=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=D-1,Z!==0&&w.prev_length<w.max_lazy_match&&w.strstart-Z<=w.w_size-G&&(w.match_length=ee(w,Z),w.match_length<=5&&(w.strategy===1||w.match_length===D&&4096<w.strstart-w.match_start)&&(w.match_length=D-1)),w.prev_length>=D&&w.match_length<=w.prev_length){for(T=w.strstart+w.lookahead-D,I=o._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-D),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=T&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,Z=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=D-1,w.strstart++,I&&(U(w,!1),w.strm.avail_out===0))return x}else if(w.match_available){if((I=o._tr_tally(w,0,w.window[w.strstart-1]))&&U(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return x}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(I=o._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<D-1?w.strstart:D-1,Y===g?(U(w,!0),w.strm.avail_out===0?se:z):w.last_lit&&(U(w,!1),w.strm.avail_out===0)?x:W}function Ce(w,Y,Z,I,T){this.good_length=w,this.max_lazy=Y,this.nice_length=Z,this.max_chain=I,this.func=T}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*E),this.dyn_dtree=new l.Buf16(2*(2*A+1)),this.bl_tree=new l.Buf16(2*(2*L+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(O+1),this.heap=new l.Buf16(2*C+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*C+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ie(w){var Y;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=p,(Y=w.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?R:M,w.adler=Y.wrap===2?0:1,Y.last_flush=h,o._tr_init(Y),v):te(w,u)}function at(w){var Y=Ie(w);return Y===v&&function(Z){Z.window_size=2*Z.w_size,ie(Z.head),Z.max_lazy_match=s[Z.level].max_lazy,Z.good_match=s[Z.level].good_length,Z.nice_match=s[Z.level].nice_length,Z.max_chain_length=s[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=D-1,Z.match_available=0,Z.ins_h=0}(w.state),Y}function tt(w,Y,Z,I,T,F){if(!w)return u;var J=1;if(Y===r&&(Y=6),I<0?(J=0,I=-I):15<I&&(J=2,I-=16),T<1||S<T||Z!==_||I<8||15<I||Y<0||9<Y||F<0||m<F)return te(w,u);I===8&&(I=9);var $=new Ue;return(w.state=$).strm=w,$.wrap=J,$.gzhead=null,$.w_bits=I,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=T+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+D-1)/D),$.window=new l.Buf8(2*$.w_size),$.head=new l.Buf16($.hash_size),$.prev=new l.Buf16($.w_size),$.lit_bufsize=1<<T+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new l.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=Y,$.strategy=F,$.method=Z,at(w)}s=[new Ce(0,0,0,0,function(w,Y){var Z=65535;for(Z>w.pending_buf_size-5&&(Z=w.pending_buf_size-5);;){if(w.lookahead<=1){if(Se(w),w.lookahead===0&&Y===h)return x;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var I=w.block_start+Z;if((w.strstart===0||w.strstart>=I)&&(w.lookahead=w.strstart-I,w.strstart=I,U(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-G&&(U(w,!1),w.strm.avail_out===0))return x}return w.insert=0,Y===g?(U(w,!0),w.strm.avail_out===0?se:z):(w.strstart>w.block_start&&(U(w,!1),w.strm.avail_out),x)}),new Ce(4,4,8,4,Ee),new Ce(4,5,16,8,Ee),new Ce(4,6,32,32,Ee),new Ce(4,4,16,16,we),new Ce(8,16,32,32,we),new Ce(8,16,128,128,we),new Ce(8,32,128,256,we),new Ce(32,128,258,1024,we),new Ce(32,258,258,4096,we)],n.deflateInit=function(w,Y){return tt(w,Y,_,15,8,0)},n.deflateInit2=tt,n.deflateReset=at,n.deflateResetKeep=Ie,n.deflateSetHeader=function(w,Y){return w&&w.state?w.state.wrap!==2?u:(w.state.gzhead=Y,v):u},n.deflate=function(w,Y){var Z,I,T,F;if(!w||!w.state||5<Y||Y<0)return w?te(w,u):u;if(I=w.state,!w.output||!w.input&&w.avail_in!==0||I.status===666&&Y!==g)return te(w,w.avail_out===0?-5:u);if(I.strm=w,Z=I.last_flush,I.last_flush=Y,I.status===R)if(I.wrap===2)w.adler=0,me(I,31),me(I,139),me(I,8),I.gzhead?(me(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),me(I,255&I.gzhead.time),me(I,I.gzhead.time>>8&255),me(I,I.gzhead.time>>16&255),me(I,I.gzhead.time>>24&255),me(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),me(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(me(I,255&I.gzhead.extra.length),me(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(w.adler=y(w.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(me(I,0),me(I,0),me(I,0),me(I,0),me(I,0),me(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),me(I,3),I.status=M);else{var J=_+(I.w_bits-8<<4)<<8;J|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(J|=32),J+=31-J%31,I.status=M,de(I,J),I.strstart!==0&&(de(I,w.adler>>>16),de(I,65535&w.adler)),w.adler=1}if(I.status===69)if(I.gzhead.extra){for(T=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>T&&(w.adler=y(w.adler,I.pending_buf,I.pending-T,T)),B(w),T=I.pending,I.pending!==I.pending_buf_size));)me(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>T&&(w.adler=y(w.adler,I.pending_buf,I.pending-T,T)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){T=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>T&&(w.adler=y(w.adler,I.pending_buf,I.pending-T,T)),B(w),T=I.pending,I.pending===I.pending_buf_size)){F=1;break}F=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,me(I,F)}while(F!==0);I.gzhead.hcrc&&I.pending>T&&(w.adler=y(w.adler,I.pending_buf,I.pending-T,T)),F===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){T=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>T&&(w.adler=y(w.adler,I.pending_buf,I.pending-T,T)),B(w),T=I.pending,I.pending===I.pending_buf_size)){F=1;break}F=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,me(I,F)}while(F!==0);I.gzhead.hcrc&&I.pending>T&&(w.adler=y(w.adler,I.pending_buf,I.pending-T,T)),F===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&B(w),I.pending+2<=I.pending_buf_size&&(me(I,255&w.adler),me(I,w.adler>>8&255),w.adler=0,I.status=M)):I.status=M),I.pending!==0){if(B(w),w.avail_out===0)return I.last_flush=-1,v}else if(w.avail_in===0&&K(Y)<=K(Z)&&Y!==g)return te(w,-5);if(I.status===666&&w.avail_in!==0)return te(w,-5);if(w.avail_in!==0||I.lookahead!==0||Y!==h&&I.status!==666){var $=I.strategy===2?function(H,re){for(var ve;;){if(H.lookahead===0&&(Se(H),H.lookahead===0)){if(re===h)return x;break}if(H.match_length=0,ve=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,ve&&(U(H,!1),H.strm.avail_out===0))return x}return H.insert=0,re===g?(U(H,!0),H.strm.avail_out===0?se:z):H.last_lit&&(U(H,!1),H.strm.avail_out===0)?x:W}(I,Y):I.strategy===3?function(H,re){for(var ve,le,fe,Ne,Re=H.window;;){if(H.lookahead<=N){if(Se(H),H.lookahead<=N&&re===h)return x;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=D&&0<H.strstart&&(le=Re[fe=H.strstart-1])===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]){Ne=H.strstart+N;do;while(le===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]&&le===Re[++fe]&&fe<Ne);H.match_length=N-(Ne-fe),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=D?(ve=o._tr_tally(H,1,H.match_length-D),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(ve=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),ve&&(U(H,!1),H.strm.avail_out===0))return x}return H.insert=0,re===g?(U(H,!0),H.strm.avail_out===0?se:z):H.last_lit&&(U(H,!1),H.strm.avail_out===0)?x:W}(I,Y):s[I.level].func(I,Y);if($!==se&&$!==z||(I.status=666),$===x||$===se)return w.avail_out===0&&(I.last_flush=-1),v;if($===W&&(Y===1?o._tr_align(I):Y!==5&&(o._tr_stored_block(I,0,0,!1),Y===3&&(ie(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),B(w),w.avail_out===0))return I.last_flush=-1,v}return Y!==g?v:I.wrap<=0?1:(I.wrap===2?(me(I,255&w.adler),me(I,w.adler>>8&255),me(I,w.adler>>16&255),me(I,w.adler>>24&255),me(I,255&w.total_in),me(I,w.total_in>>8&255),me(I,w.total_in>>16&255),me(I,w.total_in>>24&255)):(de(I,w.adler>>>16),de(I,65535&w.adler)),B(w),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?v:1)},n.deflateEnd=function(w){var Y;return w&&w.state?(Y=w.state.status)!==R&&Y!==69&&Y!==73&&Y!==91&&Y!==103&&Y!==M&&Y!==666?te(w,u):(w.state=null,Y===M?te(w,-3):v):u},n.deflateSetDictionary=function(w,Y){var Z,I,T,F,J,$,H,re,ve=Y.length;if(!w||!w.state||(F=(Z=w.state).wrap)===2||F===1&&Z.status!==R||Z.lookahead)return u;for(F===1&&(w.adler=c(w.adler,Y,ve,0)),Z.wrap=0,ve>=Z.w_size&&(F===0&&(ie(Z.head),Z.strstart=0,Z.block_start=0,Z.insert=0),re=new l.Buf8(Z.w_size),l.arraySet(re,Y,ve-Z.w_size,Z.w_size,0),Y=re,ve=Z.w_size),J=w.avail_in,$=w.next_in,H=w.input,w.avail_in=ve,w.next_in=0,w.input=Y,Se(Z);Z.lookahead>=D;){for(I=Z.strstart,T=Z.lookahead-(D-1);Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[I+D-1])&Z.hash_mask,Z.prev[I&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=I,I++,--T;);Z.strstart=I,Z.lookahead=D-1,Se(Z)}return Z.strstart+=Z.lookahead,Z.block_start=Z.strstart,Z.insert=Z.lookahead,Z.lookahead=0,Z.match_length=Z.prev_length=D-1,Z.match_available=0,w.next_in=$,w.input=H,w.avail_in=J,Z.wrap=F,v},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,a,n){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,a,n){a.exports=function(s,l){var o,c,y,k,h,g,v,u,r,m,p,_,S,C,A,L,E,O,D,N,G,R,M,x,W;o=s.state,c=s.next_in,x=s.input,y=c+(s.avail_in-5),k=s.next_out,W=s.output,h=k-(l-s.avail_out),g=k+(s.avail_out-257),v=o.dmax,u=o.wsize,r=o.whave,m=o.wnext,p=o.window,_=o.hold,S=o.bits,C=o.lencode,A=o.distcode,L=(1<<o.lenbits)-1,E=(1<<o.distbits)-1;e:do{S<15&&(_+=x[c++]<<S,S+=8,_+=x[c++]<<S,S+=8),O=C[_&L];t:for(;;){if(_>>>=D=O>>>24,S-=D,(D=O>>>16&255)===0)W[k++]=65535&O;else{if(!(16&D)){if(!(64&D)){O=C[(65535&O)+(_&(1<<D)-1)];continue t}if(32&D){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}N=65535&O,(D&=15)&&(S<D&&(_+=x[c++]<<S,S+=8),N+=_&(1<<D)-1,_>>>=D,S-=D),S<15&&(_+=x[c++]<<S,S+=8,_+=x[c++]<<S,S+=8),O=A[_&E];a:for(;;){if(_>>>=D=O>>>24,S-=D,!(16&(D=O>>>16&255))){if(!(64&D)){O=A[(65535&O)+(_&(1<<D)-1)];continue a}s.msg="invalid distance code",o.mode=30;break e}if(G=65535&O,S<(D&=15)&&(_+=x[c++]<<S,(S+=8)<D&&(_+=x[c++]<<S,S+=8)),v<(G+=_&(1<<D)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=D,S-=D,(D=k-h)<G){if(r<(D=G-D)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(M=p,(R=0)===m){if(R+=u-D,D<N){for(N-=D;W[k++]=p[R++],--D;);R=k-G,M=W}}else if(m<D){if(R+=u+m-D,(D-=m)<N){for(N-=D;W[k++]=p[R++],--D;);if(R=0,m<N){for(N-=D=m;W[k++]=p[R++],--D;);R=k-G,M=W}}}else if(R+=m-D,D<N){for(N-=D;W[k++]=p[R++],--D;);R=k-G,M=W}for(;2<N;)W[k++]=M[R++],W[k++]=M[R++],W[k++]=M[R++],N-=3;N&&(W[k++]=M[R++],1<N&&(W[k++]=M[R++]))}else{for(R=k-G;W[k++]=W[R++],W[k++]=W[R++],W[k++]=W[R++],2<(N-=3););N&&(W[k++]=W[R++],1<N&&(W[k++]=W[R++]))}break}}break}}while(c<y&&k<g);c-=N=S>>3,_&=(1<<(S-=N<<3))-1,s.next_in=c,s.next_out=k,s.avail_in=c<y?y-c+5:5-(c-y),s.avail_out=k<g?g-k+257:257-(k-g),o.hold=_,o.bits=S}},{}],49:[function(t,a,n){var s=t("../utils/common"),l=t("./adler32"),o=t("./crc32"),c=t("./inffast"),y=t("./inftrees"),k=1,h=2,g=0,v=-2,u=1,r=852,m=592;function p(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(R){var M;return R&&R.state?(M=R.state,R.total_in=R.total_out=M.total=0,R.msg="",M.wrap&&(R.adler=1&M.wrap),M.mode=u,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new s.Buf32(r),M.distcode=M.distdyn=new s.Buf32(m),M.sane=1,M.back=-1,g):v}function C(R){var M;return R&&R.state?((M=R.state).wsize=0,M.whave=0,M.wnext=0,S(R)):v}function A(R,M){var x,W;return R&&R.state?(W=R.state,M<0?(x=0,M=-M):(x=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?v:(W.window!==null&&W.wbits!==M&&(W.window=null),W.wrap=x,W.wbits=M,C(R))):v}function L(R,M){var x,W;return R?(W=new _,(R.state=W).window=null,(x=A(R,M))!==g&&(R.state=null),x):v}var E,O,D=!0;function N(R){if(D){var M;for(E=new s.Buf32(512),O=new s.Buf32(32),M=0;M<144;)R.lens[M++]=8;for(;M<256;)R.lens[M++]=9;for(;M<280;)R.lens[M++]=7;for(;M<288;)R.lens[M++]=8;for(y(k,R.lens,0,288,E,0,R.work,{bits:9}),M=0;M<32;)R.lens[M++]=5;y(h,R.lens,0,32,O,0,R.work,{bits:5}),D=!1}R.lencode=E,R.lenbits=9,R.distcode=O,R.distbits=5}function G(R,M,x,W){var se,z=R.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new s.Buf8(z.wsize)),W>=z.wsize?(s.arraySet(z.window,M,x-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(W<(se=z.wsize-z.wnext)&&(se=W),s.arraySet(z.window,M,x-W,se,z.wnext),(W-=se)?(s.arraySet(z.window,M,x-W,W,0),z.wnext=W,z.whave=z.wsize):(z.wnext+=se,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=se))),0}n.inflateReset=C,n.inflateReset2=A,n.inflateResetKeep=S,n.inflateInit=function(R){return L(R,15)},n.inflateInit2=L,n.inflate=function(R,M){var x,W,se,z,te,K,ie,B,U,me,de,ee,Se,Ee,we,Ce,Ue,Ie,at,tt,w,Y,Z,I,T=0,F=new s.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return v;(x=R.state).mode===12&&(x.mode=13),te=R.next_out,se=R.output,ie=R.avail_out,z=R.next_in,W=R.input,K=R.avail_in,B=x.hold,U=x.bits,me=K,de=ie,Y=g;e:for(;;)switch(x.mode){case u:if(x.wrap===0){x.mode=13;break}for(;U<16;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(2&x.wrap&&B===35615){F[x.check=0]=255&B,F[1]=B>>>8&255,x.check=o(x.check,F,2,0),U=B=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&B)<<8)+(B>>8))%31){R.msg="incorrect header check",x.mode=30;break}if((15&B)!=8){R.msg="unknown compression method",x.mode=30;break}if(U-=4,w=8+(15&(B>>>=4)),x.wbits===0)x.wbits=w;else if(w>x.wbits){R.msg="invalid window size",x.mode=30;break}x.dmax=1<<w,R.adler=x.check=1,x.mode=512&B?10:12,U=B=0;break;case 2:for(;U<16;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(x.flags=B,(255&x.flags)!=8){R.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){R.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=B>>8&1),512&x.flags&&(F[0]=255&B,F[1]=B>>>8&255,x.check=o(x.check,F,2,0)),U=B=0,x.mode=3;case 3:for(;U<32;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}x.head&&(x.head.time=B),512&x.flags&&(F[0]=255&B,F[1]=B>>>8&255,F[2]=B>>>16&255,F[3]=B>>>24&255,x.check=o(x.check,F,4,0)),U=B=0,x.mode=4;case 4:for(;U<16;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}x.head&&(x.head.xflags=255&B,x.head.os=B>>8),512&x.flags&&(F[0]=255&B,F[1]=B>>>8&255,x.check=o(x.check,F,2,0)),U=B=0,x.mode=5;case 5:if(1024&x.flags){for(;U<16;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}x.length=B,x.head&&(x.head.extra_len=B),512&x.flags&&(F[0]=255&B,F[1]=B>>>8&255,x.check=o(x.check,F,2,0)),U=B=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(K<(ee=x.length)&&(ee=K),ee&&(x.head&&(w=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),s.arraySet(x.head.extra,W,z,ee,w)),512&x.flags&&(x.check=o(x.check,W,ee,z)),K-=ee,z+=ee,x.length-=ee),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(K===0)break e;for(ee=0;w=W[z+ee++],x.head&&w&&x.length<65536&&(x.head.name+=String.fromCharCode(w)),w&&ee<K;);if(512&x.flags&&(x.check=o(x.check,W,ee,z)),K-=ee,z+=ee,w)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(K===0)break e;for(ee=0;w=W[z+ee++],x.head&&w&&x.length<65536&&(x.head.comment+=String.fromCharCode(w)),w&&ee<K;);if(512&x.flags&&(x.check=o(x.check,W,ee,z)),K-=ee,z+=ee,w)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;U<16;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(B!==(65535&x.check)){R.msg="header crc mismatch",x.mode=30;break}U=B=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),R.adler=x.check=0,x.mode=12;break;case 10:for(;U<32;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}R.adler=x.check=p(B),U=B=0,x.mode=11;case 11:if(x.havedict===0)return R.next_out=te,R.avail_out=ie,R.next_in=z,R.avail_in=K,x.hold=B,x.bits=U,2;R.adler=x.check=1,x.mode=12;case 12:if(M===5||M===6)break e;case 13:if(x.last){B>>>=7&U,U-=7&U,x.mode=27;break}for(;U<3;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}switch(x.last=1&B,U-=1,3&(B>>>=1)){case 0:x.mode=14;break;case 1:if(N(x),x.mode=20,M!==6)break;B>>>=2,U-=2;break e;case 2:x.mode=17;break;case 3:R.msg="invalid block type",x.mode=30}B>>>=2,U-=2;break;case 14:for(B>>>=7&U,U-=7&U;U<32;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if((65535&B)!=(B>>>16^65535)){R.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&B,U=B=0,x.mode=15,M===6)break e;case 15:x.mode=16;case 16:if(ee=x.length){if(K<ee&&(ee=K),ie<ee&&(ee=ie),ee===0)break e;s.arraySet(se,W,z,ee,te),K-=ee,z+=ee,ie-=ee,te+=ee,x.length-=ee;break}x.mode=12;break;case 17:for(;U<14;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(x.nlen=257+(31&B),B>>>=5,U-=5,x.ndist=1+(31&B),B>>>=5,U-=5,x.ncode=4+(15&B),B>>>=4,U-=4,286<x.nlen||30<x.ndist){R.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;U<3;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}x.lens[J[x.have++]]=7&B,B>>>=3,U-=3}for(;x.have<19;)x.lens[J[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,Z={bits:x.lenbits},Y=y(0,x.lens,0,19,x.lencode,0,x.work,Z),x.lenbits=Z.bits,Y){R.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;Ce=(T=x.lencode[B&(1<<x.lenbits)-1])>>>16&255,Ue=65535&T,!((we=T>>>24)<=U);){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(Ue<16)B>>>=we,U-=we,x.lens[x.have++]=Ue;else{if(Ue===16){for(I=we+2;U<I;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(B>>>=we,U-=we,x.have===0){R.msg="invalid bit length repeat",x.mode=30;break}w=x.lens[x.have-1],ee=3+(3&B),B>>>=2,U-=2}else if(Ue===17){for(I=we+3;U<I;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}U-=we,w=0,ee=3+(7&(B>>>=we)),B>>>=3,U-=3}else{for(I=we+7;U<I;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}U-=we,w=0,ee=11+(127&(B>>>=we)),B>>>=7,U-=7}if(x.have+ee>x.nlen+x.ndist){R.msg="invalid bit length repeat",x.mode=30;break}for(;ee--;)x.lens[x.have++]=w}}if(x.mode===30)break;if(x.lens[256]===0){R.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,Z={bits:x.lenbits},Y=y(k,x.lens,0,x.nlen,x.lencode,0,x.work,Z),x.lenbits=Z.bits,Y){R.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,Z={bits:x.distbits},Y=y(h,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,Z),x.distbits=Z.bits,Y){R.msg="invalid distances set",x.mode=30;break}if(x.mode=20,M===6)break e;case 20:x.mode=21;case 21:if(6<=K&&258<=ie){R.next_out=te,R.avail_out=ie,R.next_in=z,R.avail_in=K,x.hold=B,x.bits=U,c(R,de),te=R.next_out,se=R.output,ie=R.avail_out,z=R.next_in,W=R.input,K=R.avail_in,B=x.hold,U=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;Ce=(T=x.lencode[B&(1<<x.lenbits)-1])>>>16&255,Ue=65535&T,!((we=T>>>24)<=U);){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(Ce&&!(240&Ce)){for(Ie=we,at=Ce,tt=Ue;Ce=(T=x.lencode[tt+((B&(1<<Ie+at)-1)>>Ie)])>>>16&255,Ue=65535&T,!(Ie+(we=T>>>24)<=U);){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}B>>>=Ie,U-=Ie,x.back+=Ie}if(B>>>=we,U-=we,x.back+=we,x.length=Ue,Ce===0){x.mode=26;break}if(32&Ce){x.back=-1,x.mode=12;break}if(64&Ce){R.msg="invalid literal/length code",x.mode=30;break}x.extra=15&Ce,x.mode=22;case 22:if(x.extra){for(I=x.extra;U<I;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}x.length+=B&(1<<x.extra)-1,B>>>=x.extra,U-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;Ce=(T=x.distcode[B&(1<<x.distbits)-1])>>>16&255,Ue=65535&T,!((we=T>>>24)<=U);){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(!(240&Ce)){for(Ie=we,at=Ce,tt=Ue;Ce=(T=x.distcode[tt+((B&(1<<Ie+at)-1)>>Ie)])>>>16&255,Ue=65535&T,!(Ie+(we=T>>>24)<=U);){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}B>>>=Ie,U-=Ie,x.back+=Ie}if(B>>>=we,U-=we,x.back+=we,64&Ce){R.msg="invalid distance code",x.mode=30;break}x.offset=Ue,x.extra=15&Ce,x.mode=24;case 24:if(x.extra){for(I=x.extra;U<I;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}x.offset+=B&(1<<x.extra)-1,B>>>=x.extra,U-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){R.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(ie===0)break e;if(ee=de-ie,x.offset>ee){if((ee=x.offset-ee)>x.whave&&x.sane){R.msg="invalid distance too far back",x.mode=30;break}Se=ee>x.wnext?(ee-=x.wnext,x.wsize-ee):x.wnext-ee,ee>x.length&&(ee=x.length),Ee=x.window}else Ee=se,Se=te-x.offset,ee=x.length;for(ie<ee&&(ee=ie),ie-=ee,x.length-=ee;se[te++]=Ee[Se++],--ee;);x.length===0&&(x.mode=21);break;case 26:if(ie===0)break e;se[te++]=x.length,ie--,x.mode=21;break;case 27:if(x.wrap){for(;U<32;){if(K===0)break e;K--,B|=W[z++]<<U,U+=8}if(de-=ie,R.total_out+=de,x.total+=de,de&&(R.adler=x.check=x.flags?o(x.check,se,de,te-de):l(x.check,se,de,te-de)),de=ie,(x.flags?B:p(B))!==x.check){R.msg="incorrect data check",x.mode=30;break}U=B=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;U<32;){if(K===0)break e;K--,B+=W[z++]<<U,U+=8}if(B!==(4294967295&x.total)){R.msg="incorrect length check",x.mode=30;break}U=B=0}x.mode=29;case 29:Y=1;break e;case 30:Y=-3;break e;case 31:return-4;case 32:default:return v}return R.next_out=te,R.avail_out=ie,R.next_in=z,R.avail_in=K,x.hold=B,x.bits=U,(x.wsize||de!==R.avail_out&&x.mode<30&&(x.mode<27||M!==4))&&G(R,R.output,R.next_out,de-R.avail_out)?(x.mode=31,-4):(me-=R.avail_in,de-=R.avail_out,R.total_in+=me,R.total_out+=de,x.total+=de,x.wrap&&de&&(R.adler=x.check=x.flags?o(x.check,se,de,R.next_out-de):l(x.check,se,de,R.next_out-de)),R.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(me==0&&de===0||M===4)&&Y===g&&(Y=-5),Y)},n.inflateEnd=function(R){if(!R||!R.state)return v;var M=R.state;return M.window&&(M.window=null),R.state=null,g},n.inflateGetHeader=function(R,M){var x;return R&&R.state&&2&(x=R.state).wrap?((x.head=M).done=!1,g):v},n.inflateSetDictionary=function(R,M){var x,W=M.length;return R&&R.state?(x=R.state).wrap!==0&&x.mode!==11?v:x.mode===11&&l(1,M,W,0)!==x.check?-3:G(R,M,W,W)?(x.mode=31,-4):(x.havedict=1,g):v},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,a,n){var s=t("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(k,h,g,v,u,r,m,p){var _,S,C,A,L,E,O,D,N,G=p.bits,R=0,M=0,x=0,W=0,se=0,z=0,te=0,K=0,ie=0,B=0,U=null,me=0,de=new s.Buf16(16),ee=new s.Buf16(16),Se=null,Ee=0;for(R=0;R<=15;R++)de[R]=0;for(M=0;M<v;M++)de[h[g+M]]++;for(se=G,W=15;1<=W&&de[W]===0;W--);if(W<se&&(se=W),W===0)return u[r++]=20971520,u[r++]=20971520,p.bits=1,0;for(x=1;x<W&&de[x]===0;x++);for(se<x&&(se=x),R=K=1;R<=15;R++)if(K<<=1,(K-=de[R])<0)return-1;if(0<K&&(k===0||W!==1))return-1;for(ee[1]=0,R=1;R<15;R++)ee[R+1]=ee[R]+de[R];for(M=0;M<v;M++)h[g+M]!==0&&(m[ee[h[g+M]]++]=M);if(E=k===0?(U=Se=m,19):k===1?(U=l,me-=257,Se=o,Ee-=257,256):(U=c,Se=y,-1),R=x,L=r,te=M=B=0,C=-1,A=(ie=1<<(z=se))-1,k===1&&852<ie||k===2&&592<ie)return 1;for(;;){for(O=R-te,N=m[M]<E?(D=0,m[M]):m[M]>E?(D=Se[Ee+m[M]],U[me+m[M]]):(D=96,0),_=1<<R-te,x=S=1<<z;u[L+(B>>te)+(S-=_)]=O<<24|D<<16|N|0,S!==0;);for(_=1<<R-1;B&_;)_>>=1;if(_!==0?(B&=_-1,B+=_):B=0,M++,--de[R]==0){if(R===W)break;R=h[g+m[M]]}if(se<R&&(B&A)!==C){for(te===0&&(te=se),L+=x,K=1<<(z=R-te);z+te<W&&!((K-=de[z+te])<=0);)z++,K<<=1;if(ie+=1<<z,k===1&&852<ie||k===2&&592<ie)return 1;u[C=B&A]=se<<24|z<<16|L-r|0}}return B!==0&&(u[L+B]=R-te<<24|64<<16|0),p.bits=se,0}},{"../utils/common":41}],51:[function(t,a,n){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,a,n){var s=t("../utils/common"),l=0,o=1;function c(T){for(var F=T.length;0<=--F;)T[F]=0}var y=0,k=29,h=256,g=h+1+k,v=30,u=19,r=2*g+1,m=15,p=16,_=7,S=256,C=16,A=17,L=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(g+2));c(G);var R=new Array(2*v);c(R);var M=new Array(512);c(M);var x=new Array(256);c(x);var W=new Array(k);c(W);var se,z,te,K=new Array(v);function ie(T,F,J,$,H){this.static_tree=T,this.extra_bits=F,this.extra_base=J,this.elems=$,this.max_length=H,this.has_stree=T&&T.length}function B(T,F){this.dyn_tree=T,this.max_code=0,this.stat_desc=F}function U(T){return T<256?M[T]:M[256+(T>>>7)]}function me(T,F){T.pending_buf[T.pending++]=255&F,T.pending_buf[T.pending++]=F>>>8&255}function de(T,F,J){T.bi_valid>p-J?(T.bi_buf|=F<<T.bi_valid&65535,me(T,T.bi_buf),T.bi_buf=F>>p-T.bi_valid,T.bi_valid+=J-p):(T.bi_buf|=F<<T.bi_valid&65535,T.bi_valid+=J)}function ee(T,F,J){de(T,J[2*F],J[2*F+1])}function Se(T,F){for(var J=0;J|=1&T,T>>>=1,J<<=1,0<--F;);return J>>>1}function Ee(T,F,J){var $,H,re=new Array(m+1),ve=0;for($=1;$<=m;$++)re[$]=ve=ve+J[$-1]<<1;for(H=0;H<=F;H++){var le=T[2*H+1];le!==0&&(T[2*H]=Se(re[le]++,le))}}function we(T){var F;for(F=0;F<g;F++)T.dyn_ltree[2*F]=0;for(F=0;F<v;F++)T.dyn_dtree[2*F]=0;for(F=0;F<u;F++)T.bl_tree[2*F]=0;T.dyn_ltree[2*S]=1,T.opt_len=T.static_len=0,T.last_lit=T.matches=0}function Ce(T){8<T.bi_valid?me(T,T.bi_buf):0<T.bi_valid&&(T.pending_buf[T.pending++]=T.bi_buf),T.bi_buf=0,T.bi_valid=0}function Ue(T,F,J,$){var H=2*F,re=2*J;return T[H]<T[re]||T[H]===T[re]&&$[F]<=$[J]}function Ie(T,F,J){for(var $=T.heap[J],H=J<<1;H<=T.heap_len&&(H<T.heap_len&&Ue(F,T.heap[H+1],T.heap[H],T.depth)&&H++,!Ue(F,$,T.heap[H],T.depth));)T.heap[J]=T.heap[H],J=H,H<<=1;T.heap[J]=$}function at(T,F,J){var $,H,re,ve,le=0;if(T.last_lit!==0)for(;$=T.pending_buf[T.d_buf+2*le]<<8|T.pending_buf[T.d_buf+2*le+1],H=T.pending_buf[T.l_buf+le],le++,$===0?ee(T,H,F):(ee(T,(re=x[H])+h+1,F),(ve=E[re])!==0&&de(T,H-=W[re],ve),ee(T,re=U(--$),J),(ve=O[re])!==0&&de(T,$-=K[re],ve)),le<T.last_lit;);ee(T,S,F)}function tt(T,F){var J,$,H,re=F.dyn_tree,ve=F.stat_desc.static_tree,le=F.stat_desc.has_stree,fe=F.stat_desc.elems,Ne=-1;for(T.heap_len=0,T.heap_max=r,J=0;J<fe;J++)re[2*J]!==0?(T.heap[++T.heap_len]=Ne=J,T.depth[J]=0):re[2*J+1]=0;for(;T.heap_len<2;)re[2*(H=T.heap[++T.heap_len]=Ne<2?++Ne:0)]=1,T.depth[H]=0,T.opt_len--,le&&(T.static_len-=ve[2*H+1]);for(F.max_code=Ne,J=T.heap_len>>1;1<=J;J--)Ie(T,re,J);for(H=fe;J=T.heap[1],T.heap[1]=T.heap[T.heap_len--],Ie(T,re,1),$=T.heap[1],T.heap[--T.heap_max]=J,T.heap[--T.heap_max]=$,re[2*H]=re[2*J]+re[2*$],T.depth[H]=(T.depth[J]>=T.depth[$]?T.depth[J]:T.depth[$])+1,re[2*J+1]=re[2*$+1]=H,T.heap[1]=H++,Ie(T,re,1),2<=T.heap_len;);T.heap[--T.heap_max]=T.heap[1],function(Re,Qe){var Ct,nt,Pt,ze,qt,la,lt=Qe.dyn_tree,ka=Qe.max_code,tn=Qe.stat_desc.static_tree,an=Qe.stat_desc.has_stree,nn=Qe.stat_desc.extra_bits,_a=Qe.stat_desc.extra_base,Dt=Qe.stat_desc.max_length,Gt=0;for(ze=0;ze<=m;ze++)Re.bl_count[ze]=0;for(lt[2*Re.heap[Re.heap_max]+1]=0,Ct=Re.heap_max+1;Ct<r;Ct++)Dt<(ze=lt[2*lt[2*(nt=Re.heap[Ct])+1]+1]+1)&&(ze=Dt,Gt++),lt[2*nt+1]=ze,ka<nt||(Re.bl_count[ze]++,qt=0,_a<=nt&&(qt=nn[nt-_a]),la=lt[2*nt],Re.opt_len+=la*(ze+qt),an&&(Re.static_len+=la*(tn[2*nt+1]+qt)));if(Gt!==0){do{for(ze=Dt-1;Re.bl_count[ze]===0;)ze--;Re.bl_count[ze]--,Re.bl_count[ze+1]+=2,Re.bl_count[Dt]--,Gt-=2}while(0<Gt);for(ze=Dt;ze!==0;ze--)for(nt=Re.bl_count[ze];nt!==0;)ka<(Pt=Re.heap[--Ct])||(lt[2*Pt+1]!==ze&&(Re.opt_len+=(ze-lt[2*Pt+1])*lt[2*Pt],lt[2*Pt+1]=ze),nt--)}}(T,F),Ee(re,Ne,T.bl_count)}function w(T,F,J){var $,H,re=-1,ve=F[1],le=0,fe=7,Ne=4;for(ve===0&&(fe=138,Ne=3),F[2*(J+1)+1]=65535,$=0;$<=J;$++)H=ve,ve=F[2*($+1)+1],++le<fe&&H===ve||(le<Ne?T.bl_tree[2*H]+=le:H!==0?(H!==re&&T.bl_tree[2*H]++,T.bl_tree[2*C]++):le<=10?T.bl_tree[2*A]++:T.bl_tree[2*L]++,re=H,Ne=(le=0)===ve?(fe=138,3):H===ve?(fe=6,3):(fe=7,4))}function Y(T,F,J){var $,H,re=-1,ve=F[1],le=0,fe=7,Ne=4;for(ve===0&&(fe=138,Ne=3),$=0;$<=J;$++)if(H=ve,ve=F[2*($+1)+1],!(++le<fe&&H===ve)){if(le<Ne)for(;ee(T,H,T.bl_tree),--le!=0;);else H!==0?(H!==re&&(ee(T,H,T.bl_tree),le--),ee(T,C,T.bl_tree),de(T,le-3,2)):le<=10?(ee(T,A,T.bl_tree),de(T,le-3,3)):(ee(T,L,T.bl_tree),de(T,le-11,7));re=H,Ne=(le=0)===ve?(fe=138,3):H===ve?(fe=6,3):(fe=7,4)}}c(K);var Z=!1;function I(T,F,J,$){de(T,(y<<1)+($?1:0),3),function(H,re,ve,le){Ce(H),me(H,ve),me(H,~ve),s.arraySet(H.pending_buf,H.window,re,ve,H.pending),H.pending+=ve}(T,F,J)}n._tr_init=function(T){Z||(function(){var F,J,$,H,re,ve=new Array(m+1);for(H=$=0;H<k-1;H++)for(W[H]=$,F=0;F<1<<E[H];F++)x[$++]=H;for(x[$-1]=H,H=re=0;H<16;H++)for(K[H]=re,F=0;F<1<<O[H];F++)M[re++]=H;for(re>>=7;H<v;H++)for(K[H]=re<<7,F=0;F<1<<O[H]-7;F++)M[256+re++]=H;for(J=0;J<=m;J++)ve[J]=0;for(F=0;F<=143;)G[2*F+1]=8,F++,ve[8]++;for(;F<=255;)G[2*F+1]=9,F++,ve[9]++;for(;F<=279;)G[2*F+1]=7,F++,ve[7]++;for(;F<=287;)G[2*F+1]=8,F++,ve[8]++;for(Ee(G,g+1,ve),F=0;F<v;F++)R[2*F+1]=5,R[2*F]=Se(F,5);se=new ie(G,E,h+1,g,m),z=new ie(R,O,0,v,m),te=new ie(new Array(0),D,0,u,_)}(),Z=!0),T.l_desc=new B(T.dyn_ltree,se),T.d_desc=new B(T.dyn_dtree,z),T.bl_desc=new B(T.bl_tree,te),T.bi_buf=0,T.bi_valid=0,we(T)},n._tr_stored_block=I,n._tr_flush_block=function(T,F,J,$){var H,re,ve=0;0<T.level?(T.strm.data_type===2&&(T.strm.data_type=function(le){var fe,Ne=4093624447;for(fe=0;fe<=31;fe++,Ne>>>=1)if(1&Ne&&le.dyn_ltree[2*fe]!==0)return l;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return o;for(fe=32;fe<h;fe++)if(le.dyn_ltree[2*fe]!==0)return o;return l}(T)),tt(T,T.l_desc),tt(T,T.d_desc),ve=function(le){var fe;for(w(le,le.dyn_ltree,le.l_desc.max_code),w(le,le.dyn_dtree,le.d_desc.max_code),tt(le,le.bl_desc),fe=u-1;3<=fe&&le.bl_tree[2*N[fe]+1]===0;fe--);return le.opt_len+=3*(fe+1)+5+5+4,fe}(T),H=T.opt_len+3+7>>>3,(re=T.static_len+3+7>>>3)<=H&&(H=re)):H=re=J+5,J+4<=H&&F!==-1?I(T,F,J,$):T.strategy===4||re===H?(de(T,2+($?1:0),3),at(T,G,R)):(de(T,4+($?1:0),3),function(le,fe,Ne,Re){var Qe;for(de(le,fe-257,5),de(le,Ne-1,5),de(le,Re-4,4),Qe=0;Qe<Re;Qe++)de(le,le.bl_tree[2*N[Qe]+1],3);Y(le,le.dyn_ltree,fe-1),Y(le,le.dyn_dtree,Ne-1)}(T,T.l_desc.max_code+1,T.d_desc.max_code+1,ve+1),at(T,T.dyn_ltree,T.dyn_dtree)),we(T),$&&Ce(T)},n._tr_tally=function(T,F,J){return T.pending_buf[T.d_buf+2*T.last_lit]=F>>>8&255,T.pending_buf[T.d_buf+2*T.last_lit+1]=255&F,T.pending_buf[T.l_buf+T.last_lit]=255&J,T.last_lit++,F===0?T.dyn_ltree[2*J]++:(T.matches++,F--,T.dyn_ltree[2*(x[J]+h+1)]++,T.dyn_dtree[2*U(F)]++),T.last_lit===T.lit_bufsize-1},n._tr_align=function(T){de(T,2,3),ee(T,S,G),function(F){F.bi_valid===16?(me(F,F.bi_buf),F.bi_buf=0,F.bi_valid=0):8<=F.bi_valid&&(F.pending_buf[F.pending++]=255&F.bi_buf,F.bi_buf>>=8,F.bi_valid-=8)}(T)}},{"../utils/common":41}],53:[function(t,a,n){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,a,n){(function(s){(function(l,o){if(!l.setImmediate){var c,y,k,h,g=1,v={},u=!1,r=l.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(l);m=m&&m.setTimeout?m:l,c={}.toString.call(l.process)==="[object process]"?function(C){process.nextTick(function(){_(C)})}:function(){if(l.postMessage&&!l.importScripts){var C=!0,A=l.onmessage;return l.onmessage=function(){C=!1},l.postMessage("","*"),l.onmessage=A,C}}()?(h="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",S,!1):l.attachEvent("onmessage",S),function(C){l.postMessage(h+C,"*")}):l.MessageChannel?((k=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){k.port2.postMessage(C)}):r&&"onreadystatechange"in r.createElement("script")?(y=r.documentElement,function(C){var A=r.createElement("script");A.onreadystatechange=function(){_(C),A.onreadystatechange=null,y.removeChild(A),A=null},y.appendChild(A)}):function(C){setTimeout(_,0,C)},m.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),L=0;L<A.length;L++)A[L]=arguments[L+1];var E={callback:C,args:A};return v[g]=E,c(g),g++},m.clearImmediate=p}function p(C){delete v[C]}function _(C){if(u)setTimeout(_,0,C);else{var A=v[C];if(A){u=!0;try{(function(L){var E=L.callback,O=L.args;switch(O.length){case 0:E();break;case 1:E(O[0]);break;case 2:E(O[0],O[1]);break;case 3:E(O[0],O[1],O[2]);break;default:E.apply(o,O)}})(A)}finally{p(C),u=!1}}}}function S(C){C.source===l&&typeof C.data=="string"&&C.data.indexOf(h)===0&&_(+C.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Za);var Cn=Za.exports;const Pn=wn(Cn),Pe={ExecuteShell:{label:"Execute Shell",icon:ja,type:"active",category:"shell",sort:0},ViewLog:{label:"View Logs",icon:Va,type:"active",category:"shell",sort:0},Redeploy:{label:"Redeploy",icon:dn,type:"active",category:"workload",sort:1},Rollback:{label:"Rollback",icon:Ga,type:"active",category:"workload",sort:1},Orchestration:{label:"Pause Orchestration",icon:Ka,type:"active",category:"workload",sort:1},EditConfig:{label:"Edit Config",icon:Yt,type:"active",category:"yaml",sort:2},ViewConfig:{label:"View Config",icon:Yt,type:"active",category:"yaml",sort:2},ViewYaml:{label:"View Yaml",icon:Yt,type:"active",category:"yaml",sort:2},EditYaml:{label:"Edit Yaml",icon:Yt,type:"active",category:"yaml",sort:2},Clone:{label:"Clone",icon:Pa,type:"active",category:"yaml",sort:2},CloneYaml:{label:"Clone",icon:Pa,type:"active",category:"yaml",sort:2},Download:{label:"Download Yaml",icon:kt,type:"active",category:"util",sort:3},Delete:{label:"Delete",icon:aa,type:"active",category:"util",sort:3},Proxy:{label:"Set Proxy",icon:on,type:"active",category:"util",sort:3}},Da={Detail:{path:"detail"},Yaml:{path:"yaml"},Config:{path:"config"}},Aa={ExecuteShell(d){return{...Pe.ExecuteShell,action:async e=>{d.executeShell(e)}}},ViewLog(d){return{...Pe.ViewLog,action:async e=>{d.viewLog(e)}}},Redeploy(d){return{...Pe.Redeploy,action:async e=>{await d.redeploy(e)}}},Rollback(d){return{...Pe.Rollback,action:async e=>{d.rollback(e)}}},Orchestration(d){return{...Pe.Orchestration,action:async e=>{d.pauseOrchestration(e)}}},EditConfig(d){return{...Pe.EditConfig,action:async e=>{d.gotoLink(e,"edit")}}},ViewConfig(d){return{...Pe.ViewConfig,action:async e=>{d.gotoLink(e,"config")}}},ViewYaml(d){return{...Pe.ViewYaml,action:async e=>{d.gotoLink(e,"yaml")}}},EditYaml(d){return{...Pe.EditYaml,action:async e=>{d.gotoLink(e,"yamle")}}},Clone(d){return{...Pe.Clone,action:async e=>{d.gotoLink(e,"clone")}}},CloneYaml(d){return{...Pe.CloneYaml,action:async e=>{d.gotoLink(e,"cloneYaml")}}},Download(d){return{...Pe.Download,action:e=>{d.download(e)}}},Delete(d){return{...Pe.Delete,action:e=>{d.delete(e)}}},Proxy(d){return{...Pe.Proxy,action:e=>{d.setProxy(e)}}}},Na={ExecuteShell(d,e){return{...Pe.ExecuteShell,action:async()=>{d.executeShell(e.metadata.name)}}},ViewLog(d,e){return{...Pe.ViewLog,action:async()=>{d.viewLog(e.metadata.name)}}},Redeploy(d,e){return{...Pe.Redeploy,action:async()=>{d.redeploy(e.metadata.name)}}},Rollback(d,e){return{...Pe.Rollback,action:async()=>{d.rollback(e.metadata.name)}}},Orchestration(d,e){return{...Pe.Orchestration,action:async t=>{d.pauseOrchestration(e.metadata.name)}}},EditConfig(d,e){return{...Pe.EditConfig,action:async()=>{d.gotoLink(e.metadata.name,"edit")}}},EditYaml(d,e){return{...Pe.EditYaml,action:async t=>{d.gotoLink(e.metadata.name,"yamle")}}},ViewYaml(d,e){return{...Pe.ViewYaml,action:async t=>{d.gotoLink(e.metadata.name,"yaml")}}},ViewConfig(d,e){return{...Pe.ViewConfig,action:async t=>{d.gotoLink(e.metadata.name,"config")}}},Clone(d,e){return{...Pe.Clone,action:async()=>{d.gotoLink(e.metadata.name,"clone")}}},CloneYaml(d,e){return{...Pe.CloneYaml,action:async()=>{d.gotoLink(e.metadata.name,"cloneYaml")}}},Download(d,e){return{...Pe.Download,action:()=>{d.download(e.metadata.name)}}},Delete(d,e){return{...Pe.Delete,action:()=>{d.delete(e.metadata.name)}}},Proxy(d,e){return{...Pe.Proxy,action:()=>{d.setProxy(e.metadata.name)}}}},Ta={Redeploy(d){return{...Pe.Redeploy,action:e=>{d.getResources(e).forEach(t=>{d.redeploy(t.metadata.name)})}}},Download(d){return{...Pe.Download,action:async e=>{const t=new Pn;d.getResources(e).map(o=>({name:`${o.metadata.name}.yaml`,content:ea.dump(o)})).forEach(o=>{t.file(o.name,o.content)});const n=await t.generateAsync({type:"blob"}),s=URL.createObjectURL(n),l=document.createElement("a");l.href=s,l.download="resources.zip",document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(s)},0)}}},Delete(d){return{...Pe.Delete,action:e=>{d.getResources(e).forEach(t=>{d.delete(t.metadata.name)})}}}},Qt={getTableMenus(d,e=[]){let t={};e.filter(n=>!!Aa[n]).map(n=>({...Aa[n](d),typeName:n})).forEach(n=>{t[n.sort]||(t[n.sort]=[]),t[n.sort].push(n)});let a=[];return Reflect.ownKeys(t).forEach(n=>{a.push(...t[n]),a.push({type:"line"})}),a.length>0&&a.pop(),a},getDetailDropMenus(d,e,t=[]){let a={};t.filter(s=>!!Na[s]).map(s=>({...Na[s](d,e),typeName:s})).forEach(s=>{a[s.sort]||(a[s.sort]=[]),a[s.sort].push(s)});let n=[];return Reflect.ownKeys(a).forEach(s=>{n.push(...a[s]),n.push({type:"line"})}),n.length>0&&n.pop(),n},getTableButtons(d,e=[]){return e.filter(t=>!!Ta[t]).map(t=>({...Ta[t](d),typeName:t}))},getActionPages(d=[]){return d.filter(e=>!!Da[e]).map(e=>({...Da[e],name:e}))}};var Dn=20,An=1,St=1e6,Nn=1e6,Tn=-7,En=21,In=!1,Et="[big.js] ",ft=Et+"Invalid ",sa=ft+"decimal places",On=ft+"rounding mode",Ya=Et+"Division by zero",De={},it=void 0,Ln=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Ja(){function d(e){var t=this;if(!(t instanceof d))return e===it?Ja():new d(e);if(e instanceof d)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(d.strict===!0&&typeof e!="bigint")throw TypeError(ft+"value");e=e===0&&1/e<0?"-0":String(e)}Mn(t,e)}t.constructor=d}return d.prototype=De,d.DP=Dn,d.RM=An,d.NE=Tn,d.PE=En,d.strict=In,d.roundDown=0,d.roundHalfUp=1,d.roundHalfEven=2,d.roundUp=3,d}function Mn(d,e){var t,a,n;if(!Ln.test(e))throw Error(ft+"number");for(d.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(t<0&&(t=a),t+=+e.slice(a+1),e=e.substring(0,a)):t<0&&(t=e.length),n=e.length,a=0;a<n&&e.charAt(a)=="0";)++a;if(a==n)d.c=[d.e=0];else{for(;n>0&&e.charAt(--n)=="0";);for(d.e=t-a-1,d.c=[],t=0;a<=n;)d.c[t++]=+e.charAt(a++)}return d}function ht(d,e,t,a){var n=d.c;if(t===it&&(t=d.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(On);if(e<1)a=t===3&&(a||!!n[0])||e===0&&(t===1&&n[0]>=5||t===2&&(n[0]>5||n[0]===5&&(a||n[1]!==it))),n.length=1,a?(d.e=d.e-e+1,n[0]=1):n[0]=d.e=0;else if(e<n.length){if(a=t===1&&n[e]>=5||t===2&&(n[e]>5||n[e]===5&&(a||n[e+1]!==it||n[e-1]&1))||t===3&&(a||!!n[0]),n.length=e,a){for(;++n[--e]>9;)if(n[e]=0,e===0){++d.e,n.unshift(1);break}}for(e=n.length;!n[--e];)n.pop()}return d}function gt(d,e,t){var a=d.e,n=d.c.join(""),s=n.length;if(e)n=n.charAt(0)+(s>1?"."+n.slice(1):"")+(a<0?"e":"e+")+a;else if(a<0){for(;++a;)n="0"+n;n="0."+n}else if(a>0)if(++a>s)for(a-=s;a--;)n+="0";else a<s&&(n=n.slice(0,a)+"."+n.slice(a));else s>1&&(n=n.charAt(0)+"."+n.slice(1));return d.s<0&&t?"-"+n:n}De.abs=function(){var d=new this.constructor(this);return d.s=1,d};De.cmp=function(d){var e,t=this,a=t.c,n=(d=new t.constructor(d)).c,s=t.s,l=d.s,o=t.e,c=d.e;if(!a[0]||!n[0])return a[0]?s:n[0]?-l:0;if(s!=l)return s;if(e=s<0,o!=c)return o>c^e?1:-1;for(l=(o=a.length)<(c=n.length)?o:c,s=-1;++s<l;)if(a[s]!=n[s])return a[s]>n[s]^e?1:-1;return o==c?0:o>c^e?1:-1};De.div=function(d){var e=this,t=e.constructor,a=e.c,n=(d=new t(d)).c,s=e.s==d.s?1:-1,l=t.DP;if(l!==~~l||l<0||l>St)throw Error(sa);if(!n[0])throw Error(Ya);if(!a[0])return d.s=s,d.c=[d.e=0],d;var o,c,y,k,h,g=n.slice(),v=o=n.length,u=a.length,r=a.slice(0,o),m=r.length,p=d,_=p.c=[],S=0,C=l+(p.e=e.e-d.e)+1;for(p.s=s,s=C<0?0:C,g.unshift(0);m++<o;)r.push(0);do{for(y=0;y<10;y++){if(o!=(m=r.length))k=o>m?1:-1;else for(h=-1,k=0;++h<o;)if(n[h]!=r[h]){k=n[h]>r[h]?1:-1;break}if(k<0){for(c=m==o?n:g;m;){if(r[--m]<c[m]){for(h=m;h&&!r[--h];)r[h]=9;--r[h],r[m]+=10}r[m]-=c[m]}for(;!r[0];)r.shift()}else break}_[S++]=k?y:++y,r[0]&&k?r[m]=a[v]||0:r=[a[v]]}while((v++<u||r[0]!==it)&&s--);return!_[0]&&S!=1&&(_.shift(),p.e--,C--),S>C&&ht(p,C,t.RM,r[0]!==it),p};De.eq=function(d){return this.cmp(d)===0};De.gt=function(d){return this.cmp(d)>0};De.gte=function(d){return this.cmp(d)>-1};De.lt=function(d){return this.cmp(d)<0};De.lte=function(d){return this.cmp(d)<1};De.minus=De.sub=function(d){var e,t,a,n,s=this,l=s.constructor,o=s.s,c=(d=new l(d)).s;if(o!=c)return d.s=-c,s.plus(d);var y=s.c.slice(),k=s.e,h=d.c,g=d.e;if(!y[0]||!h[0])return h[0]?d.s=-c:y[0]?d=new l(s):d.s=1,d;if(o=k-g){for((n=o<0)?(o=-o,a=y):(g=k,a=h),a.reverse(),c=o;c--;)a.push(0);a.reverse()}else for(t=((n=y.length<h.length)?y:h).length,o=c=0;c<t;c++)if(y[c]!=h[c]){n=y[c]<h[c];break}if(n&&(a=y,y=h,h=a,d.s=-d.s),(c=(t=h.length)-(e=y.length))>0)for(;c--;)y[e++]=0;for(c=e;t>o;){if(y[--t]<h[t]){for(e=t;e&&!y[--e];)y[e]=9;--y[e],y[t]+=10}y[t]-=h[t]}for(;y[--c]===0;)y.pop();for(;y[0]===0;)y.shift(),--g;return y[0]||(d.s=1,y=[g=0]),d.c=y,d.e=g,d};De.mod=function(d){var e,t=this,a=t.constructor,n=t.s,s=(d=new a(d)).s;if(!d.c[0])throw Error(Ya);return t.s=d.s=1,e=d.cmp(t)==1,t.s=n,d.s=s,e?new a(t):(n=a.DP,s=a.RM,a.DP=a.RM=0,t=t.div(d),a.DP=n,a.RM=s,this.minus(t.times(d)))};De.neg=function(){var d=new this.constructor(this);return d.s=-d.s,d};De.plus=De.add=function(d){var e,t,a,n=this,s=n.constructor;if(d=new s(d),n.s!=d.s)return d.s=-d.s,n.minus(d);var l=n.e,o=n.c,c=d.e,y=d.c;if(!o[0]||!y[0])return y[0]||(o[0]?d=new s(n):d.s=n.s),d;if(o=o.slice(),e=l-c){for(e>0?(c=l,a=y):(e=-e,a=o),a.reverse();e--;)a.push(0);a.reverse()}for(o.length-y.length<0&&(a=y,y=o,o=a),e=y.length,t=0;e;o[e]%=10)t=(o[--e]=o[e]+y[e]+t)/10|0;for(t&&(o.unshift(t),++c),e=o.length;o[--e]===0;)o.pop();return d.c=o,d.e=c,d};De.pow=function(d){var e=this,t=new e.constructor("1"),a=t,n=d<0;if(d!==~~d||d<-1e6||d>Nn)throw Error(ft+"exponent");for(n&&(d=-d);d&1&&(a=a.times(e)),d>>=1,!!d;)e=e.times(e);return n?t.div(a):a};De.prec=function(d,e){if(d!==~~d||d<1||d>St)throw Error(ft+"precision");return ht(new this.constructor(this),d,e)};De.round=function(d,e){if(d===it)d=0;else if(d!==~~d||d<-1e6||d>St)throw Error(sa);return ht(new this.constructor(this),d+this.e+1,e)};De.sqrt=function(){var d,e,t,a=this,n=a.constructor,s=a.s,l=a.e,o=new n("0.5");if(!a.c[0])return new n(a);if(s<0)throw Error(Et+"No square root");s=Math.sqrt(+gt(a,!0,!0)),s===0||s===1/0?(e=a.c.join(""),e.length+l&1||(e+="0"),s=Math.sqrt(e),l=((l+1)/2|0)-(l<0||l&1),d=new n((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+l)):d=new n(s+""),l=d.e+(n.DP+=4);do t=d,d=o.times(t.plus(a.div(t)));while(t.c.slice(0,l).join("")!==d.c.slice(0,l).join(""));return ht(d,(n.DP-=4)+d.e+1,n.RM)};De.times=De.mul=function(d){var e,t=this,a=t.constructor,n=t.c,s=(d=new a(d)).c,l=n.length,o=s.length,c=t.e,y=d.e;if(d.s=t.s==d.s?1:-1,!n[0]||!s[0])return d.c=[d.e=0],d;for(d.e=c+y,l<o&&(e=n,n=s,s=e,y=l,l=o,o=y),e=new Array(y=l+o);y--;)e[y]=0;for(c=o;c--;){for(o=0,y=l+c;y>c;)o=e[y]+s[c]*n[y-c-1]+o,e[y--]=o%10,o=o/10|0;e[y]=o}for(o?++d.e:e.shift(),c=e.length;!e[--c];)e.pop();return d.c=e,d};De.toExponential=function(d,e){var t=this,a=t.c[0];if(d!==it){if(d!==~~d||d<0||d>St)throw Error(sa);for(t=ht(new t.constructor(t),++d,e);t.c.length<d;)t.c.push(0)}return gt(t,!0,!!a)};De.toFixed=function(d,e){var t=this,a=t.c[0];if(d!==it){if(d!==~~d||d<0||d>St)throw Error(sa);for(t=ht(new t.constructor(t),d+t.e+1,e),d=d+t.e+1;t.c.length<d;)t.c.push(0)}return gt(t,!1,!!a)};De[Symbol.for("nodejs.util.inspect.custom")]=De.toJSON=De.toString=function(){var d=this,e=d.constructor;return gt(d,d.e<=e.NE||d.e>=e.PE,!!d.c[0])};De.toNumber=function(){var d=+gt(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(d.toString()))throw Error(Et+"Imprecise conversion");return d};De.toPrecision=function(d,e){var t=this,a=t.constructor,n=t.c[0];if(d!==it){if(d!==~~d||d<1||d>St)throw Error(ft+"precision");for(t=ht(new a(t),d,e);t.c.length<d;)t.c.push(0)}return gt(t,d<=t.e||t.e<=a.NE||t.e>=a.PE,!!n)};De.valueOf=function(){var d=this,e=d.constructor;if(e.strict===!0)throw Error(Et+"valueOf disallowed");return gt(d,d.e<=e.NE||d.e>=e.PE,!0)};var Ge=Ja();const He={formatAge(d){const e=new Date,t=new Date(d),a=Math.floor((e-t)/1e3);return a<60?`${a}s`:a<3600?`${Math.floor(a/60)} min`:a<86400?`${Math.floor(a/3600)} hours`:`${Math.floor(a/86400)} days`},unitConvert:{cpu:{parse:d=>{if(!d)return 0;const e={n:new Ge("1e-9"),u:new Ge("0.000001"),m:new Ge("0.001"),"":new Ge(1)},t=d.match(/([\d.]+)(\D*)/);if(!t)return 0;try{const a=new Ge(t[1]),n=e[t[2]]||new Ge(1);return parseFloat(a.times(n).toString())}catch{return 0}}},memory:{parse:d=>{if(!d)return 0;const e={Ki:new Ge(1).div(1024).div(1024),Mi:new Ge(1).div(1024),Gi:new Ge(1),Ti:new Ge(1024)},t=d.match(/([\d.]+)(\D*)/);if(!t)return 0;try{const a=new Ge(t[1]),n=e[t[2]]||new Ge(1).div(new Ge(1024).pow(3));return parseFloat(a.times(n).toString())}catch{return 0}}},format:d=>new Ge(d).toFixed(2)},formatBytes(d,e=2){if(d===0)return"0 Bytes";const t=1024,a=e<0?0:e,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(d)/Math.log(t));return parseFloat((d/Math.pow(t,s)).toFixed(a))+" "+n[s]},matchLabels(d,e){return Object.keys(d).every(t=>e[t]===d[t])},filterBySelector(d=[],e){return d.filter(t=>this.matchLabels(t.spec.selector.matchLabels,e))}};var zn=(d,e)=>q(e,"line-by-line"),Bn=(d,e)=>q(e,"side-by-side"),Un=(d,e)=>_t.close(e.popupId),Fn=(d,e)=>e(),Vn=j('<div class="differ svelte-g1ekzf"><div class="differ-top svelte-g1ekzf"><!></div> <div class="differ-body svelte-g1ekzf"><!></div> <div class="differ-btns svelte-g1ekzf"><div class="differ-btns-left btn-group svelte-g1ekzf"><button><!> Unified</button> <button><!> Split</button></div> <div class="differ-btns-right btn-group"><button class="btn btn-primary"><!> Cancel</button> <button class="btn btn-primary"><!> Rollback</button></div></div></div>');function jn(d,e){ce(e,!0);let t=ae(X([])),a=ae(null),n=ae(null),s=ae(null),l=ae(null),o=ae("line-by-line");function c(){if(i(s)){let D=i(s).metadata.annotations["deployment.kubernetes.io/revision"];e.onRollback&&e.onRollback(D),_t.close(e.popupId)}}oe(()=>{Me.ready("ReplicaSet",D=>{let N=D.getRawBySelector(e.selector),G=N.find(R=>e.annotations["deployment.kubernetes.io/revision"]===R.metadata.annotations["deployment.kubernetes.io/revision"]);q(t,N.filter(R=>R!==G).map(R=>({name:`Reversion ${R.metadata.annotations["deployment.kubernetes.io/revision"]||0} ${He.formatAge(R.metadata.creationTimestamp)}`,value:R.metadata.name,data:R})),!0),q(a,G,!0)})}),oe(()=>{!i(s)&&i(t).length>0&&q(n,i(t)[0].value,!0)}),oe(()=>{let D=i(t).find(N=>N.value===i(n));D&&q(s,D.data,!0)}),oe(()=>{if(i(s)){const D=pn("original.yaml","modified.yaml",ea.dump(i(a)),ea.dump(i(s)),"Original","Modified");q(l,fn(D,{outputFormat:i(o),highlight:!0,matching:"words"}),!0)}});var y=Vn(),k=b(y),h=b(k);ge(h,{get options(){return i(t)},label:"Select Reversion",get value(){return i(n)},set value(D){q(n,D,!0)}}),f(k);var g=P(k,2),v=b(g);Ha(v,()=>i(l)),f(g);var u=P(g,2),r=b(u),m=b(r);m.__click=[zn,o];var p=b(m);mn(p),bt(),f(m);var _=P(m,2);_.__click=[Bn,o];var S=b(_);vn(S),bt(),f(_),f(r);var C=P(r,2),A=b(C);A.__click=[Un,e];var L=b(A);qe(L),bt(),f(A);var E=P(A,2);E.__click=[Fn,c];var O=b(E);Ga(O),bt(),f(E),f(C),f(u),f(y),ne(()=>{je(m,1,Ke(["btn btn-primary",i(o)==="line-by-line"&&"hover"])),je(_,1,Ke(["btn btn-primary",i(o)==="side-by-side"&&"hover"]))}),V(d,y),ue()}xe(["click"]);var Kn=j('<div class="banner error"> </div>'),Hn=(d,e)=>_t.close(e.popupId),Wn=(d,e)=>e(),qn=j('<div class="section svelte-1abylle"><div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div> <!> <div class="btns svelte-1abylle"><div class="btn-group"><button class="btn btn-primary"><!> Cancel</button> <button class="btn btn-primary"><!> Save</button></div></div></div>');function Gn(d,e){ce(e,!0);let t=ae(""),a=ae(""),n=ae(""),s=ae(!1),l=ae("");function o(O){let D={};if(!i(t)||!i(n)){q(s,!0),q(l,"name and port can not empty");return}e.resource.kind==="Service"?D={name:i(t),description:i(a),localPort:i(n),serviceType:"service",namespace:e.resource.metadata.namespace,cluster:Fe.id,service:e.resource.metadata.name,target:{host:e.resource.spec.clusterIP,port:e.resource.spec.ports[0].port}}:e.resource.kind==="Pod"&&(D={name:i(t),description:i(a),localPort:i(n),serviceType:"pod",namespace:e.resource.metadata.namespace,cluster:Fe.id,pod:e.resource.metadata.name,target:{host:e.resource.status.podIP,port:e.resource.spec.containers[0].ports[0].containerPort}}),D?(D.id=Xe.getRandomId(),gn.createProxy(D)?(dt.success("Created success"),_t.close(e.popupId)):dt.error("Created failed")):dt.success("Created success")}var c=qn(),y=b(c),k=b(y),h=b(k);Q(h,{label:"Name",get value(){return i(t)},set value(O){q(t,O,!0)}}),f(k);var g=P(k,2),v=b(g);Q(v,{label:"Description",get value(){return i(a)},set value(O){q(a,O,!0)}}),f(g);var u=P(g,2),r=b(u);Q(r,{label:"Local Port",type:"number",get value(){return i(n)},set value(O){q(n,O,!0)}}),f(u),f(y);var m=P(y,2);{var p=O=>{var D=Kn(),N=b(D,!0);f(D),ne(()=>he(N,i(l))),V(O,D)};ye(m,O=>{i(s)&&O(p)})}var _=P(m,2),S=b(_),C=b(S);C.__click=[Hn,e];var A=b(C);qe(A),bt(),f(C);var L=P(C,2);L.__click=[Wn,o];var E=b(L);wt(E),bt(),f(L),f(S),f(_),f(c),V(d,c),ue()}xe(["click"]);class Be{constructor(e,t){this.raw=e,this.resources=t,this.handleKind=null}get name(){return this.raw.metadata.name}get namespace(){return this.raw.metadata.namespace}get labels(){return this.raw.metadata.labels}get annotations(){return this.raw.metadata.annotations}get age(){return He.formatAge(this.raw.metadata.creationTimestamp)}get kind(){return this.raw.kind}getLinks(e){return{detail:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/detail`,config:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/config`,yaml:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/yaml`,yamle:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/yamle`,edit:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/edit`,clone:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/clone`,cloneYaml:`/dashboard/${Fe.path}/resource/${this.handleKind}/${e}/clonee`,create:`/dashboard/${Fe.path}/resource/${this.handleKind}/create`,list:`/dashboard/${Fe.path}/resource/${this.handleKind}`}}download(e){let t=this.getResource(e);t&&Xe.downloadAsYAML(ea.dump(t),`${e}.yaml`)}async delete(e){let t=this.resources[this.handleKind].getRawByName(e);if(t){let{code:a,msg:n}=await st.delete.post({kind:this.handleKind,name:e,namespace:t.metadata.namespace});a!==0&&dt.error(n),this.gotoList()}else dt.error("resource not find")}async create({namespace:e,content:t}){return await st.create.post({namespace:e,content:t})}async update({namespace:e,content:t}){return await st.update.post({namespace:e,content:t})}async scaling({name:e,namespace:t,up:a=!0,step:n=1}){return st.scaling.post({namespace:t,name:e,kind:this.handleKind,up:a,step:n})}executeShell(e){let t=this.resources[this.handleKind].getRawByName(e);if(t)if(this.handleKind==="Pod")yt.openTerm({type:"shell",podName:t.metadata.name,namespace:t.metadata.namespace,containers:t.status.containerStatuses.map(a=>({name:a.name}))});else{let a=this.resources.Pod.getRawByLabels(t.spec.selector.matchLabels||{});a.length>0&&yt.openTerm({type:"shell",podName:a[0].metadata.name,namespace:a[0].metadata.namespace,containers:a[0].status.containerStatuses.map(n=>({name:n.name}))})}}viewLog(e){let t=this.resources[this.handleKind].getRawByName(e);if(t)if(this.handleKind==="Pod")yt.openTerm({podName:t.metadata.name,type:"log",namespace:t.metadata.namespace,containers:t.spec.containers.map(a=>({name:a.name}))});else{let a=this.resources.Pod.getRawByLabels(t.spec.selector.matchLabels||{});a.length>0&&yt.openTerm({type:"log",podName:a[0].metadata.name,namespace:a[0].metadata.namespace,containers:a[0].status.containerStatuses.map(n=>({name:n.name}))})}}async redeploy(e){let t=this.getResource(e);if(t){let{code:a,msg:n}=await st.resourceRedeploy.post({name:e,kind:this.handleKind,namespace:t.metadata.namespace});a!==0&&dt.error(n)}return{code:1,msg:"redeploy error"}}rollback(e){let t=this.getResource(e);t&&_t.open("Select Version",jn,{selector:t.spec.selector.matchLabels,annotations:t.metadata.annotations,onRollback:async a=>{let{code:n,msg:s}=await st.rollback.post({name:e,kind:this.handleKind,namespace:t.metadata.namespace,revision:a});n!==0&&dt.error(s)}},"90%","90%")}async pauseOrchestration(e){let t=this.getResource(e);if(t){let{code:a,msg:n}=await st.pause.post({name:e,kind:this.handleKind,namespace:t.metadata.namespace});a!==0&&dt.error(n)}return{code:1,msg:"redeploy error"}}async resumeOrchestration(e){let t=this.getResource(e);if(t){let{code:a,msg:n}=await st.resume.post({name:e,kind:this.handleKind,namespace:t.metadata.namespace});a!==0&&dt.error(n)}return{code:1,msg:"redeploy error"}}gotoLink(e,t){let a=this.getLinks(e);a[t]&&Zt(a[t])}getResource(e){return this.resources[this.handleKind].getRawByName(e)}getResources(e){return e.map(t=>this.resources[this.handleKind].getRawByName(t))}gotoList(){let e=this.getLinks(null);Zt(e.list)}gotoCreate(){let e=this.getLinks(null);Zt(e.create)}setProxy(e){_t.open("Set lcoal proxy",Gn,{resource:this.resources[this.handleKind].getRawByName(e)},"600px")}getDependence(){return[]}getStatus(){return this.raw.status}getMatchLabels(){var e,t;return(t=(e=this.raw.spec)==null?void 0:e.selector)==null?void 0:t.matchLabels}isMatchLabels(e){return Object.keys(e||{}).every(t=>{var a,n;return((n=(a=this.raw.metadata)==null?void 0:a.labels)==null?void 0:n[t])===e[t]})}getDetail(){return{id:this.name,kind:this.kind,name:this.name,namespace:this.namespace,age:this.age,status:this.getStatus()}}getTableRow(){return this.getDetail()}getTableHeader(){return[]}getActions(){return["Detail","Config","Yaml","EditConfig","EditYaml","Clone","Download","Delete"]}getTableButtons(){return Qt.getTableButtons(this,this.getActions())}getTableMenus(){return Qt.getTableMenus(this,this.getActions())}onShowTableMenu(e,t){console.log("onShowTableMenu")}getCreatable(){return{name:"Create",action:()=>{Zt(`/dashboard/${Fe.path}/resource/${this.handleKind}/create`)}}}getLabels(e){return Reflect.ownKeys(e.metadata.labels||{}).map(t=>({key:t,value:e.metadata.labels[t]}))}getAnnotations(e){return Reflect.ownKeys(e.metadata.annotations||{}).map(t=>({key:t,value:e.metadata.annotations[t]}))}getIntro(e){return[]}getDetailTabs(e){return[]}getActionPages(e){return Qt.getActionPages(this.getActions())}getDetailDropManus(e){return Qt.getDetailDropMenus(this,e,this.getActions())}onShowDropMenu(e,t){console.log("onShowDropMenu")}getDetailComponents(e){return[]}isMultiFormDefinition(){return!1}getMultiFormDefinitions(){return{title:"",types:[{name:"",type:"",icon:"",description:""}]}}getFormDefinition(e,t){return[]}async getTemplate(e){return await xn.get(this.handleKind,e)}cleanResource(e,t={}){if(t=Object.assign({preserveRancherFields:!0,preserveRolloutFields:!0},t),!e||typeof e!="object")return e;const a=s=>{if(!s)return s;const l={name:s.name,namespace:s.namespace,labels:s.labels,annotations:{}};if(s.annotations){for(const[c,y]of Object.entries(s.annotations))t.preserveRancherFields&&c.startsWith("field.cattle.io/")||t.preserveRolloutFields&&c==="kubectl.kubernetes.io/restartedAt"||!c.startsWith("kubectl.kubernetes.io/")&&!c.startsWith("field.cattle.io/")||(l.annotations[c]=y);Object.keys(l.annotations).length===0&&delete l.annotations}return["creationTimestamp","generation","resourceVersion","selfLink","uid","managedFields","finalizers"].forEach(c=>{l[c]&&delete l[c]}),Object.keys(l).forEach(c=>l[c]===void 0&&delete l[c]),l},n=s=>{if(!s||typeof s!="object")return s;const l=Array.isArray(s)?[...s]:{...s};l.metadata&&(l.metadata=a(l.metadata)),l.status&&delete l.status;for(const o in l)typeof l[o]=="object"&&(l[o]=n(l[o]));return l};return n(e)}}const Zn=(d,e=ma)=>{var t=vt(),a=Ve(t);ke(a,17,()=>e().cells,_e,(n,s)=>{var l=$n(),o=b(l);{var c=k=>{var h=Jn(),g=Ve(h),v=b(g,!0);f(g);var u=P(g,2);{var r=m=>{var p=Yn(),_=b(p,!0);f(p),ne(()=>he(_,i(s).value.message)),V(m,p)};ye(u,m=>{i(s).value.showDescription&&m(r)})}ne(()=>{je(g,1,Ke(["status-text",i(s).value.class]),"svelte-1ok1vea"),he(v,i(s).value.status)}),V(k,h)},y=(k,h)=>{{var g=u=>{var r=vt(),m=Ve(r);{var p=S=>{var C=Xn(),A=b(C);wt(A),f(C),V(S,C)},_=S=>{var C=Qn(),A=b(C);qe(A),f(C),V(S,C)};ye(m,S=>{i(s).value===!0?S(p):S(_,!1)})}V(u,r)},v=u=>{var r=pa();ne(()=>he(r,i(s).value)),V(u,r)};ye(k,u=>{i(s).key==="ready"?u(g):u(v,!1)},h)}};ye(o,k=>{i(s).key==="status"?k(c):k(y,!1)})}f(l),ne(()=>je(l,1,Ke(["table-cell",i(s).align,i(s).key]),"svelte-1ok1vea")),V(n,l)}),V(d,t)};var Yn=j('<div class="row-desc-text"> </div>'),Jn=j("<div> </div> <!>",1),Xn=j('<div class="success svelte-1ok1vea"><!></div>'),Qn=j('<div class="error svelte-1ok1vea"><!></div>'),$n=j("<div><!></div>");function es(d,e){ce(e,!0);let t=pe(e,"params",19,()=>({})),a=ae(X([])),n=[{name:"State",key:"status",align:"left",width:"150px"},{name:"Ready",key:"ready",align:"center",width:"100px"},{name:"Name",key:"name",align:"left"},{name:"Image",key:"image",align:"left"},{name:"Restarts",key:"restartCount",align:"center",width:"100px"},{name:"Started",key:"age",align:"center",width:"100px"}],s=[],l=[{label:"Execute ShellIcon",icon:ja,type:"active",action:async o=>{let c=(i(a)||[]).find(y=>y.name===o);yt.openTerm({type:"shell",podName:c.podName,namespace:c.namespace,containers:[c]})}},{label:"View Logs",icon:Va,type:"active",action:async o=>{let c=(i(a)||[]).find(y=>y.name===o);yt.openTerm({type:"log",podName:c.podName,namespace:c.namespace,containers:[c]})}},{type:"line"},{label:"DownloadIcon",icon:kt,type:"active",action:o=>{console.log(o)}},{type:"line"},{label:"DeleteIcon",icon:aa,type:"active",action:o=>{console.log(o)}}];oe(()=>{Me.ready("Pod",o=>{let c=o.getByName(t().podName);c&&q(a,c.getContainerTableData(),!0)})}),Oe(d,{header:n,get data(){return i(a)},buttons:s,menus:l,checkbox:!1,row:Zn}),ue()}const Ea=(d,e=ma)=>{var t=vt(),a=Ve(t);ke(a,17,()=>e().cells,_e,(n,s)=>{var l=ss(),o=b(l);{var c=k=>{var h=as(),g=Ve(h),v=b(g,!0);f(g);var u=P(g,2);{var r=m=>{var p=ts(),_=b(p,!0);f(p),ne(()=>he(_,i(s).value.message)),V(m,p)};ye(u,m=>{i(s).value.showDescription&&m(r)})}ne(()=>{je(g,1,Ke(["status-text",i(s).value.className]),"svelte-1jo4e1e"),he(v,i(s).value.status)}),V(k,h)},y=(k,h)=>{{var g=u=>{var r=ns(),m=b(r,!0);f(r),ne(()=>{Wa(r,"href",`/dashboard/${Fe.path??""}/resource/${e().kind??""}/${i(s).value??""}`),he(m,i(s).value)}),V(u,r)},v=u=>{var r=pa();ne(()=>he(r,i(s).value)),V(u,r)};ye(k,u=>{i(s).key==="name"?u(g):u(v,!1)},h)}};ye(o,k=>{i(s).key==="status"&&i(s).value?k(c):k(y,!1)})}f(l),ne(()=>je(l,1,Ke(["table-cell",i(s).align,i(s).key]),"svelte-1jo4e1e")),V(n,l)}),V(d,t)};var ts=j('<div class="row-desc-text"> </div>'),as=j("<div> </div> <!>",1),ns=j("<a> </a>"),ss=j("<div><!></div>"),is=j('<div class="title svelte-1jo4e1e">Referred To By</div> <!> <div class="title svelte-1jo4e1e">Refers To</div> <!>',1);function We(d,e){ce(e,!0);let t=ae(!1),a=ae(!1),n=ae(X([])),s=ae(X([])),l=null,o=null,c=[{name:"Status",key:"status",align:"left"},{name:"Type",key:"kind",align:"left"},{name:"Name",key:"name",align:"left"},{name:"Namespace",key:"namespace",align:"left"},{name:"Age",key:"age",align:"left"}],y=[],k=[];qa(()=>{st.findRefers.post({kind:e.kind,namespace:e.namespace,name:e.name}).then(({code:u,data:r})=>{if(u===0){let{referredToBy:m,refersTo:p}=r;m.length>0&&(l=Me.getResourceProvider(m.map(_=>({name:_.metadata.name,kind:_.kind,namespace:_.metadata.namespace}))),q(t,!0)),p.length>0&&(o=Me.getResourceProvider(p.map(_=>({name:_.metadata.name,kind:_.kind,namespace:_.metadata.namespace}))),q(a,!0))}})}),oe(()=>{i(t)&&l.ready(()=>{q(n,l.getCommonDetailList(),!0)}),i(a)&&o.ready(()=>{q(s,o.getCommonDetailList(),!0)})});var h=is(),g=P(Ve(h),2);Oe(g,{header:c,buttons:y,menus:k,row:Ea,get data(){return i(n)},checkbox:!1});var v=P(g,4);Oe(v,{header:c,buttons:y,menus:k,row:Ea,get data(){return i(s)},checkbox:!1}),V(d,h),ue()}class rs extends Be{constructor(e,t){super(e,t)}getStatus(){var l,o,c,y,k,h,g,v,u,r,m,p;let e=this.raw;const t=e.status,a=e.metadata,n=e.spec;if(a.deletionTimestamp)return{status:"Terminating",className:"status-terminating",description:"Pod is being deleted but has not yet fully terminated. It may be stuck due to unfinished finalizers or API communication failure"};if(t.reason==="Evicted")return{status:"Evicted",className:"status-evicted",description:"Pod was evicted due to insufficient node resources (e.g., memory or disk pressure). Clean up the node or adjust resource requests."};if(n.initContainers){const _=t.initContainerStatuses||[],S=n.initContainers.length,C=_.filter(A=>{var L;return((L=A.state.terminated)==null?void 0:L.exitCode)===0}).length;if(C<S){const A=_.find(E=>{var O;return E.state.waiting||E.state.running||((O=E.state.terminated)==null?void 0:O.exitCode)!==0});let L="Init";return(l=A==null?void 0:A.state.waiting)!=null&&l.reason?L+=`:${A.state.waiting.reason}`:((o=A==null?void 0:A.state.terminated)==null?void 0:o.exitCode)!==0?L+=":Error":L+=`:${C}/${S}`,{status:L,className:"status-init",description:`Init containers not completed (${C}/${S}). Failure reason: ${((c=A==null?void 0:A.state.waiting)==null?void 0:c.reason)||"Check logs"}.`}}}const s=t.containerStatuses||[];for(const _ of s){const S=_.state||{};if(((y=S.waiting)==null?void 0:y.reason)==="CrashLoopBackOff")return{status:"CrashLoopBackOff",className:"status-crashloop",description:`Container crashes and restarts frequently (restart count: ${_.restartCount}). Check app errors or dependencies.`};if(((k=S.waiting)==null?void 0:k.reason)==="ImagePullBackOff"||((h=S.waiting)==null?void 0:h.reason)==="ErrImagePull")return{status:S.waiting.reason,className:"status-image-error",description:`Image pull failed: ${S.waiting.message||"Check image name/permissions/network"}`};if(((g=S.terminated)==null?void 0:g.reason)==="OOMKilled")return{status:"OOMKilled",className:"status-oom",description:"Container terminated due to memory limit. Adjust memory limits or optimize app."};if((v=S.terminated)!=null&&v.exitCode&&((u=S.terminated)==null?void 0:u.exitCode)!==0&&!S.running)return{status:"Error",className:"status-error",description:`Container exited abnormally (exit code: ${(r=S.terminated)==null?void 0:r.exitCode}). Error message: ${(m=S.terminated)==null?void 0:m.message}`}}switch(t.phase){case"Pending":const _=(p=t.conditions)==null?void 0:p.find(C=>C.reason==="Unschedulable"&&C.status==="False");return _?{status:"Unschedulable",className:"status-unschedulable",description:`Cannot schedule to node: ${_.message}. Check resources, affinity rules, or taint config.`}:{status:"Pending",className:"status-pending",description:"Waiting for scheduling or container creation. Check resource availability, image download speed, or init container completion."};case"Running":const S=s.every(C=>C.ready);return{status:S?"Running":"Running(Not Ready)",className:S?"status-running":"status-running-warning",description:S?"Container is running and passed readiness probe.":"Container is running but not ready, possibly starting or misconfigured."};case"Succeeded":return{status:"Succeeded",className:"status-succeeded",description:"Container completed task and exited. Common in Job/CronJob."};case"Failed":return{status:"Failed",className:"status-failed",description:"At least one container exited abnormally (non-zero exit code). Check container logs."};default:return{status:"Unknown",className:"status-unknown",description:"Pod status unknown, possibly node disconnected or control plane communication failure."}}}getCreatable(){return null}getTableRow(){let e=this.raw;const t=e.status.containerStatuses||[],a=t.length,n=t.filter(y=>y.ready).length,s=t.reduce((y,k)=>y+k.restartCount,0),l=this.getStatus();let o=e.metadata.name.split("-");o.pop();let c={id:e.metadata.name||"Unknown",status:l,name:e.metadata.name||"Unknown",workload:o.join("-"),namespace:e.metadata.namespace||"Unknown",image:t.map(y=>y.image).join(", ")||"Unknown",ready:`${n}/${a}`,restarts:s,ip:e.status.podIP||"Unknown",node:e.spec.nodeName||"Unknown",age:He.formatAge(e.metadata.creationTimestamp),containers:t};return c.status.status!=="Running"&&c.status.description&&(c.rowOption={className:"row-desc"},c.status.showDescription=!0),c}getContainerTableData(){let e=this.raw;return e.status.containerStatuses.map(t=>(t.namespace=e.metadata.namespace,t.podName=e.metadata.name,this.resources.Container.getHandler(t).getTableRow()))}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"200px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Image",key:"image",align:"left"},{name:"Ready",key:"ready",align:"center",width:"80px",sortable:!0},{name:"Restarts",key:"restarts",align:"center",width:"80px"},{name:"IP",key:"ip",align:"center",width:"100px"},{name:"Node",key:"node",align:"center",width:"150px"},{name:"Age",key:"age",align:"center",width:"100px",sortable:!0}]}getActions(){return["Detail","Yaml","ExecuteShell","ViewLog","line","EditYaml","CloneYaml","line","Download","Delete","Proxy"]}getIntro(e){let t=e.metadata.name.split("-");return t.pop(),[{key:"Pod Ip",value:e.status.podIP||"Unknown"},{key:"Workload",value:t.join("-")},{key:"Node",value:e.spec.nodeName||"Unknown"}]}getDetailTabs(e){return[{id:"containers",title:"Containers",component:es,params:{params:{podName:e.metadata.name}}},{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastTransitionTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.status.conditions||[]}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}}const ls=(d,e=ma)=>{var t=vt(),a=Ve(t);ke(a,17,()=>e().cells,_e,(n,s)=>{var l=us(),o=b(l);{var c=k=>{var h=ds(),g=Ve(h),v=b(g,!0);f(g);var u=P(g,2);{var r=m=>{var p=os(),_=b(p,!0);f(p),ne(()=>he(_,i(s).value.description)),V(m,p)};ye(u,m=>{i(s).value.showDescription&&m(r)})}ne(()=>{je(g,1,Ke(["status-text",i(s).value.className]),"svelte-avvglh"),he(v,i(s).value.status)}),V(k,h)},y=(k,h)=>{{var g=u=>{var r=cs(),m=b(r,!0);f(r),ne(()=>{Wa(r,"href",`/dashboard/${Fe.path??""}/resource/Pod/${i(s).value??""}`),he(m,i(s).value)}),V(u,r)},v=u=>{var r=pa();ne(()=>he(r,i(s).value)),V(u,r)};ye(k,u=>{i(s).key==="name"?u(g):u(v,!1)},h)}};ye(o,k=>{i(s).key==="status"?k(c):k(y,!1)})}f(l),ne(()=>je(l,1,Ke(["table-cell",i(s).align,i(s).key]),"svelte-avvglh")),V(n,l)}),V(d,t)};var os=j('<div class="row-desc-text"> </div>'),ds=j("<div> </div> <!>",1),cs=j("<a> </a>"),us=j("<div><!></div>");function It(d,e){ce(e,!0);let t=pe(e,"params",19,()=>({})),a=ae(X([])),n=[{name:"State",key:"status",align:"left",width:"150px"},{name:"Name",key:"name",align:"left"},{name:"Node",key:"namespace",align:"left",width:"200px"},{name:"Image",key:"image",align:"left"}],s=[],l=ae(X([]));oe(()=>{Me.ready("Pod",o=>{q(l,o.getHandler().getTableMenus(),!0);let c=o.getAllList();t().nodeName?q(a,c.filter(y=>y.raw.spec.nodeName===t().nodeName).map(y=>y.getTableRow()),!0):q(a,c.filter(y=>y.isMatchLabels(t().matchLabels)).map(y=>y.getTableRow()),!0)})}),Oe(d,{header:n,get data(){return i(a)},buttons:s,get menus(){return i(l)},checkbox:!1,row:ls}),ue()}function ms(d,e){ce(e,!0);let t=X([]),a=[{name:"Status",key:"status",align:"left"},{name:"Type",key:"kind",align:"left"},{name:"Name",key:"name",align:"left"},{name:"Namespace",key:"namespace",align:"left"},{name:"Age",key:"age",align:"left"}],n=[],s=[];qa(()=>{st.findEvents.post({name:e.name,namespace:e.namespace,kind:e.kind}).then(({code:l,data:o})=>{l===0&&(o=o.events)})}),Oe(d,{header:a,buttons:n,menus:s,get data(){return t}}),ue()}var vs=j('<div class="circle svelte-kaxyrd"><div class="proportional-circle"></div></div>'),ps=j('<div><!> <div class="numbers"><div class="size"> </div> <div class="dot"> </div></div></div>'),fs=j('<div class="workload-bottom"><div class="workload-bottom-title">Pods by State</div> <div class="pods"></div></div>');function hs(d,e){ce(e,!0);let t=et(()=>e.deployment.getPodsStatusStatistics());var a=vt(),n=Ve(a);{var s=l=>{var o=fs(),c=P(b(o),2);ke(c,21,()=>i(t),_e,(y,k)=>{var h=ps(),g=b(h);{var v=S=>{var C=vs(),A=b(C);f(C),ne(()=>Nt(A,`--percent: ${i(k).percent??""}; --thickness: 2px`)),V(S,C)};ye(g,S=>{i(k).percent!==100&&S(v)})}var u=P(g,2),r=b(u),m=b(r,!0);f(r);var p=P(r,2),_=b(p,!0);f(p),f(u),f(h),ne(()=>{je(h,1,Ke(["pod",i(k).className]),"svelte-kaxyrd"),he(m,i(k).size),he(_,i(k).state)}),V(y,h)}),f(c),f(o),V(l,o)};ye(n,l=>{i(t)&&i(t).length>0&&l(s)})}V(d,a),ue()}var gs=(d,e,t)=>e(i(t)),bs=j('<div class="block env-grid svelte-votd8h"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-votd8h"><button class="btn btn-blank">Remove</button></div></div></div>'),ys=(d,e)=>e(),ks=j('<div class="section"><div class="title"> </div> <!> <div class="bottom"><button class="btn btn-primary"> </button></div></div>');function rt(d,e){ce(e,!0);let t=pe(e,"value",19,()=>({})),a=ae(X([]));function n(){i(a).push({id:Xe.getRandomId(),name:"",value:""})}function s(u){let r=i(a).findIndex(m=>m.id===u.id);r!==-1&&(i(a).splice(r,1),l())}oe(()=>{q(a,Reflect.ownKeys(t()).map(u=>({id:u,name:u,value:t()[u]})),!0)});function l(){let u={};i(a).forEach(r=>{r.name&&(u[r.name]=r.value)}),e.callback&&e.callback(u)}var o=ks(),c=b(o),y=b(c,!0);f(c);var k=P(c,2);ke(k,17,()=>i(a),_e,(u,r,m)=>{var p=bs(),_=b(p),S=b(_);Q(S,{label:"Key",onblur:()=>l(),get disabled(){return e.disabled},get value(){return i(r).name},set value(D){i(r).name=D}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"Value",onblur:l,get disabled(){return e.disabled},get value(){return i(r).value},set value(D){i(r).value=D}}),f(C);var L=P(C,2),E=b(L),O=b(E);O.__click=[gs,s,r],f(E),f(L),f(p),ne(()=>O.disabled=e.disabled),V(u,p)});var h=P(k,2),g=b(h);g.__click=[ys,n];var v=b(g);f(g),f(h),f(o),ne(()=>{he(y,e.label),g.disabled=e.disabled,he(v,`Add ${e.label??""}`)}),V(d,o),ue()}xe(["click"]);var _s=j('<div class="section"><div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div></div>');function Te(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({})),a=ae(X([])),n=$t("scene"),s=et(()=>e.disabled?!0:n==="edit"||n==="clone"),l=et(()=>e.disabled?!0:n==="clone"?!1:n==="edit");oe(()=>{Me.ready("Namespace",p=>{q(a,p.getAllRawList().map(_=>({name:_.metadata.name,value:_.metadata.name})),!0)})});var o=_s(),c=b(o),y=b(c),k=b(y);ge(k,{label:"Namespace",get options(){return i(a)},get disabled(){return i(s)},get value(){return t().namespace},set value(p){t(t().namespace=p,!0)}}),f(y);var h=P(y,2),g=b(h);Q(g,{label:"Name",get disabled(){return i(l)},get value(){return t().name},set value(p){t(t().name=p,!0)}}),f(h),f(c);var v=P(c,2),u=b(v);rt(u,{label:"Labels",get value(){return t().labels},callback:p=>t(t().labels=p,!0),get disabled(){return e.disabled}}),f(v);var r=P(v,2),m=b(r);rt(m,{label:"Annotations",get value(){return t().annotations},callback:p=>t(t().annotations=p,!0),get disabled(){return e.disabled}}),f(r),f(o),V(d,o),ue()}var ws=j('<div class="section"><div class="block colum-2"><!></div></div>');function be(d,e){ce(e,!0);let t=pe(e,"value",15,"");var a=ws(),n=b(a),s=b(n);Q(s,na(()=>e.option,{get disabled(){return e.disabled},get value(){return t()},set value(l){t(l)}})),f(n),f(a),V(d,a),ue()}var xs=j('<div class="section"><div class="block"><div class="field"><div class="label-input-group"><!> <!></div></div> <div class="field"><div class="label-input-group"><!> <!></div></div></div></div>'),Ss=j('<div class="section"><div class="block colum-1"><!></div></div> <!>',1);function Rs(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X({type:null,rollingUpdate:{maxSurge:25,maxSurgeType:"%",maxUnavailable:25,maxUnavailableType:"%"}})),n=[{name:"Rolling Update: Create new pods, until max surge is reached, before deleting old pods. Don't stop more pods than max unavailable.",value:"RollingUpdate"},{name:"Recreate: Kill ALL pods, then start new pods.",value:"Recreate"}];oe(()=>{var u,r;if(t()){let m=l(((u=t().rollingUpdate)==null?void 0:u.maxSurge)||25),p=l(((r=t().rollingUpdate)==null?void 0:r.maxUnavailable)||25);q(a,{type:t().type,rollingUpdate:{maxSurge:m.value,maxSurgeType:m.type,maxUnavailable:p.value,maxUnavailableType:p.type}},!0)}});function s(){let u={type:i(a).type,rollingUpdate:{maxSurge:o(i(a).rollingUpdate.maxSurge,i(a).rollingUpdate.maxSurgeType),maxUnavailable:o(i(a).rollingUpdate.maxUnavailable,i(a).rollingUpdate.maxUnavailableType)}};t(u)}function l(u){return u?u.endsWith("%")?{value:parseInt(u),type:"%"}:{value:u,type:"pods"}:{value:u,type:"%"}}function o(u,r){return r==="pods"?u:`${u}${r}`}var c=Ss(),y=Ve(c),k=b(y),h=b(k);mt(h,{options:n,get disabled(){return e.disabled},callback:s,get value(){return i(a).type},set value(u){i(a).type=u}}),f(k),f(y);var g=P(y,2);{var v=u=>{var r=xs(),m=b(r),p=b(m),_=b(p),S=b(_);Q(S,{label:"Max Surge",type:"number",onblur:s,get disabled(){return e.disabled},get value(){return i(a).rollingUpdate.maxSurge},set value(D){i(a).rollingUpdate.maxSurge=D}});var C=P(S,2);ge(C,{style:"width: 160px;",label:"Percentage",options:[{name:"Pods",value:"pods"},{name:"%",value:"%"}],onClose:s,get disabled(){return e.disabled},get value(){return i(a).rollingUpdate.maxSurgeType},set value(D){i(a).rollingUpdate.maxSurgeType=D}}),f(_),f(p);var A=P(p,2),L=b(A),E=b(L);Q(E,{label:"Max Unavailable",onblur:s,get disabled(){return e.disabled},get value(){return i(a).rollingUpdate.maxUnavailable},set value(D){i(a).rollingUpdate.maxUnavailable=D}});var O=P(E,2);ge(O,{style:"width: 160px;",label:"Percentage",options:[{name:"Pods",value:"pods"},{name:"%",value:"%"}],onClose:s,get disabled(){return e.disabled},get value(){return i(a).rollingUpdate.maxUnavailableType},set value(D){i(a).rollingUpdate.maxUnavailableType=D}}),f(L),f(A),f(m),f(r),V(u,r)};ye(g,u=>{i(a).type==="RollingUpdate"&&u(v)})}V(d,c),ue()}var Cs=(d,e,t)=>e(i(t)),Ps=j('<div class="block env-grid svelte-1kj80me"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-1kj80me"><button class="btn btn-blank">Remove</button></div></div></div>'),Ds=(d,e)=>e(),As=j('<div class="section"><!> <div class="bottom"><button class="btn btn-primary"> </button></div></div>');function Ot(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X([])),a=ae(X([])),n=[{name:"in list",value:"In"},{name:"not in list",value:"NotIn"},{name:"is exists",value:"Exists"},{name:"is not exists",value:"DoesNotExist"}];function s(){i(a).push({key:"",operator:"In",values:"",id:Math.random()})}function l(v){q(a,i(a).filter(u=>u.id!==v.id),!0),o()}oe(()=>{q(a,[...t().map(v=>({...v,id:Math.random()}))],!0)});function o(){let v=i(a).map(({key:u,values:r,operator:m})=>({key:u,values:r,operator:m}));e.callback&&e.callback(v)}var c=As(),y=b(c);ke(y,17,()=>i(a),_e,(v,u,r)=>{var m=Ps(),p=b(m),_=b(p);Q(_,{label:"Key",onblur:()=>o(),get disabled(){return e.disabled},get value(){return i(u).key},set value(N){i(u).key=N}}),f(p);var S=P(p,2),C=b(S);ge(C,{options:n,label:"Operator",onClose:()=>o(),get disabled(){return e.disabled},get value(){return i(u).operator},set value(N){i(u).operator=N}}),f(S);var A=P(S,2),L=b(A);Q(L,{label:"Value",onblur:()=>o(),get disabled(){return e.disabled},get value(){return i(u).values},set value(N){i(u).values=N}}),f(A);var E=P(A,2),O=b(E),D=b(O);D.__click=[Cs,l,u],f(O),f(E),f(m),ne(()=>D.disabled=e.disabled),V(v,m)});var k=P(y,2),h=b(k);h.__click=[Ds,s];var g=b(h);f(h),f(k),f(c),ne(()=>{h.disabled=e.disabled,he(g,`Add ${e.label||"Rule"}`)}),V(d,c),ue()}xe(["click"]);var Ns=j('<div class="section"><div class="block colum-1"><!></div> <div class="title">Match Expressions</div> <div class="block colum-1"><!></div></div>');function ct(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({}));var a=Ns(),n=b(a),s=b(n);rt(s,{label:"Match Labels",get value(){return t().matchLabels},callback:c=>t(t().matchLabels=c,!0),get disabled(){return e.disabled}}),f(n);var l=P(n,4),o=b(l);Ot(o,{label:"Match Expressions",get value(){return t().matchExpressions},callback:c=>t(t().matchExpressions=c,!0),get disabled(){return e.disabled}}),f(l),f(a),V(d,a),ue()}var Ts=j('<div class="section"><div class="block colum-1"><!></div> <div class="block colum-1"><!></div></div>');function ia(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({})),a=ae(X([]));oe(()=>{Me.ready("Namespace",y=>{q(a,y.getAllRawList().map(k=>({name:k.metadata.name,value:k.metadata.name})),!0)})});var n=Ts(),s=b(n),l=b(s);rt(l,{label:"Labels",get value(){return t().labels},callback:y=>t(t().labels=y,!0),get disabled(){return e.disabled}}),f(s);var o=P(s,2),c=b(o);rt(c,{label:"Annotations",get value(){return t().annotations},callback:y=>t(t().annotations=y,!0),get disabled(){return e.disabled}}),f(o),f(n),V(d,n),ue()}var Es=va('<svg t="1743004722501" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4544" width="200" height="200"><path d="M920.598 419.931H578.873V78.387a56.894 56.894 0 1 0-113.698 0v341.544h-340.73a56.894 56.894 0 1 0 0 113.698h340.82V874.54a56.894 56.894 0 0 0 113.789 0V533.448h341.544a56.804 56.804 0 1 0 0-113.517z" p-id="4545"></path></svg>');function fa(d){var e=Es();V(d,e)}var Is=(d,e)=>e(d),Os=j('<div class="value svelte-rp919b"> </div>'),Ls=(d,e,t)=>e(d,i(t)),Ms=j("<div> </div>"),zs=j('<div><label><div class="tip"> </div> <div></div> <div><!></div></label> <div></div></div>');function Je(d,e){ce(e,!0);let t=pe(e,"label",3,"Select label"),a=pe(e,"value",15),n=pe(e,"options",19,()=>[]),s=pe(e,"disabled",3,!1),l,o,c=ae(!1),y=et(()=>(a()||[]).map(E=>n().find(O=>O.value===E)).filter(E=>!!E));$t("form")&&$t("form").push({getName:()=>e.name,getValue:()=>a(),setValue:E=>a(E),validate:()=>({result:!!a(),message:a()?"":"Please enter a value"})});function k(){const E=l.getBoundingClientRect(),O=window.innerHeight,D=o.offsetHeight,N=O-E.bottom,G=E.top;N>D||N>G?o.style.top=`${E.height}px`:o.style.top=`-${D}px`}function h(E,O){if(a()){let D=a().indexOf(O.value);D===-1?a().push(O.value):a().splice(D,1)}else a([O.value]);q(c,!1),e.callback&&e.callback(a()),e.onClose&&e.onClose(),E.stopPropagation()}function g(E){l.contains(E.target)||q(c,!1)}function v(){i(c)&&k()}function u(E){s()||i(c)||(q(c,!0),e.onOpen&&e.onOpen(),setTimeout(()=>k()))}var r=zs();Ca("click",Sa,g),Ca("resize",Sa,v);var m=b(r),p=b(m),_=b(p,!0);f(p);var S=P(p,2);S.__click=[Is,u],ke(S,21,()=>i(y),_e,(E,O)=>{var D=Os(),N=b(D,!0);f(D),ne(()=>he(N,i(O).name)),V(E,D)}),f(S);var C=P(S,2),A=b(C);hn(A),f(C),f(m);var L=P(m,2);ke(L,21,n,_e,(E,O)=>{var D=Ms();D.__click=[Ls,h,O];var N=b(D,!0);f(D),ne(G=>{je(D,1,G,"svelte-rp919b"),he(N,i(O).name)},[()=>Ke(["item",(a()||[]).indexOf(i(O).value)!==-1&&"active"])]),V(E,D)}),f(L),ta(L,E=>o=E,()=>o),f(r),ta(r,E=>l=E,()=>l),ne(()=>{je(r,1,Ke(["label-input",s()&&"disabled"])),Nt(r,e.style),he(_,t()),je(S,1,Ke(["values",s()&&"disabled"]),"svelte-rp919b"),je(C,1,Ke(["arrow",i(c)&&"open"]),"svelte-rp919b"),je(L,1,Ke(["options",i(c)&&"active"]),"svelte-rp919b")}),V(d,r),ue()}xe(["click"]);var Bs=j('<div class="section"><div class="title">Image</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div></div>');function Us(d,e){ce(e,!0);let t=X({}),a=ae(X([])),n=[{name:"Always",value:"Always"},{name:"IfNotPresent",value:"IfNotPresent"},{name:"Never",value:"Never"}];oe(()=>{t.image=e.image,t.imagePullPolicy=e.imagePullPolicy||"None",t.imagePullSecrets=(e.imagePullSecrets||[]).map(u=>u.name)}),oe(()=>{Me.ready("Secret",u=>{q(a,u.getAllRawList().map(r=>({name:r.metadata.name,value:r.metadata.name})),!0)})});function s(){let u={image:t.image,imagePullPolicy:t.imagePullPolicy,imagePullSecrets:(t.imagePullSecrets||[]).map(r=>({name:r}))};e.callback&&e.callback(u)}var l=Bs(),o=P(b(l),2),c=b(o),y=b(c);Q(y,{label:"Container Image",onblur:s,get disabled(){return e.disabled},get value(){return t.image},set value(u){t.image=u}}),f(c);var k=P(c,2),h=b(k);ge(h,{label:"Image Pull Policy",options:n,onClose:s,get disabled(){return e.disabled},get value(){return t.imagePullPolicy},set value(u){t.imagePullPolicy=u}}),f(k);var g=P(k,2),v=b(g);Je(v,{label:"Pull Secrets",get options(){return i(a)},onClose:s,get disabled(){return e.disabled},get value(){return t.imagePullSecrets},set value(u){t.imagePullSecrets=u}}),f(g),f(o),f(l),V(d,l),ue()}var Fs=(d,e,t)=>e(i(t)),Vs=j('<div class="block port-grid svelte-1bq9jn6"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-1bq9jn6"><button class="btn btn-blank">Remove</button></div></div></div>'),js=(d,e)=>e(),Ks=j('<div class="section"><div class="title">Ports</div> <!> <div class="bottom"><button class="btn btn-primary">Add Port</button></div></div>');function Hs(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X([])),a=ae(X([])),n=[{name:"TCP",value:"TCP"},{name:"UDP",value:"UDP"}];function s(){i(a).push({id:Math.random(),name:"",containerPort:"",protocol:"TCP"})}function l(g){q(a,i(a).filter(v=>v.id!==g.id),!0),o()}oe(()=>{q(a,[...t().map(g=>({...g,id:Math.random()}))],!0)});function o(){let g=i(a).map(({name:v,containerPort:u,protocol:r})=>({name:v,containerPort:u,protocol:r}));e.callback&&e.callback(g)}var c=Ks(),y=P(b(c),2);ke(y,17,()=>i(a),_e,(g,v,u)=>{var r=Vs(),m=b(r),p=b(m);Q(p,{label:"Name",onblur:()=>o(),get disabled(){return e.disabled},get value(){return i(v).name},set value(D){i(v).name=D}}),f(m);var _=P(m,2),S=b(_);ge(S,{label:"Protocol",options:n,get disabled(){return e.disabled},get value(){return i(v).protocol},set value(D){i(v).protocol=D}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"Container Port",onblur:()=>o(),onClose:()=>o(),get disabled(){return e.disabled},get value(){return i(v).containerPort},set value(D){i(v).containerPort=D}}),f(C);var L=P(C,2),E=b(L),O=b(E);O.__click=[Fs,l,v],f(E),f(L),f(r),ne(()=>O.disabled=e.disabled),V(g,r)});var k=P(y,2),h=b(k);h.__click=[js,s],f(k),f(c),ne(()=>h.disabled=e.disabled),V(d,c),ue()}xe(["click"]);var Ws=j('<div class="section"><div class="title">Command</div> <div class="block"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div></div>');function qs(d,e){ce(e,!0);let t=X({}),a=[{name:"No",value:"no"},{name:"Once",value:"once"},{name:"Yes",value:"yes"}];oe(()=>{t.command=e.command,t.args=e.args,t.workingDir=e.workingDir,t.stdin=e.stdin});function n(){e.callback&&e.callback({command:t.command,args:t.args,workingDir:t.workingDir,stdin:t.stdin})}var s=Ws(),l=P(b(s),2),o=b(l),c=b(o);Q(c,{label:"Command",placeholder:"e.g. /bin/sh",onblur:n,get disabled(){return e.disabled},get value(){return t.command},set value(r){t.command=r}}),f(o);var y=P(o,2),k=b(y);Q(k,{label:"Args",onblur:n,get disabled(){return e.disabled},get value(){return t.args},set value(r){t.args=r}}),f(y);var h=P(y,2),g=b(h);Q(g,{label:"WorkingDir",onblur:n,get disabled(){return e.disabled},get value(){return t.workingDir},set value(r){t.workingDir=r}}),f(h);var v=P(h,2),u=b(v);ge(u,{label:"Stdin",options:a,onClose:n,get disabled(){return e.disabled},get value(){return t.stdin},set value(r){t.stdin=r}}),f(v),f(l),f(s),V(d,s),ue()}var Gs=j('<div class="block env-grid2 svelte-1r1sm7b"><div class="field"><!></div> <div class="field"><!></div></div>'),Zs=j('<div class="block env-grid2 svelte-1r1sm7b"><div class="field"><!></div> <div class="field"><!></div></div>'),Ys=j('<div class="field"><!></div>'),Js=j('<div class="block env-grid2 svelte-1r1sm7b"><div class="field"><!></div> <div class="field"><!></div></div>'),Xs=j('<div class="field"><!></div>'),Qs=(d,e,t)=>e(i(t)),$s=j('<div class="block env-grid svelte-1r1sm7b"><div class="field"><!></div> <div class="field"><!></div> <!> <div class="field"><div class="remove svelte-1r1sm7b"><button class="btn btn-blank">Remove</button></div></div></div>'),ei=(d,e)=>e(),ti=j('<div class="section"><div class="title">Environment Variables</div> <!> <div class="bottom"><button class="btn btn-primary">Add Variables</button></div></div>');function ai(d,e){ce(e,!0);let t=ae(X([])),a=ae(X([])),n=ae(X([])),s=[{name:"KeyValue",value:"keyValue"},{name:"ConfigMap",value:"configMapKeyRef"},{name:"SecretKey",value:"secretKeyRef"},{name:"Field",value:"fieldRef"},{name:"ResourceField",value:"resourceFieldRef"}];function l(){i(t).push({name:"",value:{left:"",right:""},type:"keyValue",id:Xe.getRandomId()})}function o(r){q(t,i(t).filter(m=>m.id!==r.id),!0),c()}function c(){let r=i(t).map(({name:m,value:p,type:_})=>{let S={name:m};return _==="keyValue"?S.value=p.left:_==="configMapKeyRef"||_==="secretKeyRef"?S.valueFrom={[_]:{name:p.left,key:p.right}}:_==="fieldRef"?S.valueFrom={fieldRef:{fieldPath:p.left}}:_==="resourceFieldRef"&&(S.valueFrom={resourceFieldRef:{containerName:p.left,resource:p.right}}),S});e.callback&&e.callback(r)}function y(r){let m=(i(a)||[]).find(p=>p.name===r);return m?Reflect.ownKeys(m.data||{}).map(p=>({name:p,value:p})):[]}function k(r){let m=(i(n)||[]).find(p=>p.name===r);return m?Reflect.ownKeys(m.data||{}).map(p=>({name:p,value:p})):[]}oe(()=>{q(t,(e.value||[]).map(r=>{let m={name:r.name,value:{left:r.value,right:""},type:"keyValue",id:Xe.getRandomId()};if(r.valueFrom){if(r.valueFrom.configMapKeyRef){m.type="configMapKeyRef";let p=r.valueFrom.configMapKeyRef;m.value={left:p.name,right:p.key}}else if(r.valueFrom.secretKeyRef){m.type="secretKeyRef";let p=r.valueFrom.secretKeyRef;m.value={left:p.name,right:p.key}}else if(r.valueFrom.fieldRef){m.type="fieldRef";let p=r.valueFrom.fieldRef;m.value={left:p.fieldPath}}else if(r.valueFrom.resourceFieldRef){m.type="resourceFieldRef";let p=r.valueFrom.resourceFieldRef;m.value={left:p.containerName,right:p.resource}}}return m}),!0)}),oe(()=>{Me.ready("ConfigMap",r=>{q(a,r.getAllRawList().map(m=>({name:m.metadata.name,value:m.metadata.name,data:m.data})),!0)})}),oe(()=>{Me.ready("Secret",r=>{q(n,r.getAllRawList().map(m=>({name:m.metadata.name,value:m.metadata.name,data:m.data})),!0)})});var h=ti(),g=P(b(h),2);ke(g,17,()=>i(t),_e,(r,m,p)=>{var _=$s(),S=b(_),C=b(S);ge(C,{label:"Type",options:s,get disabled(){return e.disabled},get value(){return i(m).type},set value(M){i(m).type=M}}),f(S);var A=P(S,2),L=b(A);Q(L,{label:"Variable Name",get disabled(){return e.disabled},get value(){return i(m).name},set value(M){i(m).name=M}}),f(A);var E=P(A,2);{var O=M=>{var x=Gs(),W=b(x),se=b(W);ge(se,{label:"Name",get options(){return i(a)},onClose:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.left},set value(ie){i(m).value.left=ie}}),f(W);var z=P(W,2),te=b(z);const K=et(()=>y(i(m).value.left));ge(te,{label:"Key",get options(){return i(K)},onClose:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.right},set value(ie){i(m).value.right=ie}}),f(z),f(x),V(M,x)},D=(M,x)=>{{var W=z=>{var te=Zs(),K=b(te),ie=b(K);ge(ie,{label:"Name",get options(){return i(n)},onClose:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.left},set value(de){i(m).value.left=de}}),f(K);var B=P(K,2),U=b(B);const me=et(()=>k(i(m).value.left));ge(U,{label:"Key",get options(){return i(me)},onClose:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.right},set value(de){i(m).value.right=de}}),f(B),f(te),V(z,te)},se=(z,te)=>{{var K=B=>{var U=Ys(),me=b(U);Q(me,{label:"Key",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.left},set value(de){i(m).value.left=de}}),f(U),V(B,U)},ie=(B,U)=>{{var me=ee=>{var Se=Js(),Ee=b(Se),we=b(Ee);Q(we,{label:"Container Name",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.left},set value(Ie){i(m).value.left=Ie}}),f(Ee);var Ce=P(Ee,2),Ue=b(Ce);Q(Ue,{label:"Resource",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.right},set value(Ie){i(m).value.right=Ie}}),f(Ce),f(Se),V(ee,Se)},de=ee=>{var Se=Xs(),Ee=b(Se);Q(Ee,{label:"Variable Value",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(m).value.left},set value(we){i(m).value.left=we}}),f(Se),V(ee,Se)};ye(B,ee=>{i(m).type==="resourceFieldRef"?ee(me):ee(de,!1)},U)}};ye(z,B=>{i(m).type==="fieldRef"?B(K):B(ie,!1)},te)}};ye(M,z=>{i(m).type==="secretKeyRef"?z(W):z(se,!1)},x)}};ye(E,M=>{i(m).type==="configMapKeyRef"?M(O):M(D,!1)})}var N=P(E,2),G=b(N),R=b(G);R.__click=[Qs,o,m],f(G),f(N),f(_),ne(()=>R.disabled=e.disabled),V(r,_)});var v=P(g,2),u=b(v);u.__click=[ei,l],f(v),f(h),ne(()=>u.disabled=e.disabled),V(d,h),ue()}xe(["click"]);var ni=j('<div class="section"><div class="title">Resources.requests</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="title">Resources.limits</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div></div>');function si(d,e){ce(e,!0);let t=ae(X({requests:{cpu:0,memory:0},limits:{cpu:0,memory:0}}));oe(()=>{var r,m,p,_;e.value?q(t,{requests:{cpu:parseInt(((r=e.value.requests)==null?void 0:r.cpu)||0),memory:parseInt(((m=e.value.requests)==null?void 0:m.memory)||0)},limits:{cpu:parseInt(((p=e.value.limits)==null?void 0:p.cpu)||0),memory:parseInt(((_=e.value.limits)==null?void 0:_.memory)||0)}},!0):q(t,{requests:{cpu:0,memory:0},limits:{cpu:0,memory:0}},!0)});function a(){let r={requests:{cpu:i(t).requests.cpu+"m",memory:i(t).requests.memory+"Mi"},limits:{cpu:i(t).limits.cpu+"m",memory:i(t).limits.memory+"Mi"}};e.callback&&e.callback(r)}var n=ni(),s=P(b(n),2),l=b(s),o=b(l);Q(o,{label:"CPU Reservation",type:"number",unit:"mCPUs",onblur:a,get disabled(){return e.disabled},get value(){return i(t).requests.cpu},set value(r){i(t).requests.cpu=r}}),f(l);var c=P(l,2),y=b(c);Q(y,{label:"Memory Reservation",type:"number",unit:"MiB",onblur:a,get disabled(){return e.disabled},get value(){return i(t).requests.memory},set value(r){i(t).requests.memory=r}}),f(c),f(s);var k=P(s,4),h=b(k),g=b(h);Q(g,{label:"CPU Limit",type:"number",unit:"mCPUs",onblur:a,get disabled(){return e.disabled},get value(){return i(t).limits.cpu},set value(r){i(t).limits.cpu=r}}),f(h);var v=P(h,2),u=b(v);Q(u,{label:"Memory Limit",type:"number",unit:"MiB",onblur:a,get disabled(){return e.disabled},get value(){return i(t).limits.memory},set value(r){i(t).limits.memory=r}}),f(v),f(k),f(n),V(d,n),ue()}var ii=(d,e,t)=>e(i(t)),ri=j('<div class="block header-grid svelte-1r4hl4p"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-1r4hl4p"><button class="btn btn-blank">Remove</button></div></div></div>'),li=(d,e)=>e(),oi=j('<div class="section"><div class="sub-title"> </div> <!> <div class="bottom"><button class="btn btn-primary"> </button></div></div>');function ha(d,e){ce(e,!0);let t=pe(e,"label",3,""),a=ae(X({}));function n(){i(a).push({id:Math.random(),name:"",value:""}),l()}function s(u){q(a,i(a).filter(r=>r.id!==u.id),!0),l()}oe(()=>{e.value?q(a,e.value.map(u=>({id:Math.random(),name:u.name,value:u.value})),!0):q(a,[],!0)});function l(){let u=i(a).map(r=>({name:r.name,value:r.value}));e.callback&&e.callback(u)}var o=oi(),c=b(o),y=b(c,!0);f(c);var k=P(c,2);ke(k,17,()=>i(a),_e,(u,r,m)=>{var p=ri(),_=b(p),S=b(_);Q(S,{label:"Name",onblur:()=>l(),get disabled(){return e.disabled},get value(){return i(r).name},set value(D){i(r).name=D}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"Value",onblur:()=>l(),get disabled(){return e.disabled},get value(){return i(r).value},set value(D){i(r).value=D}}),f(C);var L=P(C,2),E=b(L),O=b(E);O.__click=[ii,s,r],f(E),f(L),f(p),ne(()=>O.disabled=e.disabled),V(u,p)});var h=P(k,2),g=b(h);g.__click=[li,n];var v=b(g);f(g),f(h),f(o),ne(()=>{he(y,t()),g.disabled=e.disabled,he(v,`Add ${t()??""}`)}),V(d,o),ue()}xe(["click"]);var di=j('<div class="block colum-2"><!> <!></div>'),ci=j('<div class="block colum-1"><!></div>'),ui=j('<div class="block colum-1"><!></div>'),mi=j('<div class="block colum-1"><!></div>'),vi=j('<div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div>',1),pi=j('<div class="section"><div class="title"> </div> <div class="block"><div class="field"><div class="block colum-1"><!></div> <!> <!> <!> <!></div> <div class="others"><!> <!></div></div></div>');function ca(d,e){ce(e,!0);let t=ae(X({type:"none"})),a=[{name:"None",value:"none"},{name:"HTTP request returns a successful status (200-399)",value:"httpGet"},{name:"TCP connection opens successfully",value:"tcpSocket"},{name:"Command run inside the container exits with status 0",value:"command"}],n=[{name:"HTTPS",value:"HTTPS"},{name:"HTTP",value:"HTTP"}];oe(()=>{let N={periodSeconds:null,initialDelaySeconds:null,timeoutSeconds:null,successThreshold:null,failureThreshold:null};e.value?(N.initialDelaySeconds=e.value.initialDelaySeconds,N.periodSeconds=e.value.periodSeconds,N.timeoutSeconds=e.value.timeoutSeconds,N.successThreshold=e.value.successThreshold,N.failureThreshold=e.value.failureThreshold,e.value.httpGet?(N.type="httpGet",N.path=e.value.httpGet.path,N.port=e.value.httpGet.port,N.schema=e.value.httpGet.scheme||"HTTP",N.headers=e.value.httpGet.httpHeaders,N.command=null):e.value.tcpSocket?(N.type="tcpSocket",N.port=e.value.tcpSocket.port,N.path=null,N.schema=null,N.headers=null,N.command=null):e.value.exec?(N.type="command",N.command=e.value.exec.command,N.path=null,N.port=null,N.schema=null,N.headers=null):(N.type="none",N.path=null,N.port=null,N.schema=null,N.headers=null,N.command=null)):(N.type="none",N.path=null,N.port=null,N.schema=null,N.headers=null,N.command=null),q(t,N,!0)});function s(){let N=null;i(t).type==="httpGet"?N={httpGet:{path:i(t).path,port:i(t).port,scheme:i(t).schema,httpHeaders:i(t).headers},periodSeconds:i(t).periodSeconds,initialDelaySeconds:i(t).initialDelaySeconds,timeoutSeconds:i(t).timeoutSeconds,successThreshold:i(t).successThreshold,failureThreshold:i(t).failureThreshold}:i(t).type==="tcpSocket"?N={tcpSocket:{port:i(t).port},periodSeconds:i(t).periodSeconds,initialDelaySeconds:i(t).initialDelaySeconds,timeoutSeconds:i(t).timeoutSeconds,successThreshold:i(t).successThreshold,failureThreshold:i(t).failureThreshold}:i(t).type==="command"&&(N={exec:{command:i(t).command},periodSeconds:i(t).periodSeconds,initialDelaySeconds:i(t).initialDelaySeconds,timeoutSeconds:i(t).timeoutSeconds,successThreshold:i(t).successThreshold,failureThreshold:i(t).failureThreshold}),e.callback&&e.callback(N)}var l=pi(),o=b(l),c=b(o,!0);f(o);var y=P(o,2),k=b(y),h=b(k),g=b(h);ge(g,{label:"Type",options:a,get disabled(){return e.disabled},get value(){return i(t).type},set value(N){i(t).type=N}}),f(h);var v=P(h,2);{var u=N=>{var G=di(),R=b(G);ge(R,{label:"Schema",options:n,get disabled(){return e.disabled},get value(){return i(t).schema},set value(x){i(t).schema=x}});var M=P(R,2);Q(M,{type:"number",placeholder:"Port",label:"Port",get disabled(){return e.disabled},get value(){return i(t).port},set value(x){i(t).port=x}}),f(G),V(N,G)};ye(v,N=>{["httpGet"].includes(i(t).type)&&N(u)})}var r=P(v,2);{var m=N=>{var G=ci(),R=b(G);Q(R,{type:"number",placeholder:"Port",label:"Port",get disabled(){return e.disabled},get value(){return i(t).port},set value(M){i(t).port=M}}),f(G),V(N,G)};ye(r,N=>{["tcpSocket"].includes(i(t).type)&&N(m)})}var p=P(r,2);{var _=N=>{var G=ui(),R=b(G);Q(R,{type:"text",placeholder:"Command to run",label:"Command",get disabled(){return e.disabled},get value(){return i(t).command},set value(M){i(t).command=M}}),f(G),V(N,G)};ye(p,N=>{["command"].includes(i(t).type)&&N(_)})}var S=P(p,2);{var C=N=>{var G=mi(),R=b(G);Q(R,{type:"text",placeholder:"Path",label:"Path",get disabled(){return e.disabled},get value(){return i(t).path},set value(M){i(t).path=M}}),f(G),V(N,G)};ye(S,N=>{["httpGet"].includes(i(t).type)&&N(C)})}f(k);var A=P(k,2),L=b(A);{var E=N=>{var G=vi(),R=Ve(G),M=b(R),x=b(M);Q(x,{placeholder:"InitialDelaySeconds",label:"InitialDelaySeconds",get value(){return i(t).initialDelaySeconds},type:"number",unit:"Sec",get disabled(){return e.disabled}}),f(M);var W=P(M,2),se=b(W);Q(se,{placeholder:"PeriodSeconds",label:"PeriodSeconds",get value(){return i(t).periodSeconds},type:"number",unit:"Sec",get disabled(){return e.disabled}}),f(W);var z=P(W,2),te=b(z);Q(te,{placeholder:"TimeoutSeconds",label:"TimeoutSeconds",get value(){return i(t).timeoutSeconds},type:"number",unit:"Sec",get disabled(){return e.disabled}}),f(z),f(R);var K=P(R,2),ie=b(K),B=b(ie);Q(B,{type:"number",placeholder:"SuccessThreshold",label:"SuccessThreshold",get value(){return i(t).successThreshold},get disabled(){return e.disabled}}),f(ie);var U=P(ie,2),me=b(U);Q(me,{type:"number",placeholder:"FailureThreshold",label:"FailureThreshold",get value(){return i(t).failureThreshold},get disabled(){return e.disabled}}),f(U),f(K),V(N,G)};ye(L,N=>{i(t).type!=="none"&&N(E)})}var O=P(L,2);{var D=N=>{ha(N,{label:"Request Headers",get value(){return i(t).headers},callback:G=>(i(t).headers=G)&&s(),get disabled(){return e.disabled}})};ye(O,N=>{["httpGet"].includes(i(t).type)&&N(D)})}f(A),f(y),f(l),ne(()=>he(c,e.label)),V(d,l),ue()}var fi=j('<div class="section"><div class="sub-title">HttpGet</div> <div class="block colum-4"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div> <!></div>');function hi(d,e){ce(e,!0);let t=ae(X({})),a=[{value:"HTTP",name:"HTTP"},{value:"HTTPS",name:"HTTPS"}];oe(()=>{e.value?q(t,{host:e.value.host,port:e.value.port,path:e.value.path,schema:e.value.schema,headers:e.value.headers||[]},!0):q(t,{host:null,port:null,path:null,schema:null,headers:[]},!0)});function n(){let m={host:i(t).host,port:i(t).port,path:i(t).path,schema:i(t).schema,headers:i(t).headers};e.callback&&e.callback(m)}var s=fi(),l=P(b(s),2),o=b(l),c=b(o);Q(c,{label:"Host IP",onblur:()=>n(),get disabled(){return e.disabled},get value(){return i(t).host},set value(m){i(t).host=m}}),f(o);var y=P(o,2),k=b(y);Q(k,{label:"Port",type:"number",onblur:()=>n(),get disabled(){return e.disabled},get value(){return i(t).port},set value(m){i(t).port=m}}),f(y);var h=P(y,2),g=b(h);Q(g,{label:"Path",onblur:()=>n(),get disabled(){return e.disabled},get value(){return i(t).path},set value(m){i(t).path=m}}),f(h);var v=P(h,2),u=b(v);ge(u,{label:"Schema",options:a,onClose:()=>n(),get disabled(){return e.disabled},get value(){return i(t).schema},set value(m){i(t).schema=m}}),f(v),f(l);var r=P(l,2);ha(r,{get value(){return i(t).headers},label:"HTTP Headers",callback:m=>i(t).headers=m,get disabled(){return e.disabled}}),f(s),V(d,s),ue()}var gi=j('<div class="block colum-1"><!></div>'),bi=j('<div class="section"><div class="sub-title"> </div> <div class="block colum-1"><!></div> <!></div>');function Ia(d,e){ce(e,!0);let t=pe(e,"label",3,"PostStart"),a=ae(X({})),n=[{value:"none",name:"None"},{value:"cmd",name:"Add command to execute"},{value:"http",name:"Create HTTP request"}];oe(()=>{let r={};r.path=null,r.port=null,r.schema=null,r.headers=null,r.command=null,r.host=null,e.value?e.value.httpGet?(r.type="http",r.host=e.value.httpGet.host,r.path=e.value.httpGet.path,r.port=e.value.httpGet.port,r.schema=e.value.httpGet.scheme,r.headers=e.value.httpGet.httpHeaders||[]):(r.type="cmd",r.command=e.value.exec.command):r.type="none",q(a,r,!0)});function s(){let r=null;switch(i(a).type){case"none":break;case"cmd":r={exec:{command:i(a).command}};break;case"http":r={httpGet:{host:i(a).host,path:i(a).path,port:i(a).port,scheme:i(a).schema,httpHeaders:i(a).headers}};break}e.callback&&e.callback(r)}function l(r){i(a).path=r.path,i(a).port=r.port,i(a).schema=r.schema,i(a).headers=r.headers,i(a).host=r.host,s()}var o=bi(),c=b(o),y=b(c,!0);f(c);var k=P(c,2),h=b(k);mt(h,{options:n,get disabled(){return e.disabled},get value(){return i(a).type},set value(r){i(a).type=r}}),f(k);var g=P(k,2);{var v=r=>{var m=gi(),p=b(m);Q(p,{label:"Command",placeholder:"echo 'Hello world'",get disabled(){return e.disabled},get value(){return i(a).command},set value(_){i(a).command=_}}),f(m),V(r,m)},u=(r,m)=>{{var p=_=>{hi(_,{callback:S=>l(S),get disabled(){return e.disabled},get value(){return i(a)},set value(S){q(a,S,!0)}})};ye(r,_=>{i(a).type==="http"&&_(p)},m)}};ye(g,r=>{i(a).type==="cmd"?r(v):r(u,!1)})}f(o),ne(()=>he(y,t())),V(d,o),ue()}var yi=j('<div class="section"><div class="block"><div class="field"><div class="title">Privileged</div> <!></div> <div class="field"><div class="title">Privilege Escalation</div> <!></div></div> <div class="block"><div class="field"><div class="title">Run as Non-Root</div> <!></div> <div class="field"><div class="title">Read-Only Root Filesystem</div> <!></div></div> <div class="block"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block"><div class="field"><!></div> <div class="field"><!></div></div></div>');function ki(d,e){ce(e,!0);let t=ae(X({privileged:!1,runAsNonRoot:!1,readOnlyRootFilesystem:!1,allowPrivilegeEscalation:!1,runAsUser:null,runAsGroup:null,capabilities_add:null,capabilities_drop:null})),a=[{name:"No",value:!1},{name:"Yes: container has full access to the host",value:!0}],n=[{name:"No",value:!1},{name:"Yes: container can gain more privileges than its parent process",value:!0}],s=[{name:"No",value:!1},{name:"Yes: container must run as a non-root user",value:!0}],l=[{name:"No",value:!1},{name:"Yes: container has a read-only root filesystem",value:!0}],o=[{name:"ALL",value:"ALL"},{name:"NET_ADMIN",value:"NET_ADMIN"},{name:"SYS_TIME",value:"SYS_TIME"},{name:"SYS_MODULE",value:"SYS_MODULE"},{name:"DAC_OVERRIDE",value:"DAC_OVERRIDE"},{name:"CHOWN",value:"CHOWN"},{name:"KILL",value:"KILL"},{name:"AUDIT_WRITE",value:"AUDIT_WRITE"},{name:"SETPCAP",value:"SETPCAP"}];oe(()=>{var x,W;if(e.value){let se={};se.privileged=e.value.privileged,se.runAsNonRoot=e.value.runAsNonRoot,se.readOnlyRootFilesystem=e.value.readOnlyRootFilesystem,se.allowPrivilegeEscalation=e.value.allowPrivilegeEscalation,se.runAsUser=e.value.runAsUser,se.runAsGroup=e.value.runAsGroup,se.capabilities_add=((x=e.value.capabilities)==null?void 0:x.add)||[],se.capabilities_drop=((W=e.value.capabilities)==null?void 0:W.drop)||[],q(t,se,!0)}});function c(){let x={};x.privileged=i(t).privileged,x.runAsNonRoot=i(t).runAsNonRoot,x.readOnlyRootFilesystem=i(t).readOnlyRootFilesystem,x.allowPrivilegeEscalation=i(t).allowPrivilegeEscalation,x.runAsUser=i(t).runAsUser,x.runAsGroup=i(t).runAsGroup,x.capabilities={add:i(t).capabilities_add,drop:i(t).capabilities_drop},e.callback&&e.callback(x)}var y=yi(),k=b(y),h=b(k),g=P(b(h),2);mt(g,{label:"Privileged",options:a,callback:c,get disabled(){return e.disabled},get value(){return i(t).privileged},set value(x){i(t).privileged=x}}),f(h);var v=P(h,2),u=P(b(v),2);mt(u,{label:"Privilege Escalation",options:n,callback:c,get disabled(){return e.disabled},get value(){return i(t).allowPrivilegeEscalation},set value(x){i(t).allowPrivilegeEscalation=x}}),f(v),f(k);var r=P(k,2),m=b(r),p=P(b(m),2);mt(p,{label:"Run as Non-Root",options:s,callback:c,get disabled(){return e.disabled},get value(){return i(t).runAsNonRoot},set value(x){i(t).runAsNonRoot=x}}),f(m);var _=P(m,2),S=P(b(_),2);mt(S,{label:"Read Only Root Filesystem",options:l,callback:c,get disabled(){return e.disabled},get value(){return i(t).readOnlyRootFilesystem},set value(x){i(t).readOnlyRootFilesystem=x}}),f(_),f(r);var C=P(r,2),A=b(C),L=b(A);Q(L,{label:"Run as User Id",onblur:c,get disabled(){return e.disabled},get value(){return i(t).runAsUser},set value(x){i(t).runAsUser=x}}),f(A);var E=P(A,2),O=b(E);Q(O,{label:"Run as Group Id",onblur:c,get disabled(){return e.disabled},get value(){return i(t).runAsGroup},set value(x){i(t).runAsGroup=x}}),f(E),f(C);var D=P(C,2),N=b(D),G=b(N);Je(G,{label:"capabilities.add",options:o,onClose:c,get disabled(){return e.disabled},get value(){return i(t).capabilities_add},set value(x){i(t).capabilities_add=x}}),f(N);var R=P(N,2),M=b(R);Je(M,{label:"capabilities.drop",options:o,onClose:c,get disabled(){return e.disabled},get value(){return i(t).capabilities_drop},set value(x){i(t).capabilities_drop=x}}),f(R),f(D),f(y),V(d,y),ue()}var _i=(d,e)=>e(d),wi=j('<label><input type="checkbox"> <span> </span></label>');function ra(d,e){ce(e,!0);let t=pe(e,"value",15);function a(c){t(c.target.checked),e.callback&&e.callback(t())}var n=wi(),s=b(n);bn(s),s.__change=[_i,a];var l=P(s,2),o=b(l,!0);f(l),f(n),ne(()=>{yn(s,t()),s.disabled=e.disabled,he(o,e.label)}),V(d,n),ue()}xe(["change"]);var xi=(d,e,t)=>e(i(t)),Si=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="select-in svelte-1f14nn9"><!></div></div></div> <div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div></div></div>'),Ri=(d,e)=>e(),Ci=j('<div class="section"><div class="title">Volume Mounts</div> <!> <div class="bottom"><button class="btn btn-primary">Add Mount</button></div></div>');function Pi(d,e){ce(e,!0);let t=ae(X([])),a=$t("yaml"),n=et(()=>{var v,u,r,m;return[...(((r=(u=(v=a==null?void 0:a.spec)==null?void 0:v.template)==null?void 0:u.spec)==null?void 0:r.volumes)||[]).map(p=>({name:p.name,value:p.name})),...(((m=a==null?void 0:a.spec)==null?void 0:m.volumeClaimTemplates)||[]).map(p=>({name:p.metadata.name,value:p.metadata.name}))]}),s=[{name:"None",value:"None"},{name:"HostToContainer",value:"HostToContainer"},{name:"Bidirectional",value:"Bidirectional"}];function l(){i(t).push({name:null,mountPath:null,readOnly:!0,subPath:null,mountPropagation:"None",subPathExpr:null,id:Math.random()})}function o(v){q(t,i(t).filter(u=>u.id!==v.id),!0),c()}oe(()=>{e.value&&q(t,e.value.map(v=>({name:v.name,mountPath:v.mountPath,readOnly:v.readOnly,subPath:v.subPath,mountPropagation:v.mountPropagation,subPathExpr:v.subPathExpr,id:Math.random()})),!0)});function c(){let v=i(t).map(u=>({name:u.name,mountPath:u.mountPath,readOnly:u.readOnly,subPath:u.subPath,mountPropagation:u.mountPropagation,subPathExpr:u.subPathExpr}));e.callback&&e.callback(v)}var y=Ci(),k=P(b(y),2);ke(k,17,()=>i(t),_e,(v,u,r)=>{var m=Si(),p=b(m),_=b(p);_.__click=[xi,o,u];var S=b(_);qe(S),f(_);var C=P(_,2),A=b(C),L=b(A);ge(L,{get options(){return i(n)},label:"name",get disabled(){return e.disabled},get value(){return i(u).name},set value(K){i(u).name=K}}),f(A);var E=P(A,2),O=b(E);Q(O,{label:"mountPath",onblur:c,get disabled(){return e.disabled},get value(){return i(u).mountPath},set value(K){i(u).mountPath=K}}),f(E);var D=P(E,2),N=b(D),G=b(N);ra(G,{label:"Read Only",callback:c,get disabled(){return e.disabled},get value(){return i(u).readOnly},set value(K){i(u).readOnly=K}}),f(N),f(D),f(C);var R=P(C,2),M=b(R),x=b(M);ge(x,{options:s,label:"mountPropagation",onClose:c,get disabled(){return e.disabled},get value(){return i(u).mountPropagation},set value(K){i(u).mountPropagation=K}}),f(M);var W=P(M,2),se=b(W);Q(se,{label:"subPath",onblur:c,get disabled(){return e.disabled},get value(){return i(u).subPath},set value(K){i(u).subPath=K}}),f(W);var z=P(W,2),te=b(z);Q(te,{label:"subPathExpr",onblur:c,get disabled(){return e.disabled},get value(){return i(u).subPathExpr},set value(K){i(u).subPathExpr=K}}),f(z),f(R),f(p),f(m),ne(()=>_.disabled=e.disabled),V(v,m)});var h=P(k,2),g=b(h);g.__click=[Ri,l],f(h),f(y),ne(()=>g.disabled=e.disabled),V(d,y),ue()}xe(["click"]);var Di=j('<div class="section"><div class="block colum-2"><div class="field"><!></div></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div> <!> <!> <!> <!> <!> <div class="title">Security Context</div> <!> <!></div>');function Xa(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({}));function a(R){t().lifecycle||t(t().lifecycle={},!0),t(t().postStart=R,!0)}function n(R){t().lifecycle||t(t().lifecycle={},!0),t(t().preStop=R,!0)}var s=Di(),l=b(s),o=b(l),c=b(o);Q(c,{label:"Container name",get disabled(){return e.disabled},get value(){return t().name},set value(R){t(t().name=R,!0)}}),f(o),f(l);var y=P(l,2),k=b(y);Us(k,{get image(){return t().image},get imagePullPolicy(){return t().imagePullPolicy},get imagePullSecrets(){return t().imagePullSecrets},callback:R=>Object.assign(t(),R),get disabled(){return e.disabled}}),f(y);var h=P(y,2),g=b(h);Hs(g,{get value(){return t().ports},callback:R=>t(t().ports=R,!0),get disabled(){return e.disabled}}),f(h);var v=P(h,2),u=b(v);qs(u,{get command(){return t().command},get args(){return t().args},get workingDir(){return t().workingDir},get stdin(){return t().stdin},callback:R=>Object.assign(t(),R),get disabled(){return e.disabled}}),f(v);var r=P(v,2),m=b(r);ai(m,{get value(){return t().env},callback:R=>t(t().env=R,!0),get disabled(){return e.disabled}}),f(r);var p=P(r,2),_=b(p);si(_,{get value(){return t().resources},callback:R=>t(t().resources=R,!0),get disabled(){return e.disabled}}),f(p);var S=P(p,2);ca(S,{label:"Readiness Check",get value(){return t().readinessProbe},callback:R=>t(t().readinessProbe=R,!0),get disabled(){return e.disabled}});var C=P(S,2);ca(C,{label:"Liveness Check",get value(){return t().livenessProbe},callback:R=>t(t().livenessProbe=R,!0),get disabled(){return e.disabled}});var A=P(C,2);ca(A,{label:"Startup Check",get value(){return t().startupProbe},callback:R=>t(t().startupProbe=R,!0),get disabled(){return e.disabled}});var L=P(A,2);const E=et(()=>{var R;return(R=t().lifecycle)==null?void 0:R.postStart});Ia(L,{label:"PostStart",get value(){return i(E)},callback:R=>a(R),get disabled(){return e.disabled}});var O=P(L,2);const D=et(()=>{var R;return(R=t().lifecycle)==null?void 0:R.preStop});Ia(O,{label:"PreStop",get value(){return i(D)},callback:R=>n(R),get disabled(){return e.disabled}});var N=P(O,4);ki(N,{get value(){return t().securityContext},callback:R=>t(t().securityContext=R,!0),get disabled(){return e.disabled}});var G=P(N,2);Pi(G,{get value(){return t().volumeMounts},callback:R=>t(t().volumeMounts=R,!0),get disabled(){return e.disabled}}),f(s),V(d,s),ue()}var Ai=(d,e,t)=>e(i(t)),Ni=(d,e,t)=>e(i(t)),Ti=j('<button class="dived container-name-remove svelte-so47fg"><!></button>'),Ei=j('<div><button class="dived"> </button> <!></div>'),Ii=j('<div class="no-record svelte-so47fg">No container to display</div>'),Oi=j('<div class="containers svelte-so47fg"><div class="container-desc svelte-so47fg">Containers</div> <div class="container-names svelte-so47fg"></div> <div class="container-btn svelte-so47fg"><button class="dived container-btn-bg svelte-so47fg"><!></button></div></div> <!>',1);function Lt(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X([])),a=ae(null);function n(){let m=t().map(_=>_.name),p="container";m.length>0&&(p=Xe.generateUniqueString(m[0],m)),t().push({name:p,type:"container",children:[]})}function s(m){t(t().filter(p=>p.name!==m.name)),q(a,t()[0],!0)}function l(m){q(a,m,!0)}oe(()=>{i(a)||q(a,t()[0],!0)});var o=Oi(),c=Ve(o),y=P(b(c),2);ke(y,21,t,_e,(m,p)=>{var _=Ei(),S=b(_);S.__click=[Ai,l,p];var C=b(S,!0);f(S);var A=P(S,2);{var L=E=>{var O=Ti();O.__click=[Ni,s,p];var D=b(O);qe(D),f(O),V(E,O)};ye(A,E=>{t().length>1&&E(L)})}f(_),ne(()=>{je(_,1,Ke(["container-name",i(a)&&i(a).name===i(p).name?"active":""]),"svelte-so47fg"),he(C,i(p).name)}),V(m,_)}),f(y);var k=P(y,2),h=b(k);h.__click=n;var g=b(h);fa(g),f(h),f(k),f(c);var v=P(c,2);{var u=m=>{Xa(m,{get disabled(){return e.disabled},get value(){return i(a)},set value(p){q(a,p,!0)}})},r=m=>{var p=Ii();V(m,p)};ye(v,m=>{i(a)?m(u):m(r,!1)})}ne(()=>h.disabled=e.disabled),V(d,o),ue()}xe(["click"]);function Li(d,e){e().push({name:`container-${e().length}`,type:"container",children:[]})}var Mi=(d,e,t)=>e(i(t)),zi=(d,e,t)=>e(i(t)),Bi=j('<div><button class="dived"> </button> <button class="dived container-name-remove svelte-so47fg"><!></button></div>'),Ui=j('<div class="no-record svelte-so47fg">No container to display</div>'),Fi=j('<div class="containers svelte-so47fg"><div class="container-desc svelte-so47fg">Containers</div> <div class="container-names svelte-so47fg"></div> <div class="container-btn svelte-so47fg"><button class="dived container-btn-bg svelte-so47fg"><!></button></div></div> <!>',1);function Mt(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(null);function n(){t(t().filter(r=>r.name!==i(a).name)),q(a,t()[0],!0)}function s(r){q(a,r,!0)}oe(()=>{i(a)||q(a,t()[0],!0)});var l=Fi(),o=Ve(l),c=P(b(o),2);ke(c,21,t,_e,(r,m)=>{var p=Bi(),_=b(p);_.__click=[Mi,s,m];var S=b(_,!0);f(_);var C=P(_,2);C.__click=[zi,n,m];var A=b(C);qe(A),f(C),f(p),ne(()=>{je(p,1,Ke(["container-name",i(a)&&i(a).name===i(m).name?"active":""]),"svelte-so47fg"),he(S,i(m).name)}),V(r,p)}),f(c);var y=P(c,2),k=b(y);k.__click=[Li,t];var h=b(k);fa(h),f(k),f(y),f(o);var g=P(o,2);{var v=r=>{Xa(r,{get disabled(){return e.disabled},get value(){return i(a)},set value(m){q(a,m,!0)}})},u=r=>{var m=Ui();V(r,m)};ye(g,r=>{i(a)?r(v):r(u,!1)})}ne(()=>k.disabled=e.disabled),V(d,l),ue()}xe(["click"]);var Vi=j('<div class="section"><div class="title">NFS</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><div class="to-left"><!></div></div></div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div></div>');function Oa(d,e){ce(e,!0);let t=ae(X({name:"",nfs:{server:"",path:"",readOnly:!1}}));function a(){e.callback&&e.callback({name:i(t).name,nfs:{server:i(t).nfs.server,path:i(t).nfs.path,readOnly:i(t).nfs.readOnly}})}oe(()=>{e.value&&q(t,{name:e.value.name,nfs:{server:e.value.nfs.server,path:e.value.nfs.path,readOnly:e.value.nfs.readOnly||!1}},!0)});var n=Vi(),s=P(b(n),2),l=b(s),o=b(l);Q(o,{label:"Volume Name",onblur:a,get disabled(){return e.disabled},get value(){return i(t).name},set value(m){i(t).name=m}}),f(l);var c=P(l,2),y=b(c),k=b(y);ra(k,{label:"Read Only",callback:a,get disabled(){return e.disabled},get value(){return i(t).nfs.readOnly},set value(m){i(t).nfs.readOnly=m}}),f(y),f(c),f(s);var h=P(s,2),g=b(h),v=b(g);Q(v,{label:"Server",onblur:a,get disabled(){return e.disabled},get value(){return i(t).nfs.server},set value(m){i(t).nfs.server=m}}),f(g);var u=P(g,2),r=b(u);Q(r,{label:"Path",onblur:a,get disabled(){return e.disabled},get value(){return i(t).nfs.path},set value(m){i(t).nfs.path=m}}),f(u),f(h),f(n),V(d,n),ue()}var ji=(d,e,t)=>e(i(t)),Ki=j('<div class="block env-grid svelte-flrb0q"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-flrb0q"><button class="btn btn-blank">Remove</button></div></div></div>'),Hi=(d,e)=>e(),Wi=j('<div class="section"><div class="title">Configmap</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><div class="to-left"><!></div></div></div> <!> <div class="bottom"><button class="btn btn-primary">Add Item</button></div></div>');function La(d,e){ce(e,!0);let t=ae(X({name:"",configMap:{name:null,items:[],defaultMode:"0644",optional:!1}})),a=ae(X([])),n=ae(X([])),s=ae(X([])),l=[{name:"Optional:Yes",value:!0},{name:"Optional:No",value:!1}];function o(){i(a).push({key:"",path:"",mode:"0644",id:Math.random()})}function c(D){q(a,i(a).filter(N=>N.id!==D.id),!0),y()}function y(){e.callback&&e.callback({name:i(t).name,configMap:{name:i(t).configMap.name,defaultMode:i(t).configMap.defaultMode,optional:i(t).configMap.optional,items:i(a).map(D=>({key:D.key,path:D.path,mode:D.mode}))}})}oe(()=>{e.value&&q(t,{name:e.value.name,configMap:{name:e.value.configMap.name,defaultMode:e.value.configMap.defaultMode,optional:e.value.configMap.optional,items:e.value.configMap.items||[]}},!0)}),oe(()=>{q(a,i(t).configMap.items.map(D=>({id:Math.random(),...D})),!0)}),oe(()=>{Me.ready("ConfigMap",D=>{q(n,D.getAllRawList().map(N=>({name:N.metadata.name,value:N.metadata.name,data:N.data})),!0)})}),oe(()=>{if(i(t).configMap.name){let D=i(n).find(N=>N.name===i(t).configMap.name);D&&q(s,Reflect.ownKeys(D.data).map(N=>({name:N,value:N})),!0)}});var k=Wi(),h=P(b(k),2),g=b(h),v=b(g);Q(v,{label:"Volume Name",onblur:y,get disabled(){return e.disabled},get value(){return i(t).name},set value(D){i(t).name=D}}),f(g);var u=P(g,2),r=b(u);ge(r,{label:"ConfigMap Name",get options(){return i(n)},onClose:y,get disabled(){return e.disabled},get value(){return i(t).configMap.name},set value(D){i(t).configMap.name=D}}),f(u),f(h);var m=P(h,2),p=b(m),_=b(p);Q(_,{label:"defaultMode",onblur:y,get disabled(){return e.disabled},get value(){return i(t).configMap.defaultMode},set value(D){i(t).configMap.defaultMode=D}}),f(p);var S=P(p,2),C=b(S),A=b(C);mt(A,{options:l,callback:y,get disabled(){return e.disabled},get value(){return i(t).configMap.optional},set value(D){i(t).configMap.optional=D}}),f(C),f(S),f(m);var L=P(m,2);ke(L,17,()=>i(a),_e,(D,N,G)=>{var R=Ki(),M=b(R),x=b(M);ge(x,{label:"Key",get options(){return i(s)},onClose:y,get disabled(){return e.disabled},get value(){return i(N).key},set value(U){i(N).key=U}}),f(M);var W=P(M,2),se=b(W);Q(se,{label:"Path",onblur:y,get disabled(){return e.disabled},get value(){return i(N).path},set value(U){i(N).path=U}}),f(W);var z=P(W,2),te=b(z);Q(te,{label:"Mode",onblur:y,get disabled(){return e.disabled},get value(){return i(N).mode},set value(U){i(N).mode=U}}),f(z);var K=P(z,2),ie=b(K),B=b(ie);B.__click=[ji,c,N],f(ie),f(K),f(R),ne(()=>B.disabled=e.disabled),V(D,R)});var E=P(L,2),O=b(E);O.__click=[Hi,o],f(E),f(k),ne(()=>O.disabled=e.disabled),V(d,k),ue()}xe(["click"]);var qi=j('<div class="section"><div class="title">Persistent Volume Claim</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block colum-2"><div class="field"><div class="to-left"><!></div></div></div></div>');function Ma(d,e){ce(e,!0);let t=ae(X({name:"",persistentVolumeClaim:{claimName:"",readOnly:!1}}));function a(){e.callback&&e.callback({name:i(t).name,persistentVolumeClaim:{claimName:i(t).persistentVolumeClaim.claimName,readOnly:i(t).persistentVolumeClaim.readOnly}})}oe(()=>{e.value&&q(t,{name:e.value.name,persistentVolumeClaim:{claimName:e.value.persistentVolumeClaim.claimName,readOnly:e.value.persistentVolumeClaim.readOnly||!1}},!0)});var n=qi(),s=P(b(n),2),l=b(s),o=b(l);Q(o,{label:"Name",onblur:a,get disabled(){return e.disabled},get value(){return i(t).name},set value(u){i(t).name=u}}),f(l);var c=P(l,2),y=b(c);Q(y,{label:"claimName",onblur:a,get disabled(){return e.disabled},get value(){return i(t).persistentVolumeClaim.claimName},set value(u){i(t).persistentVolumeClaim.claimName=u}}),f(c),f(s);var k=P(s,2),h=b(k),g=b(h),v=b(g);ra(v,{label:"Read Only",callback:a,get disabled(){return e.disabled},get value(){return i(t).persistentVolumeClaim.readOnly},set value(u){i(t).persistentVolumeClaim.readOnly=u}}),f(g),f(h),f(k),f(n),V(d,n),ue()}var Gi=(d,e,t)=>e(i(t)),Zi=j('<div class="block env-grid svelte-flrb0q"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-flrb0q"><button class="btn btn-blank">Remove</button></div></div></div>'),Yi=(d,e)=>e(),Ji=j('<div class="section"><div class="title">Secret</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><div class="to-left"><!></div></div></div> <!> <div class="bottom"><button class="btn btn-primary">Add Item</button></div></div>');function za(d,e){ce(e,!0);let t=ae(X({name:"",secret:{secretName:null,items:[],defaultMode:"0644",optional:!1}})),a=ae(X([])),n=ae(X([])),s=ae(X([])),l=[{name:"Optional:Yes",value:!0},{name:"Optional:No",value:!1}];function o(){i(a).push({key:"",path:"",mode:"0644",id:Math.random()})}function c(D){q(a,i(a).filter(N=>N.id!==D.id),!0),y()}function y(){e.callback&&e.callback({name:i(t).name,secret:{secretName:i(t).secret.secretName,defaultMode:i(t).secret.defaultMode,optional:i(t).secret.optional,items:i(a).map(D=>({key:D.key,path:D.path,mode:D.mode}))}})}oe(()=>{e.value&&q(t,{name:e.value.name,secret:{secretName:e.value.secret.secretName,defaultMode:e.value.secret.defaultMode,optional:e.value.secret.optional,items:e.value.secret.items||[]}},!0)}),oe(()=>{q(a,i(t).secret.items.map(D=>({id:Math.random(),...D})),!0)}),oe(()=>{Me.ready("Secret",D=>{q(n,D.getAllRawList().map(N=>({name:N.metadata.name,value:N.metadata.name,data:N.data})),!0)})}),oe(()=>{if(i(t).secret.secretName){let D=i(n).find(N=>N.name===i(t).secret.secretName);D&&q(s,Reflect.ownKeys(D.data).map(N=>({name:N,value:N})),!0)}});var k=Ji(),h=P(b(k),2),g=b(h),v=b(g);Q(v,{label:"Volume Name",onblur:y,get disabled(){return e.disabled},get value(){return i(t).name},set value(D){i(t).name=D}}),f(g);var u=P(g,2),r=b(u);ge(r,{label:"Secret Name",get options(){return i(n)},onClose:y,get disabled(){return e.disabled},get value(){return i(t).secret.secretName},set value(D){i(t).secret.secretName=D}}),f(u),f(h);var m=P(h,2),p=b(m),_=b(p);Q(_,{label:"defaultMode",onblur:y,get disabled(){return e.disabled},get value(){return i(t).secret.defaultMode},set value(D){i(t).secret.defaultMode=D}}),f(p);var S=P(p,2),C=b(S),A=b(C);mt(A,{options:l,callback:y,get disabled(){return e.disabled},get value(){return i(t).secret.optional},set value(D){i(t).secret.optional=D}}),f(C),f(S),f(m);var L=P(m,2);ke(L,17,()=>i(a),_e,(D,N,G)=>{var R=Zi(),M=b(R),x=b(M);ge(x,{label:"Key",get options(){return i(s)},onClose:y,get disabled(){return e.disabled},get value(){return i(N).key},set value(U){i(N).key=U}}),f(M);var W=P(M,2),se=b(W);Q(se,{label:"Path",onblur:y,get disabled(){return e.disabled},get value(){return i(N).path},set value(U){i(N).path=U}}),f(W);var z=P(W,2),te=b(z);Q(te,{label:"Mode",onblur:y,get disabled(){return e.disabled},get value(){return i(N).mode},set value(U){i(N).mode=U}}),f(z);var K=P(z,2),ie=b(K),B=b(ie);B.__click=[Gi,c,N],f(ie),f(K),f(R),ne(()=>B.disabled=e.disabled),V(D,R)});var E=P(L,2),O=b(E);O.__click=[Yi,o],f(E),f(k),ne(()=>O.disabled=e.disabled),V(d,k),ue()}xe(["click"]);var Xi=j('<div class="section"><div class="title">HostPath</div> <div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div></div>');function Ba(d,e){ce(e,!0);let t=[{name:"DirectoryOrCreate",value:"DirectoryOrCreate"},{name:"Directory",value:"Directory"},{name:"FileOrCreate",value:"FileOrCreate"},{name:"File",value:"File"},{name:"Socket",value:"Socket"},{name:"CharDevice",value:"CharDevice"},{name:"BlockDevice",value:"BlockDevice"}],a=ae(X({name:"",hostPath:{path:"",type:!1}}));function n(){e.callback&&e.callback({name:i(a).name,hostPath:{path:i(a).hostPath.path,type:i(a).hostPath.type}})}oe(()=>{e.value&&q(a,{name:e.value.name,hostPath:{path:e.value.hostPath.path,type:e.value.hostPath.type}},!0)});var s=Xi(),l=P(b(s),2),o=b(l),c=b(o);Q(c,{label:"Name",onblur:n,get disabled(){return e.disabled},get value(){return i(a).name},set value(v){i(a).name=v}}),f(o);var y=P(o,2),k=b(y);Q(k,{label:"path",onblur:n,get disabled(){return e.disabled},get value(){return i(a).hostPath.path},set value(v){i(a).hostPath.path=v}}),f(y);var h=P(y,2),g=b(h);ge(g,{label:"path",options:t,onClose:n,get disabled(){return e.disabled},get value(){return i(a).hostPath.type},set value(v){i(a).hostPath.type=v}}),f(h),f(l),f(s),V(d,s),ue()}var Qi=j('<div class="section"><div class="title">EmptyDir</div> <div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div></div>');function Ua(d,e){ce(e,!0);let t=ae(X({name:"",emptyDir:{medium:"",sizeLimit:!1}}));function a(){e.callback&&e.callback({name:i(t).name,emptyDir:{medium:i(t).emptyDir.medium,sizeLimit:i(t).emptyDir.sizeLimit}})}oe(()=>{e.value&&q(t,{name:e.value.name,emptyDir:{medium:e.value.emptyDir.medium,sizeLimit:e.value.emptyDir.sizeLimit}},!0)});var n=Qi(),s=P(b(n),2),l=b(s),o=b(l);Q(o,{label:"Name",onblur:a,get disabled(){return e.disabled},get value(){return i(t).name},set value(g){i(t).name=g}}),f(l);var c=P(l,2),y=b(c);Q(y,{label:"medium",onblur:a,get disabled(){return e.disabled},get value(){return i(t).emptyDir.medium},set value(g){i(t).emptyDir.medium=g}}),f(c);var k=P(c,2),h=b(k);Q(h,{label:"medium",onblur:a,get disabled(){return e.disabled},get value(){return i(t).emptyDir.sizeLimit},set value(g){i(t).emptyDir.sizeLimit=g}}),f(k),f(s),f(n),V(d,n),ue()}const $i=d=>{var e=er();V(d,e)};var er=j('<div style="pointer-events: none">Add Volume</div>'),tr=(d,e,t)=>e(i(t)),ar=j('<div class="content svelte-1msklc6"><button class="dived remove svelte-1msklc6"><!></button> <!></div>'),nr=j('<div class="panel svelte-1msklc6"><!> <div class="buttons"><!></div></div>');function zt(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([])),n=[{label:"NFS",value:"nfs",component:Oa,defaultValue(){return{name:"",nfs:{server:"",path:"",readOnly:!1}}},action:()=>s("nfs")},{label:"Configmap",value:"configmap",component:La,defaultValue(){return{name:"",configMap:{name:"",items:[],defaultMode:"0644",optional:!1}}},action:()=>s("configmap")},{label:"Secret",value:"secret",defaultValue(){return{name:"",secret:{secretName:"",items:[],defaultMode:"0644",optional:!1}}},component:za,action:()=>s("secret")},{label:"HostPath",value:"hostPath",defaultValue(){return{name:"",hostPath:{path:"",type:""}}},component:Ba,action:()=>s("hostPath")},{label:"EmptyDir",value:"emptyDir",defaultValue(){return{name:"",emptyDir:{medium:"",sizeLimit:""}}},component:Ua,action:()=>s("emptyDir")},{label:"Persistent Volume Claim",value:"pvc",component:Ma,defaultValue(){return{name:"",persistentVolumeClaim:{claimName:"",readOnly:!1}}},action:()=>s("pvc")}];function s(g){let v=n.find(u=>u.value===g);i(a).push({id:Math.random(),component:v.component,options:v.defaultValue()})}function l(g){q(a,i(a).filter(v=>v.id!==g.id),!0),o()}oe(()=>{t()&&q(a,t().map(g=>{let v={id:Math.random(),name:g.name,options:g};if(g.configMap)v.type="configmap",v.component=La;else if(g.secret)v.type="secret",v.component=za;else if(g.persistentVolumeClaim)v.type="pvc",v.component=Ma;else if(g.hostPath)v.type="hostPath",v.component=Ba;else if(g.emptyDir)v.type="emptyDir",v.component=Ua;else if(g.nfs)v.type="nfs",v.component=Oa;else return null;return v}).filter(g=>!!g),!0)});function o(){let g=i(a).map(v=>JSON.parse(JSON.stringify(v.options))).filter(v=>!!v);t(g)}var c=nr(),y=b(c);ke(y,17,()=>i(a),_e,(g,v,u)=>{var r=ar(),m=b(r);m.__click=[tr,l,v];var p=b(m);qe(p),f(m);var _=P(m,2);{var S=C=>{var A=vt();const L=et(()=>i(v).component);var E=Ve(A);kn(E,()=>i(L),(O,D)=>{D(O,{get value(){return i(v).options},callback:N=>(i(v).options=N)&&o(),get disabled(){return e.disabled}})}),V(C,A)};ye(_,C=>{i(v).component&&C(S)})}f(r),ne(()=>m.disabled=e.disabled),V(g,r)});var k=P(y,2),h=b(k);cn(h,{menus:n,btn:$i,get disabled(){return e.disabled}}),f(k),f(c),V(d,c),ue()}xe(["click"]);var sr=j('<div class="section"><div class="title">Image Pull Secrets</div> <div class="block colum-2"><!></div></div>');function Bt(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([])),n=ae(X([]));oe(()=>{q(a,(t()||[]).map(y=>y.name),!0)}),oe(()=>{Me.ready("Secret",y=>{q(n,y.getAllRawList().map(k=>({name:k.metadata.name,value:k.metadata.name})),!0)})});function s(){t((i(a)||[]).map(y=>({name:y})))}var l=sr(),o=P(b(l),2),c=b(o);Je(c,{label:"Pull Secrets",get options(){return i(n)},onClose:s,get disabled(){return e.disabled},get value(){return i(a)},set value(y){q(a,y,!0)}}),f(o),f(l),V(d,l),ue()}var ir=j('<div class="section"><div class="title">Service Account</div> <div class="block colum-2"><!></div></div>');function Ut(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));oe(()=>{Me.ready("ServiceAccount",o=>{q(a,o.getAllRawList().map(c=>({name:c.metadata.name,value:c.metadata.name})),!0)})});var n=ir(),s=P(b(n),2),l=b(s);ge(l,{label:"Service Account",get options(){return i(a)},get disabled(){return e.disabled},get value(){return t()},set value(o){t(o)}}),f(s),f(n),V(d,n),ue()}var rr=j('<div class="section"><div class="block colum-2"><!></div></div>');function Le(d,e){ce(e,!0);let t=pe(e,"value",15);var a=rr(),n=b(a),s=b(n);ra(s,{get label(){return e.option.label},get disabled(){return e.disabled},get value(){return t()},set value(l){t(l)}}),f(n),f(a),V(d,a),ue()}var lr=j('<div class="section"><div class="title">Node Selector</div> <div class="block colum-1"><!></div></div>');function Ft(d,e){ce(e,!0);let t=pe(e,"value",15);var a=lr(),n=P(b(a),2),s=b(n);rt(s,{callback:l=>t(l),get disabled(){return e.disabled},get value(){return t()},set value(l){t(l)}}),f(n),f(a),V(d,a),ue()}var or=(d,e,t)=>e(i(t)),dr=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block colum-1"><div class="field"><!></div></div> <div class="block  colum-1"><!></div></div></div>'),cr=(d,e)=>e(),ur=j('<div class="section"><div class="sub-title">PreferredDuringSchedulingIgnoredDuringExecution</div> <!> <div class="bottom"><button class="btn btn-primary">Add</button></div></div>');function mr(d,e){ce(e,!0);let t=ae(X([]));function a(){i(t).push({weight:null,preference:{matchExpressions:[]},id:Math.random()})}function n(k){q(t,i(t).filter(h=>h.id!==k.id),!0),s()}oe(()=>{e.value&&q(t,e.value.map(k=>({weight:k.weight,preference:{matchExpressions:k.preference.matchExpressions||[]},id:Math.random()})),!0)});function s(){let k=i(t).map(h=>({weight:h.weight,preference:{matchExpressions:h.preference.matchExpressions}}));e.callback&&e.callback(k)}var l=ur(),o=P(b(l),2);ke(o,17,()=>i(t),_e,(k,h,g)=>{var v=dr(),u=b(v),r=b(u);r.__click=[or,n,h];var m=b(r);qe(m),f(r);var p=P(r,2),_=b(p),S=b(_);Q(S,{label:"Weight",onblur:s,get disabled(){return e.disabled},get value(){return i(h).weight},set value(L){i(h).weight=L}}),f(_),f(p);var C=P(p,2),A=b(C);Ot(A,{label:"MatchExpressions",callback:L=>(i(h).preference.matchExpressions=L)&&s(),get disabled(){return e.disabled},get value(){return i(h).preference.matchExpressions},set value(L){i(h).preference.matchExpressions=L}}),f(C),f(u),f(v),ne(()=>r.disabled=e.disabled),V(k,v)});var c=P(o,2),y=b(c);y.__click=[cr,a],f(c),f(l),ne(()=>y.disabled=e.disabled),V(d,l),ue()}xe(["click"]);var vr=(d,e,t)=>e(i(t)),pr=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block  colum-1"><!></div></div></div>'),fr=(d,e)=>e(),hr=j('<div class="section"><div class="sub-title">PreferredDuringSchedulingIgnoredDuringExecution</div> <!> <div class="bottom"><button class="btn btn-primary">Add</button></div></div>');function gr(d,e){ce(e,!0);let t=ae(X([]));function a(){i(t).push({weight:null,podAffinityTerm:{labelSelector:{matchExpressions:[]},topologyKey:null},id:Math.random()})}function n(k){q(t,i(t).filter(h=>h.id!==k.id),!0),s()}oe(()=>{e.value&&q(t,e.value.map(k=>{var h,g,v;return{weight:k.weight,podAffinityTerm:{labelSelector:{matchExpressions:((g=(h=k.podAffinityTerm)==null?void 0:h.labelSelector)==null?void 0:g.matchExpressions)||[]},topologyKey:(v=k.podAffinityTerm)==null?void 0:v.topologyKey},id:Math.random()}}),!0)});function s(){let k=i(t).map(h=>{var g,v,u;return{weight:h.weight,podAffinityTerm:{labelSelector:{matchExpressions:((v=(g=h.podAffinityTerm)==null?void 0:g.labelSelector)==null?void 0:v.matchExpressions)||[]},topologyKey:(u=h.podAffinityTerm)==null?void 0:u.topologyKey}}});e.callback&&e.callback(k)}var l=hr(),o=P(b(l),2);ke(o,17,()=>i(t),_e,(k,h,g)=>{var v=pr(),u=b(v),r=b(u);r.__click=[vr,n,h];var m=b(r);qe(m),f(r);var p=P(r,2),_=b(p),S=b(_);Q(S,{label:"Weight",onblur:s,get disabled(){return e.disabled},get value(){return i(h).weight},set value(O){i(h).weight=O}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"topologyKey",onblur:s,get disabled(){return e.disabled},get value(){return i(h).podAffinityTerm.topologyKey},set value(O){i(h).podAffinityTerm.topologyKey=O}}),f(C),f(p);var L=P(p,2),E=b(L);Ot(E,{label:"MatchExpressions",callback:O=>(i(h).podAffinityTerm.labelSelector.matchExpressions=O)&&s(),get disabled(){return e.disabled},get value(){return i(h).podAffinityTerm.labelSelector.matchExpressions},set value(O){i(h).podAffinityTerm.labelSelector.matchExpressions=O}}),f(L),f(u),f(v),ne(()=>r.disabled=e.disabled),V(k,v)});var c=P(o,2),y=b(c);y.__click=[fr,a],f(c),f(l),ne(()=>y.disabled=e.disabled),V(d,l),ue()}xe(["click"]);var br=(d,e,t)=>e(i(t)),yr=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block  colum-1"><!></div></div></div>'),kr=(d,e)=>e(),_r=j('<div class="section"><div class="sub-title">RequiredDuringSchedulingIgnoredDuringExecution</div> <!> <div class="bottom"><button class="btn btn-primary">Add</button></div></div>');function wr(d,e){ce(e,!0);let t=ae(X([]));function a(){i(t).push({matchExpressions:[],id:Math.random()})}function n(k){q(t,i(t).filter(h=>h.id!==k.id),!0),s()}oe(()=>{e.value&&q(t,e.value.map(k=>({matchExpressions:k.matchExpressions||[],id:Math.random()})),!0)});function s(){let k=i(t).map(h=>({matchExpressions:h.matchExpressions}));e.callback&&e.callback(k)}var l=_r(),o=P(b(l),2);ke(o,17,()=>i(t),_e,(k,h,g)=>{var v=yr(),u=b(v),r=b(u);r.__click=[br,n,h];var m=b(r);qe(m),f(r);var p=P(r,2),_=b(p);Ot(_,{label:"MatchExpressions",get disabled(){return e.disabled},get value(){return i(h).matchExpressions},set value(S){i(h).matchExpressions=S}}),f(p),f(u),f(v),ne(()=>r.disabled=e.disabled),V(k,v)});var c=P(o,2),y=b(c);y.__click=[kr,a],f(c),f(l),ne(()=>y.disabled=e.disabled),V(d,l),ue()}xe(["click"]);var xr=(d,e,t)=>e(i(t)),Sr=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <div class="block  colum-1"><!></div></div></div>'),Rr=(d,e)=>e(),Cr=j('<div class="section"><div class="sub-title">RequiredDuringSchedulingIgnoredDuringExecution</div> <!> <div class="bottom"><button class="btn btn-primary">Add</button></div></div>');function Pr(d,e){ce(e,!0);let t=ae(X([])),a=ae(X([]));function n(){i(t).push({namespaces:[],topologyKey:null,labelSelector:{matchExpressions:[]},id:Math.random()})}function s(h){q(t,i(t).filter(g=>g.id!==h.id),!0),l()}oe(()=>{Me.ready("Namespace",h=>{q(a,h.getAllRawList().map(g=>({name:g.metadata.name,value:g.metadata.name})),!0)})}),oe(()=>{e.value&&q(t,e.value.map(h=>{var g;return{namespaces:h.namespaces,topologyKey:h.topologyKey,labelSelector:{matchExpressions:((g=h.labelSelector)==null?void 0:g.matchExpressions)||[]},id:Math.random()}}),!0)});function l(){let h=i(t).map(g=>{var v;return{namespaces:g.namespaces,topologyKey:g.topologyKey,labelSelector:{matchExpressions:((v=g.labelSelector)==null?void 0:v.matchExpressions)||[]}}});e.callback&&e.callback(h)}var o=Cr(),c=P(b(o),2);ke(c,17,()=>i(t),_e,(h,g,v)=>{var u=Sr(),r=b(u),m=b(r);m.__click=[xr,s,g];var p=b(m);qe(p),f(m);var _=P(m,2),S=b(_),C=b(S);Je(C,{get options(){return i(a)},label:"namespaces",onClose:l,get disabled(){return e.disabled},get value(){return i(g).namespaces},set value(D){i(g).namespaces=D}}),f(S);var A=P(S,2),L=b(A);Q(L,{label:"topologyKey",onblur:l,get disabled(){return e.disabled},get value(){return i(g).topologyKey},set value(D){i(g).topologyKey=D}}),f(A),f(_);var E=P(_,2),O=b(E);Ot(O,{label:"MatchExpressions",callback:D=>(i(g).labelSelector.matchExpressions=D)&&l(),get disabled(){return e.disabled},get value(){return i(g).labelSelector.matchExpressions},set value(D){i(g).labelSelector.matchExpressions=D}}),f(E),f(r),f(u),ne(()=>m.disabled=e.disabled),V(h,u)});var y=P(c,2),k=b(y);k.__click=[Rr,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);var Dr=j('<div class="section"><div class="title">NodeAffinity</div> <!> <!> <div class="title">PodAffinity</div> <!> <!></div>');function Vt(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X({nodeAffinity:{requiredDuringSchedulingIgnoredDuringExecution:{nodeSelectorTerms:[]},preferredDuringSchedulingIgnoredDuringExecution:[]},podAffinity:{requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]}}));oe(()=>{var k,h,g,v,u;t()&&q(a,{nodeAffinity:{requiredDuringSchedulingIgnoredDuringExecution:{nodeSelectorTerms:((h=(k=t().nodeAffinity)==null?void 0:k.requiredDuringSchedulingIgnoredDuringExecution)==null?void 0:h.nodeSelectorTerms)||[]},preferredDuringSchedulingIgnoredDuringExecution:((g=t().nodeAffinity)==null?void 0:g.preferredDuringSchedulingIgnoredDuringExecution)||[]},podAffinity:{requiredDuringSchedulingIgnoredDuringExecution:((v=t().podAffinity)==null?void 0:v.requiredDuringSchedulingIgnoredDuringExecution)||[],preferredDuringSchedulingIgnoredDuringExecution:((u=t().podAffinity)==null?void 0:u.preferredDuringSchedulingIgnoredDuringExecution)||[]}},!0)});function n(){var h,g,v,u,r;let k={nodeAffinity:{requiredDuringSchedulingIgnoredDuringExecution:{nodeSelectorTerms:((g=(h=i(a).nodeAffinity)==null?void 0:h.requiredDuringSchedulingIgnoredDuringExecution)==null?void 0:g.nodeSelectorTerms)||[]},preferredDuringSchedulingIgnoredDuringExecution:((v=i(a).nodeAffinity)==null?void 0:v.preferredDuringSchedulingIgnoredDuringExecution)||[]},podAffinity:{requiredDuringSchedulingIgnoredDuringExecution:((u=i(a).podAffinity)==null?void 0:u.requiredDuringSchedulingIgnoredDuringExecution)||[],preferredDuringSchedulingIgnoredDuringExecution:((r=i(a).podAffinity)==null?void 0:r.preferredDuringSchedulingIgnoredDuringExecution)||[]}};t(k)}var s=Dr(),l=P(b(s),2);wr(l,{get disabled(){return e.disabled},get value(){return i(a).nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms},set value(k){i(a).nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms=k}});var o=P(l,2);mr(o,{get value(){return i(a).nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution},callback:k=>(i(a).nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution=k)&&n(),get disabled(){return e.disabled}});var c=P(o,4);Pr(c,{get value(){return i(a).podAffinity.requiredDuringSchedulingIgnoredDuringExecution},callback:k=>(i(a).podAffinity.requiredDuringSchedulingIgnoredDuringExecution=k)&&n(),get disabled(){return e.disabled}});var y=P(c,2);gr(y,{get value(){return i(a).podAffinity.preferredDuringSchedulingIgnoredDuringExecution},callback:k=>(i(a).podAffinity.preferredDuringSchedulingIgnoredDuringExecution=k)&&n(),get disabled(){return e.disabled}}),f(s),V(d,s),ue()}var Ar=j('<div class="field"><!></div>'),Nr=(d,e,t)=>e(i(t)),Tr=j('<div class="block env-grid svelte-rks8ca"><div class="block env-grid2 svelte-rks8ca"><div class="field"><!></div> <div class="field"><!></div> <!> <div class="field"><!></div> <div class="field"><!></div></div> <div class="field"><div class="remove svelte-rks8ca"><button class="btn btn-blank">Remove</button></div></div></div>'),Er=(d,e)=>e(),Ir=j('<div class="section"><!> <div class="bottom"><button class="btn btn-primary"> </button></div></div>');function jt(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X([])),a=ae(X([])),n=[{name:"Equal",value:"Equal"},{name:"Exists",value:"Exists"}],s=[{name:"All",value:null},{name:"NoExecute",value:"NoExecute"},{name:"NoSchedule",value:"NoSchedule"},{name:"PreferNoSchedule",value:"PreferNoSchedule"}];function l(){i(a).push({key:"",operator:"Exists",value:"",effect:null,tolerationSeconds:null,id:Math.random()})}function o(u){q(a,i(a).filter(r=>r.id!==u.id),!0),c()}oe(()=>{t()&&q(a,[...t().map(u=>({...u,id:Math.random()}))],!0)});function c(){let u=i(a).map(({key:r,value:m,operator:p,effect:_,tolerationSeconds:S})=>({key:r,value:m,operator:p,effect:_,tolerationSeconds:S}));t(u)}var y=Ir(),k=b(y);ke(k,17,()=>i(a),_e,(u,r,m)=>{var p=Tr(),_=b(p),S=b(_),C=b(S);Q(C,{label:"Key",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(r).key},set value(se){i(r).key=se}}),f(S);var A=P(S,2),L=b(A);ge(L,{options:n,label:"Operator",onClose:()=>c(),get disabled(){return e.disabled},get value(){return i(r).operator},set value(se){i(r).operator=se}}),f(A);var E=P(A,2);{var O=se=>{var z=Ar(),te=b(z);Q(te,{label:"Value",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(r).value},set value(K){i(r).value=K}}),f(z),V(se,z)};ye(E,se=>{i(r).operator==="Equal"&&se(O)})}var D=P(E,2),N=b(D);ge(N,{options:s,label:"Effect",onClose:()=>c(),get disabled(){return e.disabled},get value(){return i(r).effect},set value(se){i(r).effect=se}}),f(D);var G=P(D,2),R=b(G);Q(R,{label:"Value",type:"number",unit:"Sec",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(r).tolerationSeconds},set value(se){i(r).tolerationSeconds=se}}),f(G),f(_);var M=P(_,2),x=b(M),W=b(x);W.__click=[Nr,o,r],f(x),f(M),f(p),ne(()=>W.disabled=e.disabled),V(u,p)});var h=P(k,2),g=b(h);g.__click=[Er,l];var v=b(g);f(g),f(h),f(y),ne(()=>{g.disabled=e.disabled,he(v,`Add ${e.label||"Rule"}`)}),V(d,y),ue()}xe(["click"]);var Or=j('<div class="section"><div class="title">Dns Policy</div> <div class="block colum-2"><!></div></div>');function Kt(d,e){ce(e,!0);let t=pe(e,"value",15),a=[{name:"Default",value:"Default"},{name:"ClusterFirst",value:"ClusterFirst"},{name:"ClusterFirstWithHostNet",value:"ClusterFirstWithHostNet"},{name:"None",value:"None"}];var n=Or(),s=P(b(n),2),l=b(s);ge(l,{label:"Pull Secrets",options:a,get disabled(){return e.disabled},get value(){return t()},set value(o){t(o)}}),f(s),f(n),V(d,n),ue()}var Lr=j('<div class="title"> </div>'),Mr=(d,e,t)=>e(i(t)),zr=j('<div class="block env-grid svelte-rh1zqq"><div class="field"><!></div> <div class="field"><div class="remove svelte-rh1zqq"><button class="btn btn-blank">Remove</button></div></div></div>'),Br=(d,e)=>e(),Ur=j('<div class="section"><!> <!> <div class="bottom"><button class="btn btn-primary"> </button></div></div>');function xt(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));function n(){i(a).push({value:"",id:Math.random()})}function s(u){q(a,i(a).filter(r=>r.id!==u.id),!0),l()}oe(()=>{t()&&q(a,t().map(u=>({value:u,id:Math.random()})),!0)});function l(){t(i(a).map(u=>u.value)),e.callback&&e.callback(t())}var o=Ur(),c=b(o);{var y=u=>{var r=Lr(),m=b(r,!0);f(r),ne(()=>he(m,e.label)),V(u,r)};ye(c,u=>{e.label&&u(y)})}var k=P(c,2);ke(k,17,()=>i(a),_e,(u,r,m)=>{var p=zr(),_=b(p),S=b(_);Q(S,{label:"Value",onblur:l,get disabled(){return e.disabled},get value(){return i(r).value},set value(E){i(r).value=E}}),f(_);var C=P(_,2),A=b(C),L=b(A);L.__click=[Mr,s,r],f(A),f(C),f(p),ne(()=>L.disabled=e.disabled),V(u,p)});var h=P(k,2),g=b(h);g.__click=[Br,n];var v=b(g);f(g),f(h),f(o),ne(()=>{g.disabled=e.disabled,he(v,`Add ${e.label??""}`)}),V(d,o),ue()}xe(["click"]);var Fr=j('<div class="section"><div class="departs svelte-1as1tjl"><div class="section-part"><!></div> <div class="section-part"><!></div></div></div> <!>',1);function Ht(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X({nameservers:[],searches:[],options:[]}));oe(()=>{t()&&q(a,{nameservers:t().nameservers||[],searches:t().searches||[],options:t().options||[]},!0)});function n(){t({nameservers:i(a).nameservers,searches:i(a).searches,options:i(a).options})}var s=Fr(),l=Ve(s),o=b(l),c=b(o),y=b(c);xt(y,{label:"Nameservers",callback:n,get disabled(){return e.disabled},get value(){return i(a).nameservers},set value(v){i(a).nameservers=v}}),f(c);var k=P(c,2),h=b(k);xt(h,{label:"Search Domains",callback:n,get disabled(){return e.disabled},get value(){return i(a).searches},set value(v){i(a).searches=v}}),f(k),f(o),f(l);var g=P(l,2);ha(g,{label:"Resolver Options",get value(){return i(a).options},callback:v=>(i(a).options=v)&&n(),get disabled(){return e.disabled}}),V(d,s),ue()}var Vr=j('<div class="section"><div class="title">Dns Policy</div> <div class="block colum-2"><!></div></div>');function Wt(d,e){ce(e,!0);let t=pe(e,"value",15),a=[{name:"Always",value:"Always"},{name:"OnFailure",value:"OnFailure"},{name:"Never",value:"Never"}];var n=Vr(),s=P(b(n),2),l=b(s);ge(l,{label:"Pull Secrets",options:a,get disabled(){return e.disabled},get value(){return t()},set value(o){t(o)}}),f(s),f(n),V(d,n),ue()}class Rt extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod,this.resources.ReplicaSet]}_getPublicEndpoints(e){if(!e["field.cattle.io/publicEndpoints"])return[];try{return JSON.parse(e["field.cattle.io/publicEndpoints"])}catch{return[]}}getStatus(){var M,x,W,se;const e=this.raw,t=this.resources.Pod.getRawByLabels(e.spec.selector.matchLabels),a=this.resources.ReplicaSet.getRawByLabels(e.spec.selector.matchLabels),n=((M=e.status)==null?void 0:M.conditions)||[],s=e.spec.replicas||0,l=((x=e.status)==null?void 0:x.readyReplicas)||0,o=((W=e.status)==null?void 0:W.availableReplicas)||0,c=((se=e.status)==null?void 0:se.unavailableReplicas)||0,y=[r,m,p,_,S,C,A,L,E,O,D,N],k=t.map(z=>this.resources.Pod.getHandler(z).getStatus()),h=k.filter(z=>z.status==="Running").length,g={};k.forEach(z=>{g[z.status]||(g[z.status]={size:0,total:k.length,status:z.status,raw:z}),g[z.status].size+=1});const v=Reflect.ownKeys(g).map(z=>({size:g[z].size,total:g[z].total,status:g[z].status,className:g[z].raw.className,sort:g[z].raw.sort,ratio:Math.round(g[z].size/g[z].total*100)})).sort((z,te)=>te.sort-z.sort),u=t.length>0?Math.round(h/t.length*100):0;for(const z of y){const te=z();if(te)return te}return G();function r(){if(e.metadata.deletionTimestamp)return R("Terminating","terminating",`Deployment is being deleted (started at ${e.metadata.deletionTimestamp}).`);if(t.some(z=>{var te;return(te=z.metadata)==null?void 0:te.deletionTimestamp}))return R("Terminating","terminating","One or more Pods are in termination phase.")}function m(){if(e.spec.paused)return R("Paused","paused",'Deployment updates are paused. Use "kubectl rollout resume" to continue.')}function p(){const z=t.filter(te=>{var K,ie;return(ie=(K=te.status)==null?void 0:K.containerStatuses)==null?void 0:ie.some(B=>{var U,me,de,ee,Se,Ee;return((me=(U=B.state)==null?void 0:U.waiting)==null?void 0:me.reason)==="CrashLoopBackOff"||((ee=(de=B.state)==null?void 0:de.terminated)==null?void 0:ee.exitCode)&&((Ee=(Se=B.state)==null?void 0:Se.terminated)==null?void 0:Ee.exitCode)!==0})});if(z.length>0){const te=z.slice(0,3).map(K=>K.metadata.name);return R("Failed","failed",`Critical failure in Pod(s): ${te.join(", ")}. Check application logs for crashes or configuration errors.`)}}function _(){const z=a.filter(te=>{var K,ie;return(ie=(K=te.status)==null?void 0:K.conditions)==null?void 0:ie.some(B=>B.type==="ReplicaFailure"&&B.status==="True")});if(z.length>0){const te=z.flatMap(K=>K.status.conditions.map(ie=>ie.message));return R("ReplicaFailure","replica-failure",`ReplicaSet errors detected: ${te.join("; ")}. Possible causes: resource limits, image pull errors, or storage issues.`)}}function S(){if(l<s&&l>0)return R("Degraded","degraded",`${s-l} replica(s) are not ready. Partial availability - check Pod network policies or intermittent failures.`)}function C(){const z=a.find(te=>{var K,ie,B;return((K=te.metadata)==null?void 0:K.annotations)&&((ie=te.metadata)==null?void 0:ie.annotations["deployment.kubernetes.io/revision"])!==((B=e.metadata)==null?void 0:B.annotations["deployment.kubernetes.io/revision"])});if(z&&t.some(te=>{var K;return(K=te.metadata)==null?void 0:K.deletionTimestamp}))return R("Upgrading","upgrading",`Rolling update in progress: ${z.metadata.name} is replacing old Pods.`)}function A(){const z=n.find(te=>te.type==="Progressing");if((z==null?void 0:z.status)==="True"&&z.reason==="ReplicaSetUpdated")return R("Progressing","progressing",`Deployment is updating: ${z.message}`)}function L(){var te,K,ie;const z=t.find(B=>{var U;return(U=B.metadata.annotations)==null?void 0:U["autoscaling.alpha.kubernetes.io/conditions"]});if((te=e.status)!=null&&te.replicas&&s!==((K=e.status)==null?void 0:K.replicas)||z)return R("Scaling","scaling",`Replica count changing from ${(ie=e.status)==null?void 0:ie.replicas} to ${s}. `+(z?"Triggered by Horizontal Pod Autoscaler.":""))}function E(){const z=t.filter(te=>{var K,ie;return(ie=(K=te.status)==null?void 0:K.containerStatuses)==null?void 0:ie.some(B=>{var U;return((U=B.state)==null?void 0:U.waiting)&&["ContainerCreating","ImagePullBackOff","CrashLoopBackOff"].includes(B.state.waiting.reason)})});if(z.length>0){const te=z.flatMap(K=>K.status.containerStatuses.map(ie=>{var B;return(B=ie.state.waiting)==null?void 0:B.reason}));return R("Waiting","waiting",`Pods waiting: ${[...new Set(te)].join(", ")}. Check image availability or resource allocation.`)}}function O(){if(o>=e.spec.minReadySeconds)return R("Available","available",`Minimum availability (${e.spec.minReadySeconds}s) satisfied with ${o} Pods.`)}function D(){if(l===s&&c===0)return R("Active","active",`All ${s} replica(s) are running and ready.`)}function N(){if(!e.status||!n.length)return R("Unknown","unknown","Deployment status cannot be determined. Check cluster connectivity.")}function G(){return R("Unknown","unknown","Unexpected state - no matching condition found.")}function R(z,te,K){return{status:z,className:`status-${te}`,message:K,podStatusList:v,podReadyRatio:u}}}getPodsStatusStatistics(){let e={},t=this.resources.Pod.getByLabels(this.getMatchLabels());return t.forEach(a=>{let{status:n}=a.getStatus();e[n]||(e[n]=0),e[n]=e[n]+1}),Reflect.ownKeys(e).map(a=>({state:a,total:t.length,size:e[a],className:`status-${a.toLowerCase()}`,percent:Math.round(e[a]/t.length*100)}))}getTableRow(){var l,o,c,y;let e=this.raw;const t=e.metadata||{},a=e.spec||{},n=e.status||{};let s={id:t.name,name:t.name||"",namespace:t.namespace||"",image:((y=(c=(o=(l=a.template)==null?void 0:l.spec)==null?void 0:o.containers)==null?void 0:c[0])==null?void 0:y.image)||"",replicas:a.replicas||0,availableReplicas:n.availableReplicas||0,status:this.getStatus(e),creationTimestamp:t.creationTimestamp||"",publicEndpoints:this._getPublicEndpoints(t.annotations||{}),age:this.age};return s.ready=`${s.availableReplicas}/${s.replicas}`,s.status.status!=="Active"&&s.status.message&&(s.rowOption={className:"row-desc"},s.status.showDescription=!0),s}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"130px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Image",key:"image",align:"left"},{name:"Endpoints",key:"publicEndpoints",align:"left",width:"110px"},{name:"Ready",key:"ready",align:"center",width:"100px"},{name:"Available",key:"availableReplicas",align:"center",width:"80px",sortable:!0},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0},{name:"Health",key:"health",align:"center",width:"150px"}]}getActions(){return["Detail","Yaml","Config","EditConfig","EditYaml","Clone","Download","Redeploy","ExecuteShell","Rollback","Orchestration","Delete"]}onShowTableMenu(e,t){var s;let a=this.getResource(t),n=e.find(l=>l.typeName==="Orchestration");n&&a&&((s=a.spec)!=null&&s.paused?(n.label="Resume Orchestration",n.icon=un,n.action=l=>{this.resumeOrchestration(l)}):(n.label="Pause Orchestration",n.icon=Ka,n.action=l=>{this.pauseOrchestration(l)}))}onShowDropMenu(e,t){this.onShowTableMenu(e,t.metadata.name)}getIntro(e){return[{key:"Image",value:e.metadata.namespace}]}getDetailTabs(e){var t;return[{id:"pods",title:"Pods",component:It,params:{params:{matchLabels:(t=e.spec.selector)==null?void 0:t.matchLabels}}},{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastUpdateTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.status.conditions||[]}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}},{id:"events",title:"Events",component:ms,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[{component:hs,params:{deployment:e}}]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"replicas",component:be,option:{label:"replicas",type:"number"},key:"spec.replicas"},{name:"strategy",component:Rs,key:"spec.strategy"},{name:"selector",component:ct,key:"spec.selector"},{name:"template",component:null,key:"spec.template",children:[{name:"metadata",component:ia,key:"spec.template.metadata"},{name:"spec",component:null,key:"spec.template.spec",children:[{name:"containers",component:Lt,key:"spec.template.spec.containers",defaultValue(){return[]}},{name:"initContainers",component:Mt,key:"spec.template.spec.initContainers",defaultValue(){return[]}},{name:"volumes",component:zt,key:"spec.template.spec.volumes",defaultValue(){return[]}},{name:"imagePullSecrets",component:Bt,key:"spec.template.spec.imagePullSecrets"},{name:"serviceAccountName",component:Ut,key:"spec.template.spec.serviceAccountName"},{name:"automountServiceAccountToken",component:Le,option:{label:"automountServiceAccountToken"},key:"spec.template.spec.automountServiceAccountToken"},{name:"nodeSelector",component:Ft,key:"spec.template.spec.nodeSelector"},{name:"affinity",component:Vt,key:"spec.template.spec.affinity"},{name:"tolerations",component:jt,key:"spec.template.spec.tolerations"},{name:"dnsPolicy",component:Kt,key:"spec.template.spec.dnsPolicy"},{name:"dnsConfig",component:Ht,key:"spec.template.spec.dnsConfig"},{name:"hostNetwork",component:Le,option:{label:"hostNetwork"},key:"spec.template.spec.hostNetwork"},{name:"hostPID",component:Le,option:{label:"hostPID"},key:"spec.template.spec.hostPID"},{name:"hostIPC",component:Le,option:{label:"hostIPC"},key:"spec.template.spec.hostIPC"},{name:"restartPolicy",component:Wt,key:"spec.template.spec.restartPolicy"}]}]}]}]}}var jr=(d,e,t)=>e(i(t)),Kr=j('<div class="block port-grid svelte-3b1ok7"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-3b1ok7"><button class="btn btn-blank">Remove</button></div></div></div>'),Hr=(d,e)=>e(),Wr=j('<div class="section"><div class="title">Ports</div> <!> <div class="bottom"><button class="btn btn-primary">Add Port</button></div></div>');function qr(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([])),n=[{name:"TCP",value:"TCP"},{name:"UDP",value:"UDP"}];function s(){i(a).push({id:Math.random(),name:"",port:"",protocol:"TCP",targetPort:80})}function l(g){q(a,i(a).filter(v=>v.id!==g.id),!0),o()}oe(()=>{q(a,[...(t()||[]).map(g=>({...g,id:Math.random()}))],!0)});function o(){let g=i(a).map(({name:v,port:u,protocol:r,targetPort:m})=>({name:v,port:u,protocol:r,targetPort:m}));t(g),e.callback&&e.callback(g)}var c=Wr(),y=P(b(c),2);ke(y,17,()=>i(a),_e,(g,v,u)=>{var r=Kr(),m=b(r),p=b(m);Q(p,{label:"Name",onblur:()=>o(),get disabled(){return e.disabled},get value(){return i(v).name},set value(G){i(v).name=G}}),f(m);var _=P(m,2),S=b(_);ge(S,{label:"Protocol",options:n,get disabled(){return e.disabled},get value(){return i(v).protocol},set value(G){i(v).protocol=G}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"Port",onblur:()=>o(),onClose:()=>o(),get disabled(){return e.disabled},get value(){return i(v).port},set value(G){i(v).port=G}}),f(C);var L=P(C,2),E=b(L);Q(E,{label:"Target Port",onblur:()=>o(),onClose:()=>o(),get disabled(){return e.disabled},get value(){return i(v).targetPort},set value(G){i(v).targetPort=G}}),f(L);var O=P(L,2),D=b(O),N=b(D);N.__click=[jr,l,v],f(D),f(O),f(r),ne(()=>N.disabled=e.disabled),V(g,r)});var k=P(y,2),h=b(k);h.__click=[Hr,s],f(k),f(c),ne(()=>h.disabled=e.disabled),V(d,c),ue()}xe(["click"]);var Gr=(d,e,t)=>e(i(t)),Zr=j('<div class="block port-grid svelte-3b1ok7"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-3b1ok7"><button class="btn btn-blank">Remove</button></div></div></div>'),Yr=(d,e)=>e(),Jr=j('<div class="section"><div class="title">Ports</div> <!> <div class="bottom"><button class="btn btn-primary">Add Port</button></div></div>');function Xr(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X([])),a=ae(X([]));function n(){i(a).push({id:Math.random(),name:"",port:"",nodePort:80,targetPort:80})}function s(h){q(a,i(a).filter(g=>g.id!==h.id),!0),l()}oe(()=>{q(a,[...t().map(h=>({...h,id:Math.random()}))],!0)});function l(){let h=i(a).map(({name:g,port:v,nodePort:u,targetPort:r})=>({name:g,port:v,nodePort:u,targetPort:r}));e.callback&&e.callback(h)}var o=Jr(),c=P(b(o),2);ke(c,17,()=>i(a),_e,(h,g,v)=>{var u=Zr(),r=b(u),m=b(r);Q(m,{label:"Name",onblur:()=>l(),get disabled(){return e.disabled},get value(){return i(g).name},set value(N){i(g).name=N}}),f(r);var p=P(r,2),_=b(p);Q(_,{label:"Node Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).nodePort},set value(N){i(g).nodePort=N}}),f(p);var S=P(p,2),C=b(S);Q(C,{label:"Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).port},set value(N){i(g).port=N}}),f(S);var A=P(S,2),L=b(A);Q(L,{label:"Target Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).targetPort},set value(N){i(g).targetPort=N}}),f(A);var E=P(A,2),O=b(E),D=b(O);D.__click=[Gr,s,g],f(O),f(E),f(u),ne(()=>D.disabled=e.disabled),V(h,u)});var y=P(c,2),k=b(y);k.__click=[Yr,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);var Qr=(d,e,t)=>e(i(t)),$r=j('<div class="block port-grid svelte-1bq9jn6"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-1bq9jn6"><button class="btn btn-blank">Remove</button></div></div></div>'),el=(d,e)=>e(),tl=j('<div class="section"><div class="title">Ports</div> <!> <div class="bottom"><button class="btn btn-primary">Add Port</button></div></div>');function al(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X([])),a=ae(X([]));function n(){i(a).push({id:Math.random(),name:"",port:"",targetPort:80})}function s(h){q(a,i(a).filter(g=>g.id!==h.id),!0),l()}oe(()=>{q(a,[...t().map(h=>({...h,id:Math.random()}))],!0)});function l(){let h=i(a).map(({name:g,port:v,targetPort:u})=>({name:g,port:v,targetPort:u}));e.callback&&e.callback(h)}var o=tl(),c=P(b(o),2);ke(c,17,()=>i(a),_e,(h,g,v)=>{var u=$r(),r=b(u),m=b(r);Q(m,{label:"Name",onblur:()=>l(),get disabled(){return e.disabled},get value(){return i(g).name},set value(O){i(g).name=O}}),f(r);var p=P(r,2),_=b(p);Q(_,{label:"Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).port},set value(O){i(g).port=O}}),f(p);var S=P(p,2),C=b(S);Q(C,{label:"Target Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).targetPort},set value(O){i(g).targetPort=O}}),f(S);var A=P(S,2),L=b(A),E=b(L);E.__click=[Qr,s,g],f(L),f(A),f(u),ne(()=>E.disabled=e.disabled),V(h,u)});var y=P(c,2),k=b(y);k.__click=[el,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);var nl=(d,e,t)=>e(i(t)),sl=j('<div class="block port-grid svelte-1n04um3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-1n04um3"><button class="btn btn-blank">Remove</button></div></div></div>'),il=(d,e)=>e(),rl=j('<div class="section"><div class="title">Ports</div> <!> <div class="bottom"><button class="btn btn-primary">Add Port</button></div></div>');function ll(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X([])),a=ae(X([]));function n(){i(a).push({id:Math.random(),port:"",targetPort:80})}function s(h){q(a,i(a).filter(g=>g.id!==h.id),!0),l()}oe(()=>{q(a,[...t().map(h=>({...h,id:Math.random()}))],!0)});function l(){let h=i(a).map(({name:g,port:v,targetPort:u})=>({name:g,port:v,targetPort:u}));e.callback&&e.callback(h)}var o=rl(),c=P(b(o),2);ke(c,17,()=>i(a),_e,(h,g,v)=>{var u=sl(),r=b(u),m=b(r);Q(m,{label:"Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).port},set value(L){i(g).port=L}}),f(r);var p=P(r,2),_=b(p);Q(_,{label:"Target Port",onblur:()=>l(),onClose:()=>l(),get disabled(){return e.disabled},get value(){return i(g).targetPort},set value(L){i(g).targetPort=L}}),f(p);var S=P(p,2),C=b(S),A=b(C);A.__click=[nl,s,g],f(C),f(S),f(u),ne(()=>A.disabled=e.disabled),V(h,u)});var y=P(c,2),k=b(y);k.__click=[il,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);var ol=j('<div class="section"><div class="block colum-1"><!></div></div>');function ga(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X({}));oe(()=>{t()&&q(a,{...t()},!0)});function n(){t(i(a))}var s=ol(),l=b(s),o=b(l);rt(o,na(()=>e.option,{get disabled(){return e.disabled},callback:c=>q(a,c,!0)&&n(),get value(){return i(a)},set value(c){q(a,c,!0)}})),f(l),f(s),V(d,s),ue()}var dl=j('<div class="section"><div class="block colum-3"><div class="r-input svelte-1501qgn"> </div></div></div>');function $e(d,e){ce(e,!0);var t=dl(),a=b(t),n=b(a),s=b(n,!0);f(n),f(a),f(t),ne(()=>he(s,e.value)),V(d,t),ue()}const ot={Active:{status:"Active",className:"status-active",description:(d,e)=>{var a,n,s;return`Service is active (${((s=(n=(a=e==null?void 0:e.subsets)==null?void 0:a[0])==null?void 0:n.addresses)==null?void 0:s.length)||0} endpoints available)`}},Degraded:{status:"Degraded",className:"status-degraded",description:(d,e)=>{var n,s,l,o,c,y;const t=((l=(s=(n=e==null?void 0:e.subsets)==null?void 0:n[0])==null?void 0:s.addresses)==null?void 0:l.length)||0,a=((y=(c=(o=e==null?void 0:e.subsets)==null?void 0:o[0])==null?void 0:c.notReadyAddresses)==null?void 0:y.length)||0;return`${a}/${t+a} endpoints not ready`}},Error:{status:"Error",className:"status-error",description:d=>{var e,t;return d.spec.selector?d.spec.type==="LoadBalancer"&&!((t=(e=d.status)==null?void 0:e.loadBalancer)!=null&&t.ingress)?"LoadBalancer IP is pending":"Service configuration is invalid (check ports or selectors)":"Service has no selector (cannot route traffic)"}},Pending:{status:"Pending",className:"status-pending",description:d=>d.spec.type==="LoadBalancer"?"Waiting for LoadBalancer IP assignment":"Service is initializing"}};class cl extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Endpoints]}getStatus(){var c,y,k,h,g,v,u,r;let e=this.resources.Endpoints.getRawList().find(m=>this.name===m.metadata.name),t=this.raw;const{spec:a={},status:n={}}=t;if(!a.selector||Object.keys(a.selector).length===0)return{...ot.Error,message:ot.Error.description(t)};if(a.type==="LoadBalancer"&&!((c=n.loadBalancer)!=null&&c.ingress))return{...ot.Pending,message:ot.Pending.description(t)};const s=((y=e==null?void 0:e.subsets)==null?void 0:y.length)>0,l=((g=(h=(k=e==null?void 0:e.subsets)==null?void 0:k[0])==null?void 0:h.addresses)==null?void 0:g.length)||0,o=((r=(u=(v=e==null?void 0:e.subsets)==null?void 0:v[0])==null?void 0:u.notReadyAddresses)==null?void 0:r.length)||0;return!s||l===0?{...ot.Error,message:"No endpoints available"}:o>0?{...ot.Degraded,message:ot.Degraded.description(t,e)}:{...ot.Active,message:ot.Active.description(t,e)}}getTableRow(){let e=this.raw,t={id:e.metadata.name,status:this.getStatus(),name:e.metadata.name,namespace:e.metadata.namespace,svcTarget:e.spec.ports.map(a=>`${a.targetPort}/${a.protocol}`).join(", "),selector:Object.entries(e.spec.selector||{}).map(([a,n])=>`${a}=${n}`).join(", "),type:e.spec.clusterIP&&e.spec.clusterIP==="None"?"Headless":e.spec.type,age:this.age};return t.status.message&&t.status.status!=="Active"&&(t.rowOption={className:"row-desc"},t.showDescription=!0),t}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"200px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Target",key:"svcTarget",align:"left",width:"100px"},{name:"Selector",key:"selector",align:"left"},{name:"Type",key:"type",align:"center",width:"100px"},{name:"Age",key:"age",align:"center",width:"100px",sortable:!0}]}getTableButtons(){return[{label:"Download YAML",icon:kt,action:e=>{}},{label:"Delete",icon:aa,action:e=>{console.log(e)}}]}getActions(){return["Detail","Yaml","Config","EditConfig","EditYaml","Clone","line","Download","Delete","Proxy"]}getIntro(e){return[{key:"Type",value:e.spec.type},{key:"Cluster IP:",value:e.spec.clusterIP},{key:"Session Affinity",value:e.spec.sessionAffinity}]}getDetailTabs(e){return[{id:"pods",title:"Pods",component:It,params:{params:{matchLabels:e.spec.selector}}},{id:"ports",title:"Ports",component:Oe,params:{header:[{name:"Name",key:"name",align:"left"},{name:"Port",key:"port",align:"left"},{name:"Protocol",key:"protocol",align:"left"},{name:"Target",key:"targetPort",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.spec.ports||[]}},{id:"selector",title:"Selectors",component:Oe,params:{header:[{name:"Key",key:"key",align:"left"},{name:"Value",key:"value",align:"left"}],buttons:[],menus:[],checkbox:!1,data:Reflect.ownKeys(e.spec.selector||{}).map(t=>({key:t,value:e.spec.selector[t]}))}},{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastTransitionTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.status.conditions||[]}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}isMultiFormDefinition(){return!0}getMultiFormDefinitions(){return{title:"Select Service Type",types:[{name:"ClusterIP",type:"ClusterIP",icon:"CI",description:"ClusterIP"},{name:"Headless",type:"Headless",icon:"H",description:"ClusterIP"},{name:"NodePort",type:"NodePort",icon:"NP",description:"NodePort"},{name:"LoadBalancer",type:"LoadBalancer",icon:"LB",description:"LoadBalancer"},{name:"ExternalName",type:"ExternalName",icon:"EN",description:"ExternalName"}]}}getDefinitionType(e){var t,a,n;return(t=e==null?void 0:e.spec)!=null&&t.clusterIP&&((a=e==null?void 0:e.spec)==null?void 0:a.clusterIP)==="None"?"Headless":((n=e==null?void 0:e.spec)==null?void 0:n.type)||"ClusterIP"}getFormDefinition(e){if(e==="ClusterIP")return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"type",component:$e,key:"spec.type"},{name:"selector",component:ga,key:"spec.selector"},{name:"ports",component:qr,key:"spec.ports"}]}];if(e==="Headless")return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"clusterIP",component:$e,key:"spec.clusterIP"},{name:"selector",component:ct,key:"spec.selector"},{name:"ports",component:ll,key:"spec.ports"}]}];if(e==="NodePort")return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"type",component:$e,key:"spec.type"},{name:"selector",component:ct,key:"spec.selector"},{name:"ports",component:Xr,key:"spec.ports"}]}];if(e==="LoadBalancer")return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"type",component:$e,key:"spec.type"},{name:"loadBalancerIP",component:be,option:{label:"loadBalancerIP",type:"text"},key:"spec.loadBalancerIP"},{name:"ports",component:al,key:"spec.ports"}]}];if(e==="ExternalName")return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"type",component:$e,key:"spec.type"},{name:"externalName",component:be,option:{label:"ExternalName",type:"text"},key:"spec.externalName"}]}]}}var ul=j('<div class="section"><div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div></div>');function ml(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([])),n=ae(X([])),s=ae(X({name:null,port:{number:null}}));oe(()=>{t()&&q(s,{name:t().name,port:{number:t().port.number}},!0)}),oe(()=>{Me.ready("Service",v=>{q(a,v.getAllRawList().map(u=>({name:u.metadata.name,value:u.metadata.name,data:u})),!0)})}),oe(()=>{if(i(s).name){let v=i(a).find(u=>u.value===i(s).name);v&&q(n,v.data.spec.ports.map(u=>({name:u.port,value:u.port,data:u})),!0)}});function l(){t({name:i(s).name,port:{number:i(s).port.number}})}var o=ul(),c=b(o),y=b(c),k=b(y);ge(k,{label:"Service",get options(){return i(a)},get disabled(){return e.disabled},onClose:l,get value(){return i(s).name},set value(v){i(s).name=v}}),f(y);var h=P(y,2),g=b(h);ge(g,{label:"Port",get options(){return i(n)},get disabled(){return e.disabled},onClose:l,get value(){return i(s).port.number},set value(v){i(s).port.number=v}}),f(h),f(c),f(o),V(d,o),ue()}var vl=(d,e,t)=>e(i(t)),pl=j('<div class="block port-grid svelte-3b1ok7"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-3b1ok7"><button class="btn btn-blank">Remove</button></div></div></div>'),fl=(d,e)=>e(),hl=j('<div class="section"><div class="title">Paths</div> <!> <div class="bottom"><button class="btn btn-primary">Add Path</button></div></div>');function gl(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X([])),a=ae(X([])),n=ae(X([])),s=[{name:"ImplementationSpecific",value:"ImplementationSpecific"},{name:"Prefix",value:"Prefix"},{name:"Exact",value:"Exact"}];function l(){i(a).push({id:Math.random(),backend:{service:{name:"",port:{number:80}}},path:"",pathType:""})}function o(u){q(a,i(a).filter(r=>r.id!==u.id),!0),y()}oe(()=>{t()&&q(a,t().map(u=>({id:Math.random(),backend:{service:{name:u.backend.service.name,port:{number:u.backend.service.port.number}}},path:u.path,pathType:u.pathType})),!0)}),oe(()=>{Me.ready("Service",u=>{q(n,u.getAllRawList().map(r=>({name:r.metadata.name,value:r.metadata.name,ports:(r.spec.ports||[]).map(m=>({name:m.port,value:m.port}))})),!0)})});function c(u){let r=(i(n)||[]).find(m=>m.value===u);return r?r.ports:[]}function y(){let u=i(a).map(r=>({backend:{service:{name:r.backend.service.name,port:{number:r.backend.service.port.number}}},path:r.path,pathType:r.pathType}));e.callback&&e.callback(u)}var k=hl(),h=P(b(k),2);ke(h,17,()=>i(a),_e,(u,r,m)=>{var p=pl(),_=b(p),S=b(_);ge(S,{label:"PathType",options:s,onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).pathType},set value(x){i(r).pathType=x}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"Path",get disabled(){return e.disabled},onblur:y,get value(){return i(r).path},set value(x){i(r).path=x}}),f(C);var L=P(C,2),E=b(L);ge(E,{get options(){return i(n)},label:"Service",onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).backend.service.name},set value(x){i(r).backend.service.name=x}}),f(L);var O=P(L,2),D=b(O);const N=et(()=>c(i(r).backend.service.name));ge(D,{label:"Port",get options(){return i(N)},onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).backend.service.port.number},set value(x){i(r).backend.service.port.number=x}}),f(O);var G=P(O,2),R=b(G),M=b(R);M.__click=[vl,o,r],f(R),f(G),f(p),ne(()=>M.disabled=e.disabled),V(u,p)});var g=P(h,2),v=b(g);v.__click=[fl,l],f(g),f(k),ne(()=>v.disabled=e.disabled),V(d,k),ue()}xe(["click"]);var bl=(d,e,t)=>e(i(t)),yl=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block colum-2"><div class="field"><!></div></div> <div class="block colum-1"><!></div></div></div>'),kl=(d,e)=>e(),_l=j('<div class="section"><div class="title">Ingress Rules</div> <!> <div class="bottom"><button class="btn btn-primary">Add Rule</button></div></div>');function wl(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));oe(()=>{t()&&q(a,t().map(h=>{var g;return{id:Math.random(),host:h.host,http:{paths:((g=h==null?void 0:h.http)==null?void 0:g.paths)||[]}}}),!0)});function n(){i(a).push({id:Math.random(),host:null,http:{paths:[]}})}function s(h){q(a,i(a).filter(g=>g.id!==h.id),!0),l()}function l(){let h=i(a).map(g=>({host:g.host,http:{paths:g.http.paths}}));t(h)}var o=_l(),c=P(b(o),2);ke(c,17,()=>i(a),_e,(h,g,v)=>{var u=yl(),r=b(u),m=b(r);m.__click=[bl,s,g];var p=b(m);qe(p),f(m);var _=P(m,2),S=b(_),C=b(S);Q(C,{label:"Host",onblur:l,get disabled(){return e.disabled},get value(){return i(g).host},set value(E){i(g).host=E}}),f(S),f(_);var A=P(_,2),L=b(A);gl(L,{get disabled(){return e.disabled},get value(){return i(g).http.paths},callback:E=>(i(g).http.paths=E)&&l()}),f(A),f(r),f(u),ne(()=>m.disabled=e.disabled),V(h,u)});var y=P(c,2),k=b(y);k.__click=[kl,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);var xl=j('<div class="section"><div class="block port-grid svelte-1n04um3"><div class="field"><div class="sub-title">Secret</div> <!></div> <div class="field"><div class="sub-title">Hosts</div> <!></div></div></div>');function Sl(d,e){ce(e,!0);let t=ae(X({secretName:"",hosts:[]})),a=ae(X([]));oe(()=>{e.value&&q(t,{secretName:e.value.secretName,hosts:e.value.hosts||[""]},!0)}),oe(()=>{Me.ready("Secret",h=>{q(a,h.getAllRawList().map(g=>({name:g.metadata.name,value:g.metadata.name})),!0)})});function n(){e.callback&&e.callback({secretName:i(t).secretName,hosts:i(t).hosts||[""]})}var s=xl(),l=b(s),o=b(l),c=P(b(o),2);ge(c,{label:"Secret Name",get options(){return i(a)},onClose:()=>n(),get disabled(){return e.disabled},get value(){return i(t).secretName},set value(h){i(t).secretName=h}}),f(o);var y=P(o,2),k=P(b(y),2);xt(k,{get disabled(){return e.disabled},callback:()=>n(),get value(){return i(t).hosts},set value(h){i(t).hosts=h}}),f(y),f(l),f(s),V(d,s),ue()}var Rl=(d,e,t)=>e(i(t)),Cl=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <div class="block colum-1"><!></div></div></div>'),Pl=(d,e)=>e(),Dl=j('<div class="section"><div class="title">Ingress TLS</div> <!> <div class="bottom"><button class="btn btn-primary">Add Rule</button></div></div>');function Al(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));oe(()=>{t()&&q(a,(t()||[]).map(h=>({id:Math.random(),hosts:h.hosts||[""],secretName:h.secretName})),!0)});function n(){i(a).push({id:Math.random(),hosts:[""],secretName:""})}function s(h){q(a,i(a).filter(g=>g.id!==h.id),!0),l()}function l(){t((i(a)||[]).map(h=>({hosts:h.hosts||[""],secretName:h.secretName})))}var o=Dl(),c=P(b(o),2);ke(c,17,()=>i(a),_e,(h,g)=>{var v=Cl(),u=b(v),r=b(u);r.__click=[Rl,s,g];var m=b(r);qe(m),f(r);var p=P(r,2),_=b(p);Sl(_,{get disabled(){return e.disabled},get value(){return i(g)},callback:S=>Object.assign(i(g),S)&&l()}),f(p),f(u),f(v),ne(()=>r.disabled=e.disabled),V(h,v)});var y=P(c,2),k=b(y);k.__click=[Pl,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);class Nl extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Service,this.resources.Endpoints]}getStatus(){var u,r,m,p;let e=this.raw;const{metadata:t,status:a,spec:n}=this.raw;let s=this.getBackendServiceNames(e),l=this.resources.Service.getAllRawList().filter(_=>s.includes(_.metadata.name)),o=this.resources.Endpoints.getAllRawList().filter(_=>s.includes(_.metadata.name)),c=[];if(t.deletionTimestamp)return{status:"Terminating",className:"status-terminating",description:`Ingress 正在删除 (删除时间: ${t.deletionTimestamp})，等待关联资源清理完成`};const y=(u=a==null?void 0:a.conditions)==null?void 0:u.find(_=>_.type==="Failed"&&_.status==="True");if(y)return{status:"Failed",className:"status-failed",description:`配置失败: ${y.message} (错误代码: ${y.reason})`};if(!((m=(r=a==null?void 0:a.loadBalancer)==null?void 0:r.ingress)!=null&&m.length)){const _=c.filter(S=>S.type==="Warning"&&S.reason==="Pending");return{status:"Pending",className:"status-pending",description:_.length?`等待负载均衡器配置: ${_[0].message}`:"等待负载均衡器分配IP/端口"}}const k=l.filter(_=>{var C;const S=o.find(A=>A.metadata.name===_.metadata.name);return!S||((C=S.subsets)==null?void 0:C.some(A=>{var L;return((L=A.addresses)==null?void 0:L.length)===0}))});if(k.length>0)return{status:"Unhealthy",className:"status-unhealthy",description:`${k.length} 个后端服务不可用 (例如: ${k[0].metadata.name})`};const h=((p=n.tls)==null?void 0:p.filter(_=>{var A;const S=(A=relatedData.secrets)==null?void 0:A.find(L=>L.metadata.name===_.secretName);return S?new Date(S.data["tls.crt"])<new Date:!1}))||[];if(h.length>0)return{status:"Expired",className:"status-expired",description:`${h.length} 个证书已过期 (例如: ${h[0].secretName})`};const g=a.observedGeneration&&t.generation!==a.observedGeneration,v=c.filter(_=>_.reason==="ResourceUpdate"&&_.type==="Warning");return g||v.length>0?{status:"OutOfSync",className:"status-out-of-sync",description:`配置未同步 (当前版本: ${a.observedGeneration}, 期望版本: ${t.generation})`}:{status:"Active",className:"status-active",description:`Ingress 运行正常，已关联 ${l.length} 个后端服务，LB地址: ${a.loadBalancer.ingress[0].ip}`}}getTableRow(){var o,c;let e=this.raw;const t=e.metadata,a=e.spec,n=[],s=this.getStatus();a.rules&&a.rules.forEach(y=>{y.http&&y.http.paths&&y.http.paths.forEach(k=>{n.push({url:`http://${y.host}${k.path}`,service:k.backend.serviceName,serviceTarget:`${k.backend.serviceName}:${k.backend.servicePort}`})})});let l={id:t.name,status:s,name:t.name,namespace:t.namespace,target:n,default:!!a.backend,defaultService:(o=a.backend)==null?void 0:o.serviceName,defaultServicePort:(c=a.backend)==null?void 0:c.servicePort,age:this.age};return l.status.status!=="Active"&&l.status.description&&(l.rowOption={className:"row-desc"},l.status.showDescription=!0),l}getBackendServiceNames(){var a,n,s;let e=this.raw;const t=new Set;for(const l of((a=e.spec)==null?void 0:a.rules)||[])for(const o of((n=l.http)==null?void 0:n.paths)||[])(s=o.backend)!=null&&s.serviceName&&t.add(o.backend.serviceName);return Array.from(t)}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"100px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"150px"},{name:"Target",key:"target",align:"left"},{name:"Default",key:"default",align:"center",width:"100px"},{name:"Age",key:"age",align:"right",width:"100px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){var a;let t=[];if(e)return(a=e.spec)==null||a.rules.forEach(n=>{n==null||n.http.paths.forEach(s=>{t.push({path:`http://${n.host}${s.path}`,pathType:s.pathType,serviceName:s.backend.serviceName,servicePort:s.backend.servicePort})})}),[{id:"rules",title:"Rules",component:Oe,params:{header:[{name:"Path Type",key:"pathType",align:"left"},{name:"Path",key:"path",align:"left",linkable:!0,link:n=>n.path},{name:"Target Service",key:"serviceName",align:"left",linkable:!0,link:n=>`/services/${n.serviceName}`},{name:"Port",key:"servicePort",align:"left"}],buttons:[],menus:[],checkbox:!1,data:t}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"ingressClassName",component:be,option:{label:"ingressClassName",type:"text"},key:"spec.ingressClassName"},{name:"defaultBackend",component:ml,key:"spec.defaultBackend.service"},{name:"rules",component:wl,key:"spec.rules"},{name:"tls",component:Al,key:"spec.tls"}]}]}}var Tl=(d,e,t)=>e(i(t)),El=j('<div class="block env-grid svelte-votd8h"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-votd8h"><button class="btn btn-blank">Remove</button></div></div></div>'),Il=(d,e)=>e(d),Ol=(d,e)=>e(),Ll=j('<div class="section"><div class="title"> </div> <!> <div class="bottom"><input type="file" style="display: none"> <button class="btn btn-primary">Add</button> <button class="btn btn-primary">Add From File</button></div></div>');function Qa(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({})),a=ae(X([])),n=null;function s(){i(a).push({id:Xe.getRandomId(),name:"",value:""})}function l(p){let _=i(a).findIndex(S=>S.id===p.id);_!==-1&&(i(a).splice(_,1),c())}function o(p){let _=p.target.files[0];if(!_){console.log("未选择文件");return}const S=new FileReader;S.onload=C=>{const A=C.target.result.split(",")[1];i(a).push({id:Xe.getRandomId(),name:_.name,value:A})},S.onerror=C=>{console.error("文件读取失败:",C)},S.readAsDataURL(_)}oe(()=>{q(a,Reflect.ownKeys(t()).map(p=>({id:p,name:p,value:t()[p]})),!0)});function c(){let p={};i(a).forEach(_=>{_.name&&(p[_.name]=_.value)}),t(p),e.callback&&e.callback(p)}var y=Ll(),k=b(y),h=b(k,!0);f(k);var g=P(k,2);ke(g,17,()=>i(a),_e,(p,_,S)=>{var C=El(),A=b(C),L=b(A);Q(L,{label:"Key",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(_).name},set value(R){i(_).name=R}}),f(A);var E=P(A,2),O=b(E);Q(O,{label:"Value",onblur:c,get disabled(){return e.disabled},get value(){return i(_).value},set value(R){i(_).value=R}}),f(E);var D=P(E,2),N=b(D),G=b(N);G.__click=[Tl,l,_],f(N),f(D),f(C),ne(()=>G.disabled=e.disabled),V(p,C)});var v=P(g,2),u=b(v);u.__change=[Il,o],ta(u,p=>n=p,()=>n);var r=P(u,2);r.__click=[Ol,s];var m=P(r,2);m.__click=()=>n&&n.click(),f(v),f(y),ne(()=>{he(h,e.label),r.disabled=e.disabled,m.disabled=e.disabled}),V(d,y),ue()}xe(["click","change"]);var Ml=(d,e,t)=>e(i(t)),zl=j('<div class="block env-grid svelte-8xsqzu"><div class="field"><!></div> <div class="field"><div class="data-bytes svelte-8xsqzu"> </div></div> <div class="field"><div class="remove svelte-8xsqzu"><button class="btn btn-blank">Remove</button></div></div></div>'),Bl=(d,e)=>e(d),Ul=(d,e)=>e(),Fl=j('<div class="section"><div class="title"> </div> <!> <div class="bottom"><input type="file" style="display: none"> <button class="btn btn-primary"> </button></div></div>');function Vl(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({})),a=ae(X([])),n=null;function s(){n&&n.click()}function l(p){let _=i(a).findIndex(S=>S.id===p.id);_!==-1&&i(a).splice(_,1),c()}function o(p){let _=p.target.files[0];if(!_){console.log("未选择文件");return}const S=new FileReader;S.onload=C=>{const A=C.target.result.split(",")[1];i(a).push({id:Xe.getRandomId(),name:_.name,value:A})},S.onerror=C=>{console.error("文件读取失败:",C)},S.readAsDataURL(_)}oe(()=>{q(a,Reflect.ownKeys(t()).map(p=>({id:p,name:p,value:t()[p]})),!0)});function c(){let p={};i(a).forEach(_=>{_.name&&(p[_.name]=_.value)}),t(p),e.callback&&e.callback(p)}var y=Fl(),k=b(y),h=b(k,!0);f(k);var g=P(k,2);ke(g,17,()=>i(a),_e,(p,_,S)=>{var C=zl(),A=b(C),L=b(A);Q(L,{label:"Key",onblur:()=>c(),get disabled(){return e.disabled},get value(){return i(_).name},set value(M){i(_).name=M}}),f(A);var E=P(A,2),O=b(E),D=b(O);f(O),f(E);var N=P(E,2),G=b(N),R=b(G);R.__click=[Ml,l,_],f(G),f(N),f(C),ne(M=>{he(D,`Binary Data: ${M??""} bytes`),R.disabled=e.disabled},[()=>Xe.getBase64SizeInBytes(i(_).value)]),V(p,C)});var v=P(g,2),u=b(v);u.__change=[Bl,o],ta(u,p=>n=p,()=>n);var r=P(u,2);r.__click=[Ul,s];var m=b(r);f(r),f(v),f(y),ne(()=>{he(h,e.label),r.disabled=e.disabled,he(m,`Add ${e.label??""}`)}),V(d,y),ue()}xe(["click","change"]);var jl=j('<div class="prop svelte-lu2rul"><div class="key svelte-lu2rul"><div class="key-name svelte-lu2rul"> </div> <div class="key-copy svelte-lu2rul"><!></div></div> <div class="body svelte-lu2rul"><pre class="value"><!></pre></div></div>'),Kl=j('<div class="no-record svelte-lu2rul">No data to display</div>');function ba(d,e){ce(e,!0);let t=et(()=>e.configmap.data?Reflect.ownKeys(e.configmap.data||{}).map(o=>({key:o,type:"data",value:e.configmap.data[o]})):e.configmap.binaryData?Reflect.ownKeys(e.configmap.binaryData||{}).map(o=>({key:o,type:"binary",value:`<span><</span>Binary Data: ${Xe.getBase64SizeInBytes(e.configmap.binaryData[o])} bytes<span>></span>`})):[]);var a=vt(),n=Ve(a);{var s=o=>{var c=vt(),y=Ve(c);ke(y,17,()=>i(t),_e,(k,h)=>{let g=()=>i(h).key,v=()=>i(h).value,u=()=>i(h).type;var r=jl(),m=b(r),p=b(m),_=b(p,!0);f(p);var S=P(p,2),C=b(S);{var A=D=>{_n(D,{get content(){return v()}})};ye(C,D=>{u()==="data"&&D(A)})}f(S),f(m);var L=P(m,2),E=b(L),O=b(E);Ha(O,v),f(E),f(L),f(r),ne(()=>he(_,g())),V(k,r)}),V(o,c)},l=o=>{var c=Kl();V(o,c)};ye(n,o=>{i(t).length>0?o(s):o(l,!1)})}V(d,a),ue()}class Hl extends Be{constructor(e,t){super(e,t)}getTableRow(){let e=this.raw;return{id:e.metadata.name,name:e.metadata.name,namespace:e.metadata.namespace,data:Object.keys(e.data||{}).join(", "),age:this.age}}getTableHeader(){return[{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left"},{name:"Data",key:"data",align:"left",sortable:!0},{name:"Age",key:"age",align:"right",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"data",title:"Data",component:ba,params:{configmap:e}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"data",component:Qa,key:"data",defaultValue(){return[]}},{name:"binaryData",component:Vl,key:"binaryData",defaultValue(){return[]}}]}}const Ze={Active:{status:"Active",class:"status-active",description:d=>`Container '${d.name}' is running and ready`},Succeeded:{status:"Succeeded",class:"status-succeeded",description:d=>`Container '${d.name}' exited successfully (code: 0)`},Error:{status:"Error",class:"status-error",description:d=>{const{reason:e,exitCode:t}=d.state.terminated||d.state.waiting||{},a=d.restartCount||0,n=e==="OOMKilled"?"Out of memory killed":e==="CrashLoopBackOff"?`Crashed repeatedly (restarts: ${a})`:`Exited with error code ${t}`;return`Container '${d.name}' failed: ${n}`}},Transitioning:{status:"Transitioning",class:"status-transitioning",description:d=>{const{reason:e}=d.state.waiting||{};return e==="ContainerCreating"?`Container '${d.name}' is starting`:`Container '${d.name}' is terminating`}},Unknown:{status:"Unknown",class:"status-unknown",description:d=>`Container '${d.name}' state is unknown`}};class Wl extends Be{constructor(e,t){super(e,t)}getStatus(){let e=this.raw;const{state:t={},restartCount:a=0}=e||{},{waiting:n,running:s,terminated:l}=t;return l?l.exitCode===0?{...Ze.Succeeded,message:Ze.Succeeded.description(e)}:{...Ze.Error,message:Ze.Error.description(e)}:n?["CrashLoopBackOff","ImagePullBackOff","ErrImagePull","OOMKilled"].includes(n.reason)?{...Ze.Error,message:Ze.Error.description(e)}:{...Ze.Transitioning,message:Ze.Transitioning.description(e)}:s?e.ready?{...Ze.Active,message:Ze.Active.description(e)}:{...Ze.Transitioning,message:Ze.Transitioning.description(e)}:{...Ze.Unknown,message:Ze.Unknown.description(e)}}getTableRow(){var t,a,n,s;let e={...this.raw,id:this.raw.name,status:this.getStatus(),age:He.formatAge(((t=this.raw.state.running)==null?void 0:t.startedAt)||((a=this.raw.state.waiting)==null?void 0:a.startedAt)||((n=this.raw.state.terminated)==null?void 0:n.startedAt)||((s=this.raw.state.terminated)==null?void 0:s.finishedAt)||this.raw.state.termin)};return e.status.status!=="Active"&&e.status.message&&(e.rowOption={className:"row-desc"},e.status.showDescription=!0),e}}var ql=j('<div><div class="icon svelte-1ciaxs0"><!></div> <div class="name svelte-1ciaxs0"> </div></div>'),Gl=j('<div class="stat svelte-1ciaxs0"><div class="stat-item svelte-1ciaxs0"><div class="label svelte-1ciaxs0">CPU</div> <div class="top svelte-1ciaxs0"><div class="left svelte-1ciaxs0">Used</div> <div class="percent svelte-1ciaxs0"><span class="svelte-1ciaxs0"> </span> <span class="svelte-1ciaxs0">/</span> <span class="svelte-1ciaxs0"> </span> <span class="svelte-1ciaxs0"> </span></div></div> <div class="bar svelte-1ciaxs0"><div class="bar-in svelte-1ciaxs0"></div></div></div> <div class="stat-item svelte-1ciaxs0"><div class="label svelte-1ciaxs0">Memory</div> <div class="top svelte-1ciaxs0"><div class="left svelte-1ciaxs0">Used</div> <div class="percent svelte-1ciaxs0"><span class="svelte-1ciaxs0"> </span> <span class="svelte-1ciaxs0">/</span> <span class="svelte-1ciaxs0"> </span> <span class="svelte-1ciaxs0"> </span></div></div> <div class="bar svelte-1ciaxs0"><div class="bar-in svelte-1ciaxs0"></div></div></div> <div class="stat-item svelte-1ciaxs0"><div class="label svelte-1ciaxs0">Pods</div> <div class="top svelte-1ciaxs0"><div class="left svelte-1ciaxs0">Used</div> <div class="percent svelte-1ciaxs0"><span class="svelte-1ciaxs0"> </span> <span class="svelte-1ciaxs0">/</span> <span class="svelte-1ciaxs0"> </span> <span class="svelte-1ciaxs0"> </span></div></div> <div class="bar svelte-1ciaxs0"><div class="bar-in svelte-1ciaxs0"></div></div></div></div>'),Zl=j('<div class="pressure svelte-1ciaxs0"></div> <!>',1);function Yl(d,e){ce(e,!0);let t=ae(X([])),a=ae(null);oe(()=>{q(t,e.node.raw.status.conditions.filter(c=>c.type.indexOf("Pressure")!==-1),!0),q(a,e.node.getTableRow(),!0)});var n=Zl(),s=Ve(n);ke(s,21,()=>i(t),_e,(c,y)=>{var k=ql(),h=b(k),g=b(h);{var v=p=>{wt(p)},u=p=>{wt(p)};ye(g,p=>{i(y).status==="True"?p(v):p(u,!1)})}f(h);var r=P(h,2),m=b(r,!0);f(r),f(k),ne(()=>{je(k,1,Ke(["pressure-item",i(y).status==="True"&&"error"]),"svelte-1ciaxs0"),he(m,i(y).type)}),V(c,k)}),f(s);var l=P(s,2);{var o=c=>{var y=Gl(),k=b(y),h=P(b(k),2),g=P(b(h),2),v=b(g),u=b(v,!0);f(v);var r=P(v,4),m=b(r,!0);f(r);var p=P(r,2),_=b(p);f(p),f(g),f(h);var S=P(h,2),C=b(S);f(S),f(k);var A=P(k,2),L=P(b(A),2),E=P(b(L),2),O=b(E),D=b(O,!0);f(O);var N=P(O,4),G=b(N,!0);f(N);var R=P(N,2),M=b(R);f(R),f(E),f(L);var x=P(L,2),W=b(x);f(x),f(A);var se=P(A,2),z=P(b(se),2),te=P(b(z),2),K=b(te),ie=b(K,!0);f(K);var B=P(K,4),U=b(B,!0);f(B);var me=P(B,2),de=b(me);f(me),f(te),f(z);var ee=P(z,2),Se=b(ee);f(ee),f(se),f(y),ne(()=>{he(u,i(a).cpu.cpuUsed),he(m,i(a).cpu.cpuTotal),he(_,`${i(a).cpu.cpuPercent??""}%`),Nt(C,`width:${i(a).cpu.cpuPercent??""}%`),he(D,i(a).cpu.memoryUsed),he(G,i(a).cpu.memoryTotal),he(M,`${i(a).cpu.memoryPercent??""}%`),Nt(W,`width:${i(a).cpu.memoryPercent??""}%`),he(ie,i(a).cpu.podCount),he(U,i(a).cpu.podTotal),he(de,`${i(a).cpu.podPercent??""}%`),Nt(Se,`width:${i(a).cpu.podPercent??""}%`)}),V(c,y)};ye(l,c=>{i(a)&&c(o)})}V(d,n),ue()}class Jl extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod,this.resources.NodeMetrics]}getStatus(){var u,r;const e=this.raw,t=((u=e.status)==null?void 0:u.conditions)||[],a=((r=e.metadata)==null?void 0:r.annotations)||{},n=t.find(m=>m.type==="Ready"),s=t.find(m=>m.type==="MemoryPressure"),l=t.find(m=>m.type==="DiskPressure"),o=t.find(m=>m.type==="PIDPressure"),c=[{check:()=>!!e.metadata.deletionTimestamp,status:"Terminating",className:"terminating",description:`Node is terminating, expected completion time: ${h(e.metadata.deletionTimestamp)}`},{check:()=>{var m;return(m=a["cattle.io/status"])==null?void 0:m.includes("provisioning")},status:"Provisioning",className:"provisioning",description:"Node resources are being created, waiting for cloud provider to allocate infrastructure"},{check:()=>{var m;return(m=a["cattle.io/status"])==null?void 0:m.includes("initializing")},status:"Initializing",className:"initializing",description:"Installing Kubernetes components (kubelet, CNI, CSI, etc.)"},{check:()=>(n==null?void 0:n.status)==="False"&&n.reason==="KubeletNotReady",status:"Error",className:"error",description:`Kubelet error: ${n.message} (last heartbeat: ${k(n.lastHeartbeatTime)})`},{check:()=>[s,l,o].some(m=>(m==null?void 0:m.status)==="True"),status:"Unavailable",className:"unavailable",description:`Resource pressure: ${[s,l,o].filter(m=>(m==null?void 0:m.status)==="True").map(m=>`${m.type} (${m.reason})`).join(", ")}`},{check:()=>{var m;return((m=e.metadata.annotations)==null?void 0:m["kubectl.kubernetes.io/draining"])==="true"},status:"Draining",className:"draining",description:`Evicting pods, ${g(e)} pods evicted`},{check:()=>e.spec.unschedulable===!0,status:"Cordoned",className:"cordoned",description:"Node is cordoned, no new pods will be scheduled"},{check:()=>(n==null?void 0:n.status)==="Unknown"&&y(n.lastHeartbeatTime)>5,status:"Disconnected",className:"disconnected",description:`Node disconnected (last seen: ${k(n.lastHeartbeatTime)})`},{check:()=>(n==null?void 0:n.status)==="True",status:"Active",className:"active",description:`Node is active, ready for ${y(n.lastTransitionTime)} minutes`},{check:()=>!0,status:"Unknown",className:"unknown",description:"Node status unknown, check API data"}];function y(m){if(!m)return"N/A";const p=Date.now()-new Date(m).getTime();return Math.floor(p/1e3/60)}function k(m){return new Date(m).toLocaleTimeString()}function h(m){if(!m)return"N/A";const p=e.metadata.deletionGracePeriodSeconds||30,_=new Date(m).getTime()+p*1e3;return Math.ceil((_-Date.now())/1e3)+" 秒"}function g(m){var p,_;return((_=(p=m.metadata.annotations)==null?void 0:p["kubectl.kubernetes.io/evicted-pods"])==null?void 0:_.split(",").length)||0}const v=c.find(m=>m.check());return{status:v.status,className:`status-${v.className}`,description:v.description}}getTableRow(){var c,y,k,h,g;let e=this.resources.Pod.getAllRawList();const t=this.resources.NodeMetrics.getAllRawList(),a=this.raw;let n={cpuTotal:He.unitConvert.cpu.parse(((c=a.status.capacity)==null?void 0:c.cpu)||"0"),cpuUsed:0,cpuPercent:0,memoryTotal:He.unitConvert.memory.parse(((y=a.status.capacity)==null?void 0:y.memory)||"0"),memoryUsed:0,memoryPercent:0,podTotal:a.status.capacity.pods,podCount:0,podPercent:0};const s=a.metadata.name,l=t.find(v=>v.metadata.name===s);l&&(n.cpuUsed=He.unitConvert.cpu.parse(l.usage.cpu||"0"),n.memoryUsed=He.unitConvert.memory.parse(l.usage.memory||"0")),e.forEach(v=>{v.spec.nodeName===s&&n.podCount++}),n.cpuPercent=He.unitConvert.format(n.cpuUsed/n.cpuTotal*100),n.memoryPercent=He.unitConvert.format(n.memoryUsed/n.memoryTotal*100),n.podPercent=He.unitConvert.format(n.podCount/n.podTotal*100),n.cpuUsed=He.unitConvert.format(n.cpuUsed),n.memoryUsed=He.unitConvert.format(n.memoryUsed),n.podCount=He.unitConvert.format(n.podCount),n.podTotal=He.unitConvert.format(n.podTotal),n.memoryTotal=He.unitConvert.format(n.memoryTotal),n.cpuTotal=He.unitConvert.format(n.cpuTotal);let o={id:s,status:this.getStatus(),name:s,roles:this.getNodeRoles().join(", "),version:((k=a.status.nodeInfo)==null?void 0:k.kubeletVersion)||"Unknown",ip:this.getNodeIPs(),os:((h=a.status.nodeInfo)==null?void 0:h.operatingSystem)||"Unknown",cpu:n,ram:n,pods:n,age:this.age,taint:{items:(((g=a.spec)==null?void 0:g.taints)||[]).map(v=>`${v.effect}:${v.key}=${v.value}`)}};return o.status.message&&o.status.status!=="Active"&&(o.rowOption={className:"row-desc"},o.showDescription=!0),o.taint.items.length>0&&(o.rowOption={className:"row-desc"}),o}getNodeRoles(){let e=this.raw;return Object.keys(e.metadata.labels||{}).filter(t=>t.startsWith("node-role.kubernetes.io/")).map(t=>t.split("/")[1])}getNodeIPs(){var n,s;const t=this.raw.status.addresses||[];return(n=t.find(l=>l.type==="ExternalIP"))!=null&&n.address,`${((s=t.find(l=>l.type==="InternalIP"))==null?void 0:s.address)||""}`}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Roles",key:"roles",align:"left",width:"100px"},{name:"Version",key:"version",align:"left",width:"70px"},{name:"Internal IP ",key:"ip",align:"center",width:"200px"},{name:"OS ",key:"os",align:"left",width:"80px"},{name:"CPU ",key:"cpu",align:"center",width:"140px"},{name:"RAM ",key:"ram",align:"center",width:"140px"},{name:"Pods",key:"pods",align:"center",width:"140px"},{name:"Age",key:"age",align:"right",width:"100px",sortable:!0}]}getTableButtons(){return[{label:"Cordon",icon:kt,action:e=>{}},{label:"Drain",icon:kt,action:e=>{}},{label:"Download YAML",icon:kt,action:e=>{}},{label:"Delete",icon:aa,action:e=>{console.log(e)}}]}getCreatable(){return null}getIntro(e){var t,a;return[{key:"External IP",value:"--"},{key:"Internal IP",value:"--"},{key:"Version",value:e.status.nodeInfo.kubeletVersion},{key:"OS",value:e.status.nodeInfo.osImage},{key:"Container Runtime",value:(a=(t=e.status.nodeInfo)==null?void 0:t.containerRuntimeVersion)==null?void 0:a.split("/").pop()}]}getDetailTabs(e){return[{id:"pods",title:"Pods",component:It,params:{params:{nodeName:e.metadata.name}}},{id:"info",title:"Info",component:Oe,params:{header:[{name:"Prop",key:"prop",align:"left"},{name:"Value",key:"value",align:"left"}],buttons:[],menus:[],checkbox:!1,data:Reflect.ownKeys(e.status.nodeInfo||{}).map(t=>({prop:t,value:e.status.nodeInfo[t]}))}},{id:"images",title:"Image",component:Oe,params:{header:[{name:"Name",key:"name",align:"left"},{name:"Size",key:"size",align:"left"}],buttons:[],menus:[],checkbox:!1,data:(e.status.images||[]).map(t=>({name:t.names.join(";"),size:He.formatBytes(t.sizeBytes)}))}},{id:"taint",title:"Taint",component:Oe,params:{header:[{name:"Key",key:"key",align:"left"},{name:"Value",key:"value",align:"left"},{name:"Effect",key:"effect",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.spec.taints||[]}},{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastTransitionTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.status.conditions||[]}}]}getDetailComponents(e){return[{component:Yl,params:{node:e}}]}}class Xl extends Be{constructor(e,t){super(e,t)}}var Ql=j('<div><div class="icon"><!></div> <div class="name"> </div></div>'),$l=j('<div class="pressure"></div>');function eo(d,e){let t=X([]);var a=$l();ke(a,21,()=>t,_e,(n,s)=>{var l=Ql(),o=b(l),c=b(o);{var y=v=>{wt(v)},k=v=>{wt(v)};ye(c,v=>{i(s).status==="True"?v(y):v(k,!1)})}f(o);var h=P(o,2),g=b(h,!0);f(h),f(l),ne(()=>{je(l,1,Ke(["pressure-item",i(s).status==="True"&&"error"])),he(g,i(s).type)}),V(n,l)}),f(a),V(d,a)}class to extends Be{constructor(e,t){super(e,t)}getStatus(){const{status:e,metadata:t,spec:a}=this.raw;let n="Unknown",s="status-unknown",l="Namespace 状态未知，可能是由于集群通信问题或 API 服务器异常。";switch(e&&e.phase&&(n=e.phase),n){case"Active":s="status-active",l="Namespace 处于正常运行状态，资源可正常创建和管理。";break;case"Terminating":s="status-terminating",l="Namespace 正在被删除，但仍有资源未完全清理。";break;case"Failed":s="status-failed",l="Namespace 创建或操作失败，可能是由于配额不足、权限问题或其他配置错误。";break;case"Pending":s="status-pending",l="Namespace 正在创建中，但尚未完成，通常是由于集群资源不足或配置未完全生效。";break;case"Unknown":s="status-unknown",l="Namespace 状态无法确定，可能是由于集群通信问题或 API 服务器异常。";break;case"NotReady":s="status-not-ready",l="Namespace 未就绪，可能由于依赖资源未准备好。";break;case"Forbidden":s="status-forbidden",l="当前用户无权访问该 Namespace，通常是由于 RBAC 配置限制。";break;case"QuotaExceeded":s="status-quota-exceeded",l="Namespace 的资源使用超出了配额限制，需要调整资源配额或清理资源。";break;case"NamespaceNotExists":s="status-not-exists",l="Namespace 不存在，可能是由于误删或未正确创建。";break;case"NamespaceConflict":s="status-conflict",l="Namespace 名称冲突，可能是由于重复创建同名 Namespace。";break;case"NamespaceDeletionError":s="status-deletion-error",l="Namespace 删除过程中出现错误，可能是由于资源未正确清理或依赖资源未释放。";break;case"NamespaceCreationError":s="status-creation-error",l="Namespace 创建过程中出现错误，可能是由于配置错误或集群资源不足。";break;case"NamespaceLimitExceeded":s="status-limit-exceeded",l="集群中 Namespace 数量已达到上限，需要调整集群配置或删除不必要的 Namespace。";break;case"NamespaceNotReady":s="status-not-ready",l="Namespace 未就绪，可能由于依赖资源未准备好。";break;case"NamespaceUnavailable":s="status-unavailable",l="Namespace 不可用，可能由于集群问题，如节点故障或网络问题。";break;case"NamespaceSuspended":s="status-suspended",l="Namespace 被暂停，可能由于管理操作或系统自动暂停。";break;case"NamespaceInactive":s="status-inactive",l="Namespace 处于非活跃状态，可能是由于长时间未使用或手动设置为非活跃状态。";break;case"NamespaceError":s="status-error",l="Namespace 出现错误，状态异常，可能是由于配置错误或资源冲突。";break;case"NamespacePendingDeletion":s="status-pending-deletion",l="Namespace 正在等待删除，可能是由于删除操作已发起，但尚未完成。";break;case"NamespacePendingCreation":s="status-pending-creation",l="Namespace 正在等待创建，可能是由于创建操作已发起，但尚未完成。";break;default:s="status-unknown",l="Namespace 状态未知，可能是由于集群通信问题或 API 服务器异常。";break}return{status:n,className:s,description:l}}getTableRow(){let e=super.getTableRow();return e.status.status!=="Active"&&e.status.description&&(e.rowOption={className:"row-desc"},e.status.showDescription=!0),e}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left"},{name:"Age",key:"age",align:"right",width:"100px"}]}getCreatable(){return{name:"Create",action:()=>{console.log("Create")}}}getIntro(e){return[]}getDetailTabs(e){return[{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastTransitionTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.status.conditions||[]}}]}getDetailComponents(e){return[{component:eo,params:{namespace:e}}]}}class ao extends Be{constructor(e,t){super(e,t)}}class no extends Rt{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod]}getStatus(){var s,l;const e=this.raw,t=e.spec||{},a=e.status||{},n=e.metadata||{};return n.deletionTimestamp?{status:"Terminating",className:"status-terminating",description:`ReplicaSet is being deleted. ${a.replicas||0} pod(s) remaining.`}:t.replicas===0?{status:"Inactive",className:"status-inactive",description:"ReplicaSet is scaled to 0 pods. No instances are running."}:(s=a.conditions)!=null&&s.some(o=>o.type==="ReplicaFailure"&&o.status==="True")?{status:"Failed",className:"status-failed",description:`Critical failure: ${a.conditions.find(o=>o.type==="ReplicaFailure").description}`}:a.availableReplicas!==a.replicas?{status:"Degraded",className:"status-degraded",description:`${a.availableReplicas||0}/${t.replicas} pods available. Check pod health.`}:a.observedGeneration<n.generation?{status:"Progressing",className:"status-progressing",description:`New configuration (generation ${n.generation}) is being applied. Current ready: ${a.readyReplicas||0}`}:((l=n.annotations)==null?void 0:l["deployment.kubernetes.io/paused"])==="true"?{status:"Paused",className:"status-paused",description:"Updates are paused. Resume to continue configuration changes."}:a.readyReplicas===t.replicas&&a.replicas===t.replicas?{status:"Active",className:"status-active",description:`${t.replicas} pods fully operational and passing health checks`}:{status:"Unknown",className:"status-unknown",description:"Unexpected state. Check Kubernetes events for details."}}getTableRow(){var g,v,u,r;let e=this.raw;const t=e.metadata||{},a=e.spec||{},n=e.status||{},s=this.resources.Pod.getRawByLabels(e.spec.selector.matchLabels),l=s.map(m=>this.resources.Pod.getHandler(m).getStatus()),o=l.filter(m=>m.status==="Running").length,c={};l.forEach(m=>{c[m.status]||(c[m.status]={size:0,total:l.length,status:m.status,raw:m}),c[m.status].size+=1});const y=Reflect.ownKeys(c).map(m=>({size:c[m].size,total:c[m].total,status:c[m].status,className:c[m].raw.className,sort:c[m].raw.sort,ratio:Math.round(c[m].size/c[m].total*100)})).sort((m,p)=>p.sort-m.sort),k=s.length>0?Math.round(o/s.length*100):0;let h={id:t.name,name:t.name||"",namespace:t.namespace||"",image:((r=(u=(v=(g=a.template)==null?void 0:g.spec)==null?void 0:v.containers)==null?void 0:u[0])==null?void 0:r.image)||"",ready:n.readyReplicas||0,current:n.availableReplicas||0,desired:a.replicas||0,publicEndpoints:this._getPublicEndpoints(t.annotations||{}),status:this.getStatus(),age:this.age};return h.status.podStatusList=y,h.status.podReadyRatio=k,h.status.status!=="Active"&&h.status.message&&(h.rowOption={className:"row-desc"},h.status.showDescription=!0),h}_getPublicEndpoints(e){if(!e["field.cattle.io/publicEndpoints"])return[];try{return JSON.parse(e["field.cattle.io/publicEndpoints"])}catch{return[]}}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"130px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Image",key:"image",align:"left"},{name:"Endpoints",key:"publicEndpoints",align:"left",width:"110px"},{name:"Ready",key:"ready",align:"center",width:"100px"},{name:"Current",key:"current",align:"center",width:"80px",sortable:!0},{name:"Desired",key:"desired",align:"center",width:"80px"},{name:"Health",key:"health",align:"center",width:"150px"}]}}var so=j('<div class="section"><div class="title">Pod Management Policy</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div></div>');function io(d,e){ce(e,!0);let t=pe(e,"value",15),a=X({type:"RollingUpdate",rollingUpdate:{maxUnavailable:null}}),n=[{name:"RollingUpdate",value:"RollingUpdate"},{name:"OnDelete",value:"OnDelete"}];function s(){let g={type:a.type,rollingUpdate:{maxUnavailable:a.rollingUpdate.maxUnavailable}};t(g)}var l=so(),o=P(b(l),2),c=b(o),y=b(c);ge(y,{options:n,onClose:s,get value(){return a.type},set value(g){a.type=g}}),f(c);var k=P(c,2),h=b(k);Q(h,{label:"Partition",onblur:s,get value(){return a.rollingUpdate.maxUnavailable},set value(g){a.rollingUpdate.maxUnavailable=g}}),f(k),f(o),f(l),V(d,l),ue()}class ro extends Rt{constructor(e,t){super(e,t)}getTableRow(){var l,o,c,y;let e=this.raw;const t=e.metadata||{},a=e.spec||{},n=e.status||{};let s={id:t.name,name:t.name||"",namespace:t.namespace||"",image:((y=(c=(o=(l=a.template)==null?void 0:l.spec)==null?void 0:o.containers)==null?void 0:c[0])==null?void 0:y.image)||"",numberReady:n.numberReady||0,currentNumberScheduled:n.currentNumberScheduled||0,desiredNumberScheduled:n.desiredNumberScheduled||0,status:this.getStatus(e),creationTimestamp:t.creationTimestamp||"",publicEndpoints:this._getPublicEndpoints(t.annotations||{}),age:this.age};return s.status.status!=="Active"&&s.status.message&&(s.rowOption={className:"row-desc"},s.status.showDescription=!0),s}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"updateStrategy",component:io,key:"spec.updateStrategy"},{name:"selector",component:ct,key:"spec.selector"},{name:"template",component:null,key:"spec.template",children:[{name:"metadata",component:ia,key:"spec.template.metadata"},{name:"spec",component:null,key:"spec.template.spec",children:[{name:"containers",component:Lt,key:"spec.template.spec.containers",defaultValue(){return[]}},{name:"initContainers",component:Mt,key:"spec.template.spec.initContainers",defaultValue(){return[]}},{name:"volumes",component:zt,key:"spec.template.spec.volumes",defaultValue(){return[]}},{name:"imagePullSecrets",component:Bt,key:"spec.template.spec.imagePullSecrets"},{name:"serviceAccountName",component:Ut,key:"spec.template.spec.serviceAccountName"},{name:"automountServiceAccountToken",component:Le,option:{label:"automountServiceAccountToken"},key:"spec.template.spec.automountServiceAccountToken"},{name:"nodeSelector",component:Ft,key:"spec.template.spec.nodeSelector"},{name:"affinity",component:Vt,key:"spec.template.spec.affinity"},{name:"tolerations",component:jt,key:"spec.template.spec.tolerations"},{name:"dnsPolicy",component:Kt,key:"spec.template.spec.dnsPolicy"},{name:"dnsConfig",component:Ht,key:"spec.template.spec.dnsConfig"},{name:"hostNetwork",component:Le,option:{label:"hostNetwork"},key:"spec.template.spec.hostNetwork"},{name:"hostPID",component:Le,option:{label:"hostPID"},key:"spec.template.spec.hostPID"},{name:"hostIPC",component:Le,option:{label:"hostIPC"},key:"spec.template.spec.hostIPC"},{name:"restartPolicy",component:Wt,key:"spec.template.spec.restartPolicy"}]}]}]}]}}var lo=j('<div class="section"><div class="title">Headless Service</div> <div class="block colum-2"><!></div></div>');function oo(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));oe(()=>{Me.ready("Service",o=>{q(a,o.getAllRawList().filter(c=>c.spec.type==="ClusterIP"&&c.spec.clusterIP==="None").map(c=>({name:c.metadata.name,value:c.metadata.name})),!0)})});var n=lo(),s=P(b(n),2),l=b(s);ge(l,{label:"Headless Service",get options(){return i(a)},get disabled(){return e.disabled},get value(){return t()},set value(o){t(o)}}),f(s),f(n),V(d,n),ue()}var co=j('<div class="section"><div class="title">Pod Management Policy</div> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div></div>');function uo(d,e){ce(e,!0);let t=pe(e,"value",15),a=X({type:"RollingUpdate",rollingUpdate:{partition:null}}),n=[{name:"RollingUpdate",value:"RollingUpdate"},{name:"OnDelete",value:"OnDelete"}];function s(){let g={type:a.type,rollingUpdate:{partition:a.rollingUpdate.partition}};t(g)}var l=co(),o=P(b(l),2),c=b(o),y=b(c);ge(y,{options:n,onClose:s,get value(){return a.type},set value(g){a.type=g}}),f(c);var k=P(c,2),h=b(k);Q(h,{label:"Partition",onblur:s,get value(){return a.rollingUpdate.partition},set value(g){a.rollingUpdate.partition=g}}),f(k),f(o),f(l),V(d,l),ue()}var mo=j('<div class="section"><div class="title">Pod Management Policy</div> <div class="block colum-2"><!></div></div>');function vo(d,e){ce(e,!0);let t=pe(e,"value",15),a=[{name:"Parallel",value:"Parallel"},{name:"OrderedReady",value:"OrderedReady"}];var n=mo(),s=P(b(n),2),l=b(s);ge(l,{options:a,get value(){return t()},set value(o){t(o)}}),f(s),f(n),V(d,n),ue()}var po=j('<div class="section"><div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div> <div class="block colum-1"><!></div></div>');function fo(d,e){ce(e,!0);let t=pe(e,"value",27,()=>X({})),a=ae(X([])),n=ae(X({metadata:{name:"",labels:{},annotations:{}},spec:{selector:{matchLabels:{},matchExpressions:[]},resources:{requests:{storage:""}},accessModes:["ReadWriteOnce"],volumeMode:"Filesystem",storageClassName:""}})),s=[{name:"ReadWriteOnce",value:"ReadWriteOnce"},{name:"ReadOnlyMany",value:"ReadOnlyMany"},{name:"ReadWriteMany",value:"ReadWriteMany"},{name:"ReadWriteOncePod",value:"ReadWriteOncePod"}];oe(()=>{var E,O,D,N,G,R,M,x,W,se;t()&&q(n,{metadata:{name:t().metadata.name,labels:t().metadata.labels||{},annotations:t().metadata.annotations||[]},spec:{resources:{requests:{storage:(D=(O=(E=t().spec)==null?void 0:E.resources)==null?void 0:O.requests)==null?void 0:D.storage}},accessModes:((N=t().spec)==null?void 0:N.accessModes)||["ReadWriteOnce"],volumeMode:((G=t().spec)==null?void 0:G.volumeMode)||"Filesystem",storageClassName:(R=t().spec)==null?void 0:R.storageClassName,selector:{matchLabels:((x=(M=t().spec)==null?void 0:M.selector)==null?void 0:x.matchLabels)||{},matchExpressions:((se=(W=t().spec)==null?void 0:W.selector)==null?void 0:se.matchExpressions)||[]}}},!0)}),oe(()=>{Me.ready("StorageClass",E=>{q(a,E.getAllRawList().map(O=>({name:O.metadata.name,value:O.metadata.name})),!0)})});function l(){Object.assign(t(),{metadata:{name:i(n).metadata.name,labels:i(n).metadata.labels,annotations:i(n).metadata.annotations},spec:{resources:{requests:{storage:i(n).spec.resources.requests.storage}},accessModes:i(n).spec.accessModes,volumeMode:i(n).spec.volumeMode,storageClassName:i(n).spec.storageClassName,selector:{matchLabels:i(n).spec.selector.matchLabels,matchExpressions:i(n).spec.selector.matchExpressions}}})}var o=po(),c=b(o),y=b(c),k=b(y);Q(k,{label:"Volume Claim Template Name",get disabled(){return e.disabled},onblur:l,get value(){return i(n).metadata.name},set value(E){i(n).metadata.name=E}}),f(y);var h=P(y,2),g=b(h);ge(g,{label:"Storage CLass",get options(){return i(a)},get disabled(){return e.disabled},onClose:l,get value(){return i(n).spec.storageClassName},set value(E){i(n).spec.storageClassName=E}}),f(h);var v=P(h,2),u=b(v);Je(u,{label:"Access Modes",options:s,onClose:l,get value(){return i(n).spec.accessModes},set value(E){i(n).spec.accessModes=E}}),f(v);var r=P(v,2),m=b(r);Q(m,{label:"Volume Claim storage",type:"number",get disabled(){return e.disabled},unit:"GiB",onblur:l,get value(){return i(n).spec.resources.requests.storage},set value(E){i(n).spec.resources.requests.storage=E}}),f(r),f(c);var p=P(c,2),_=b(p);rt(_,{label:"Labels",get value(){return i(n).metadata.labels},callback:E=>(i(n).metadata.labels=E)&&l(),get disabled(){return e.disabled}}),f(p);var S=P(p,2),C=b(S);rt(C,{label:"Annotations",get value(){return i(n).metadata.annotations},callback:E=>(i(n).metadata.annotations=E)&&l(),get disabled(){return e.disabled}}),f(S);var A=P(S,2),L=b(A);ct(L,{get value(){return i(n).spec.selector},set value(E){i(n).spec.selector=E}}),f(A),f(o),V(d,o),ue()}var ho=(d,e,t)=>e(i(t)),go=(d,e,t)=>e(i(t)),bo=j('<button class="dived container-name-remove svelte-5isznx"><!></button>'),yo=j('<div><button class="dived"> </button> <!></div>'),ko=j('<div class="container-btn svelte-5isznx"><button class="dived container-btn-bg svelte-5isznx"><!></button></div>'),_o=j('<div class="containers svelte-5isznx"><div class="container-desc svelte-5isznx">VolumeClaimTemplates</div> <div class="container-names svelte-5isznx"></div> <!></div> <!>',1);function wo(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X([])),a=ae(null);function n(){let u=t().map(m=>m.metadata.name),r="volumeTemplate";u.length>0&&(r=Xe.generateUniqueString(u[0],u)),t().push({metadata:{name:r,labels:{},annotations:{}},spec:{selector:{matchLabels:{},matchExpressions:[]},resources:{requests:{storage:""}},accessModes:["ReadWriteOnce"],volumeMode:"Filesystem",storageClassName:""}})}function s(u){t(t().filter(r=>r.metadata.name!==u.metadata.name)),q(a,t()[0],!0)}function l(u){q(a,u,!0)}oe(()=>{i(a)||q(a,t()[0],!0)});var o=_o(),c=Ve(o),y=P(b(c),2);ke(y,21,t,_e,(u,r)=>{var m=yo(),p=b(m);p.__click=[ho,l,r];var _=b(p,!0);f(p);var S=P(p,2);{var C=A=>{var L=bo();L.__click=[go,s,r];var E=b(L);qe(E),f(L),V(A,L)};ye(S,A=>{t().length>1&&A(C)})}f(m),ne(()=>{je(m,1,Ke(["container-name",i(a)&&i(a).metadata.name===i(r).metadata.name?"active":""]),"svelte-5isznx"),he(_,i(r).metadata.name)}),V(u,m)}),f(y);var k=P(y,2);{var h=u=>{var r=ko(),m=b(r);m.__click=n;var p=b(m);fa(p),f(m),f(r),V(u,r)};ye(k,u=>{e.disabled||u(h)})}f(c);var g=P(c,2);{var v=u=>{fo(u,{get disabled(){return e.disabled},get value(){return i(a)},set value(r){q(a,r,!0)}})};ye(g,u=>{i(a)&&u(v)})}V(d,o),ue()}xe(["click"]);class xo extends Rt{constructor(e,t){super(e,t)}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"replicas",component:be,option:{label:"replicas",type:"number"},key:"spec.replicas"},{name:"serviceName",component:oo,key:"spec.serviceName"},{name:"selector",component:ct,key:"spec.selector"},{name:"podManagementPolicy",component:vo,key:"spec.podManagementPolicy"},{name:"updateStrategy",component:uo,key:"spec.updateStrategy"},{name:"volumeClaimTemplates",component:wo,key:"spec.volumeClaimTemplates",defaultValue(){return[]}},{name:"template",component:null,key:"spec.template",children:[{name:"metadata",component:ia,key:"spec.template.metadata"},{name:"spec",component:null,key:"spec.template.spec",children:[{name:"containers",component:Lt,key:"spec.template.spec.containers",defaultValue(){return[]}},{name:"initContainers",component:Mt,key:"spec.template.spec.initContainers",defaultValue(){return[]}},{name:"volumes",component:zt,key:"spec.template.spec.volumes",defaultValue(){return[]}},{name:"imagePullSecrets",component:Bt,key:"spec.template.spec.imagePullSecrets"},{name:"serviceAccountName",component:Ut,key:"spec.template.spec.serviceAccountName"},{name:"automountServiceAccountToken",component:Le,option:{label:"automountServiceAccountToken"},key:"spec.template.spec.automountServiceAccountToken"},{name:"nodeSelector",component:Ft,key:"spec.template.spec.nodeSelector"},{name:"affinity",component:Vt,key:"spec.template.spec.affinity"},{name:"tolerations",component:jt,key:"spec.template.spec.tolerations"},{name:"dnsPolicy",component:Kt,key:"spec.template.spec.dnsPolicy"},{name:"dnsConfig",component:Ht,key:"spec.template.spec.dnsConfig"},{name:"hostNetwork",component:Le,option:{label:"hostNetwork"},key:"spec.template.spec.hostNetwork"},{name:"hostPID",component:Le,option:{label:"hostPID"},key:"spec.template.spec.hostPID"},{name:"hostIPC",component:Le,option:{label:"hostIPC"},key:"spec.template.spec.hostIPC"},{name:"restartPolicy",component:Wt,key:"spec.template.spec.restartPolicy"}]}]}]}]}}var So=j('<div class="section"><div class="block colum-2"><!></div></div>');function pt(d,e){ce(e,!0);let t=pe(e,"value",15,"");var a=So(),n=b(a),s=b(n);ge(s,na(()=>e.option,{get disabled(){return e.disabled},get value(){return t()},set value(l){t(l)}})),f(n),f(a),V(d,a),ue()}class Ro extends Rt{constructor(e,t){super(e,t)}getTableRow(){var s,l,o,c;let e=this.raw;const t=e.metadata||{},a=e.spec||{};e.status;let n={id:t.name,name:t.name||"",namespace:t.namespace||"",image:((c=(o=(l=(s=a.template)==null?void 0:s.spec)==null?void 0:l.containers)==null?void 0:o[0])==null?void 0:c.image)||"",schedule:a.schedule||"",lastSchedule:a.status.lastScheduleTime||"",parallelism:a.parallelism||0,status:this.getStatus(e),creationTimestamp:t.creationTimestamp||"",publicEndpoints:this._getPublicEndpoints(t.annotations||{}),age:this.age};return n.status.status!=="Active"&&n.status.message&&(n.rowOption={className:"row-desc"},n.status.showDescription=!0),n}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"130px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Image",key:"image",align:"left"},{name:"Endpoints",key:"publicEndpoints",align:"left",width:"110px"},{name:"Schedule",key:"schedule",align:"center",width:"100px"},{name:"Last Schedule",key:"lastSchedule",align:"center",width:"80px",sortable:!0},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0},{name:"Health",key:"health",align:"center",width:"150px"}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"pods",title:"Pods",component:It,params:{params:{matchLabels:service.spec.selector}}},{id:"ports",title:"Ports",component:Oe,params:{header:[{name:"Name",key:"name",align:"left"},{name:"Port",key:"port",align:"left"},{name:"Protocol",key:"protocol",align:"left"},{name:"Target",key:"targetPort",align:"left"}],buttons:[],menus:[],checkbox:!1,data:service.spec.ports||[]}},{id:"selector",title:"Selectors",component:Oe,params:{header:[{name:"Key",key:"key",align:"left"},{name:"Value",key:"value",align:"left"}],buttons:[],menus:[],checkbox:!1,data:Reflect.ownKeys(service.spec.selector).map(t=>({key:t,value:service.spec.selector[t]}))}},{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastTransitionTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:service.status.conditions||[]}},{id:"refers",title:"Related Resources",component:We,params:{name:service.metadata.name,namespace:service.metadata.namespace,kind:service.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"schedule",component:be,option:{label:"schedule",type:"text"},key:"spec.schedule"},{name:"concurrencyPolicy",component:pt,option:{label:"concurrencyPolicy",options:[{name:"Allow",value:"Allow"},{name:"Forbid",value:"Forbid"},{name:"Replace",value:"Replace"}]},key:"spec.concurrencyPolicy"},{name:"successfulJobsHistoryLimit",component:be,option:{label:"successfulJobsHistoryLimit",type:"number"},key:"spec.successfulJobsHistoryLimit"},{name:"startingDeadlineSeconds",component:be,option:{label:"startingDeadlineSeconds",type:"number"},key:"spec.startingDeadlineSeconds"},{name:"failedJobsHistoryLimit",component:be,option:{label:"failedJobsHistoryLimit",type:"number"},key:"spec.failedJobsHistoryLimit"},{name:"timeZone",component:be,option:{label:"timeZone",type:"text"},key:"spec.timeZone"},{name:"selector",component:ct,key:"spec.selector",defaultValue(){return{matchLabels:{},matchExpressions:[]}}},{name:"jobTemplate",key:"spec.jobTemplate",children:[{name:"spec",key:"spec.jobTemplate.spec",children:[{name:"template",component:null,key:"spec.jobTemplate.spec.template",children:[{name:"spec",component:null,key:"spec.jobTemplate.spec.template.spec",children:[{name:"containers",component:Lt,key:"spec.jobTemplate.spec.template.spec.containers",defaultValue(){return[]}},{name:"initContainers",component:Mt,key:"spec.jobTemplate.spec.template.spec.initContainers",defaultValue(){return[]}},{name:"volumes",component:zt,key:"spec.jobTemplate.spec.template.spec.volumes",defaultValue(){return[]}},{name:"imagePullSecrets",component:Bt,key:"spec.jobTemplate.spec.template.spec.imagePullSecrets"},{name:"serviceAccountName",component:Ut,key:"spec.jobTemplate.spec.template.spec.serviceAccountName"},{name:"automountServiceAccountToken",component:Le,option:{label:"automountServiceAccountToken"},key:"spec.jobTemplate.spec.template.spec.automountServiceAccountToken"},{name:"nodeSelector",component:Ft,key:"spec.jobTemplate.spec.template.spec.nodeSelector"},{name:"affinity",component:Vt,key:"spec.jobTemplate.spec.template.spec.affinity"},{name:"tolerations",component:jt,key:"spec.jobTemplate.spec.template.spec.tolerations"},{name:"dnsPolicy",component:Kt,key:"spec.jobTemplate.spec.template.spec.dnsPolicy"},{name:"dnsConfig",component:Ht,key:"spec.jobTemplate.spec.template.spec.dnsConfig"},{name:"hostNetwork",component:Le,option:{label:"hostNetwork"},key:"spec.jobTemplate.spec.template.spec.hostNetwork"},{name:"hostPID",component:Le,option:{label:"hostPID"},key:"spec.jobTemplate.spec.template.spec.hostPID"},{name:"hostIPC",component:Le,option:{label:"hostIPC"},key:"spec.jobTemplate.spec.template.spec.hostIPC"},{name:"restartPolicy",component:Wt,key:"spec.jobTemplate.spec.template.spec.restartPolicy"}]}]}]}]}]}]}}var Co=(d,e,t)=>e(i(t)),Po=j('<div class="block env-grid svelte-votd8h"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-votd8h"><button class="btn btn-blank">Remove</button></div></div></div>'),Do=(d,e)=>e(),Ao=j('<div class="section"><div class="title"> </div> <!> <div class="bottom"><button class="btn btn-primary">Add</button></div></div>');function No(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X({})),a=ae(X([]));function n(){i(a).push({id:Xe.getRandomId(),name:"",value:""})}function s(v){let u=i(a).findIndex(r=>r.id===v.id);u!==-1&&(i(a).splice(u,1),l())}oe(()=>{q(a,Reflect.ownKeys(t()).map(v=>({id:v,name:v,value:t()[v]})),!0)});function l(){let v={};i(a).forEach(u=>{u.name&&(v[u.name]=u.value)}),t(v),e.callback&&e.callback(v)}var o=Ao(),c=b(o),y=b(c,!0);f(c);var k=P(c,2);ke(k,17,()=>i(a),_e,(v,u,r)=>{var m=Po(),p=b(m),_=b(p);Q(_,{label:"Key",onblur:()=>l(),get disabled(){return e.disabled},get value(){return i(u).name},set value(O){i(u).name=O}}),f(p);var S=P(p,2),C=b(S);Q(C,{label:"Value",onblur:l,get disabled(){return e.disabled},get value(){return i(u).value},set value(O){i(u).value=O}}),f(S);var A=P(S,2),L=b(A),E=b(L);E.__click=[Co,s,u],f(L),f(A),f(m),ne(()=>E.disabled=e.disabled),V(v,m)});var h=P(k,2),g=b(h);g.__click=[Do,n],f(h),f(o),ne(()=>{he(y,e.label),g.disabled=e.disabled}),V(d,o),ue()}xe(["click"]);class To extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod,this.resources.ServiceAccount]}getStatus(){let e=this.raw,t=this.resources.ServiceAccount.getAllRawList().find(l=>{var o;return((o=e.metadata.annotations)==null?void 0:o["kubernetes.io/service-account.name"])===l.metadata.name}),a=e.metadata.name,n=this.resources.Pod.getAllRawList().filter(l=>{var y,k;const o=((y=l.spec.volumes)==null?void 0:y.filter(h=>{var g;return((g=h.secret)==null?void 0:g.secretName)===a}).length)||0,c=((k=l.spec.containers)==null?void 0:k.flatMap(h=>{var g;return(g=h.env)==null?void 0:g.filter(v=>{var u,r;return((r=(u=v.valueFrom)==null?void 0:u.secretKeyRef)==null?void 0:r.name)===a})}).length)||0;return o>0||c>0});return[{condition:()=>n.length===0&&!t&&!this.isSystemSecret(e),result:{status:"Orphaned",className:"status-orphaned",message:"Secret 未被任何 Pod 或 ServiceAccount 使用，可能是残留资源。"}},{condition:()=>e.type==="kubernetes.io/token"&&this.isSecretExpired(e),result:{status:"Expired",className:"status-expired",message:"Secret 中的 Token 已过期，需重新生成。"}},{condition:()=>!0,result:{status:"Active",className:"status-active",message:`Secret 状态正常。${n.length>0?`被 ${n.length} 个 Pod 使用`:"未被 Pod 使用"}${t?`，关联 ServiceAccount：${t.metadata.name}`:""}`}}].find(l=>l.condition()).result}isSecretExpired(e){var a;if(e.type!=="kubernetes.io/token")return!1;const t=(a=e.metadata.annotations)==null?void 0:a["kubernetes.io/service-account.expiration"];return t&&new Date(t)<new Date}isSystemSecret(e){return e.metadata.name.startsWith("default-token-")}getTableRow(){let e=this.raw;const t=e.metadata||{};e.spec;const a={Opaque:"Opaque","kubernetes.io/service-account-token":"Service Account Token","bootstrap.kubernetes.io/token":"Bootstrap Token","kubernetes.io/dockerconfigjson":"Docker Config","kubernetes.io/basic-auth":"Basic Auth","kubernetes.io/ssh-auth":"SSH Auth","kubernetes.io/tls":"TLS"};console.log(e.type,a[e.type.trim()]);let n={id:t.name,name:t.name||"",namespace:t.namespace||"",status:this.getStatus(e),kind:a[e.type]||e.type,data:Reflect.ownKeys(e.data||{}),age:this.age};return n.ready=`${n.availableReplicas}/${n.replicas}`,n.status.status!=="Active"&&n.status.message&&(n.rowOption={className:"row-desc"},n.status.showDescription=!0),n}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left"},{name:"Kind",key:"kind",align:"left"},{name:"Data",key:"data",align:"left",sortable:!0},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"data",title:"Data",component:ba,params:{configmap:e}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}isMultiFormDefinition(){return!0}getMultiFormDefinitions(){return{title:"Select Secret Type",types:[{name:"Opaque",type:"Opaque",icon:"O",description:"Opaque"},{name:"Docker Registry",type:"kubernetes.io/dockerconfigjson",icon:"DR",description:"Docker Registry"},{name:"TLS",type:"kubernetes.io/tls",icon:"T",description:"TLS"},{name:"Http Basic Auth",type:"kubernetes.io/basic-auth",icon:"HA",description:"Http Basic Auth"},{name:"SSH",type:"kubernetes.io/ssh-auth",icon:"S",description:"SSH"},{name:"Bootstrap Token",type:"bootstrap.kubernetes.io/token",icon:"BT",description:"Bootstrap Token"}]}}getDefinitionType(e){return e.type}getFormDefinition(e){return e==="Opaque"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"Opaque"},key:"type"},{name:"data",component:Qa,key:"data",defaultValue(){return[]}},{name:"stringData",component:No,key:"stringData",defaultValue(){return[]}}]:e==="kubernetes.io/dockerconfigjson"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"kubernetes.io/dockerconfigjson"},key:"type"},{name:"data",children:[{name:".dockerconfigjson",component:be,key:"data.'.dockerconfigjson'"}]}]:e==="kubernetes.io/tls"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"kubernetes.io/tls"},key:"type"},{name:"data",children:[{name:"tls.crt",component:be,key:"data.'tls.crt'"},{name:"tls.key",component:be,key:"data.'tls.key'"}]}]:e==="kubernetes.io/basic-auth"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"kubernetes.io/tls"},key:"type"},{name:"data",children:[{name:"username",component:be,key:"data.username"},{name:"password",component:be,key:"data.password"}]}]:e==="kubernetes.io/ssh-auth"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"kubernetes.io/tls"},key:"type"},{name:"data",children:[{name:"ssh-privatekey",component:be,key:"data.ssh-privatekey"},{name:"ssh-ppublickey",component:be,key:"data.ssh-ppublickey"}]}]:e==="bootstrap.kubernetes.io/token"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"kubernetes.io/tls"},key:"type"},{name:"data",children:[{name:"token-id",component:be,key:"data.token-id"},{name:"token-secret",component:be,key:"data.token-secret"}]}]:e==="kubernetes.io/service-account-token"?[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"type",component:$e,option:{value:"kubernetes.io/tls"},key:"type"},{name:"data",children:[{name:"ca.crt",component:be,key:"data.ca.crt"},{name:"namespace",component:be,key:"data.namespace"},{name:"token",component:be,key:"data.token"}]}]:[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}}]}async getTemplate(e){let a={Opaque:"Opaque","kubernetes.io/service-account-token":"ServiceAccountToken","bootstrap.kubernetes.io/token":"BootstrapToken","kubernetes.io/dockerconfigjson":"DockerConfig","kubernetes.io/basic-auth":"BasicAuth","kubernetes.io/ssh-auth":"SSHAuth","kubernetes.io/tls":"TLS"}[e];return a||(a="Unknow"),super.getTemplate(a)}}var Eo=j('<div class="section"><div class="title">Resource Select</div> <div class="block colum-2"><!></div></div>');function Io(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X({apiVersion:"",kind:"",name:""})),n=ae(X([]));oe(()=>{t()&&q(a,{apiVersion:t().apiVersion,kind:t().kind,name:t().name},!0)}),oe(()=>{Me.kindsReady(["Deployment","ReplicaSet"],c=>{let y=[];c.get("Deployment").getAllRawList().map(k=>{y.push({name:`${k.kind} ${k.metadata.name}`,value:k.metadata.uid,kind:k.kind,resource:k.metadata.name,apiVersion:k.apiVersion})}),c.get("ReplicaSet").getAllRawList().map(k=>{y.push({name:`${k.kind} ${k.metadata.name}`,value:k.metadata.uid,kind:k.kind,resource:k.metadata.name,apiVersion:k.apiVersion})}),q(n,y,!0)})});var s=Eo(),l=P(b(s),2),o=b(l);ge(o,{label:"Resource Select",get options(){return i(n)},get disabled(){return e.disabled},onClose:()=>{},get value(){return i(a).name},set value(c){i(a).name=c}}),f(l),f(s),V(d,s),ue()}var Oo=j('<div class="block colum-2"><!></div>'),Lo=j('<div class="block colum-3"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div></div>'),Mo=j('<div class="block colum-2"><div class="field"><!></div></div> <!> <div class="sub-title">Metric Selector</div> <div class="block colum-1"><!></div>',1),zo=j('<div class="section"><div class="block colum-2"><!></div> <!> <div class="block colum-2"><div class="field"><!></div> <div class="field"><!></div></div> <!></div>');function Bo(d,e){ce(e,!0);let t=ae("Resource"),a=ae("cpu"),n=X({type:"AverageValue",value:null}),s=X({name:null,selector:{matchLabels:{}}}),l=X({apiVersion:null,kind:null,name:null}),o=[{name:"Resource",value:"Resource"},{name:"Pods",value:"Pods"},{name:"External",value:"External"},{name:"Object",value:"Object"}],c=[{name:"cpu",value:"cpu"},{name:"memory",value:"memory"}],y=[{name:"AverageValue",value:"AverageValue"},{name:"Utilization",value:"Utilization"}];oe(()=>{var O,D,N,G,R;if(e.value){q(t,e.value.type,!0);let M=e.value.type.toLowerCase();(O=e.value[M])!=null&&O.target&&(n.type=e.value[M].target.type,e.value[M].target.averageUtilization&&(n.value=parseInt(e.value[M].target.averageUtilization)),e.value[M].target.averageValue&&(n.value=parseInt(e.value[M].target.averageValue))),(D=e.value[M])!=null&&D.metric&&(s.name=e.value[M].metric.name,s.selector.matchLabels=((G=(N=e.value[M].metric)==null?void 0:N.selector)==null?void 0:G.matchLabels)||{}),(R=e.value[M])!=null&&R.describedObject&&(l.apiVersion=e.value[M].describedObject.apiVersion,l.kind=e.value[M].describedObject.kind,l.name=e.value[M].describedObject.name)}});function k(){let O={type:i(t)},D={type:n.type};n.type==="AverageValue"?D.averageValue=`${n.value}`:D.averageUtilization=`${n.value}`,i(t)==="Resource"?O.resource={name:i(a),target:D}:i(t)==="Pods"?O.pods={metric:{name:s.name,selector:{matchLabels:{...s.selector.matchLabels}}},target:D}:i(t)==="Object"?O.object={describedObject:{apiVersion:l.apiVersion,kind:l.kind,name:l.name},metric:{name:s.name,selector:{matchLabels:{...s.selector.matchLabels}}},target:D}:i(t)==="External"&&(O.external={metric:{name:s.name,selector:{matchLabels:{...s.selector.matchLabels}}},target:D}),e.callback&&e.callback(O)}function h(O){Object.assign(s.selector,{matchLabels:O}),k()}var g=zo(),v=b(g),u=b(v);ge(u,{options:o,label:"Source",onClose:k,get value(){return i(t)},set value(O){q(t,O,!0)}}),f(v);var r=P(v,2);{var m=O=>{var D=Oo(),N=b(D);ge(N,{options:c,onClose:k,get value(){return i(a)},set value(G){q(a,G,!0)}}),f(D),V(O,D)};ye(r,O=>{i(t)==="Resource"&&O(m)})}var p=P(r,2),_=b(p),S=b(_);ge(S,{options:y,label:"Type",onClose:k,get value(){return n.type},set value(O){n.type=O}}),f(_);var C=P(_,2),A=b(C);Q(A,{label:"Value",type:"number",onblur:k,get value(){return n.value},set value(O){n.value=O}}),f(C),f(p);var L=P(p,2);{var E=O=>{var D=Mo(),N=Ve(D),G=b(N),R=b(G);Q(R,{label:"Metric Name",onblur:k,get value(){return s.name},set value(z){s.name=z}}),f(G),f(N);var M=P(N,2);{var x=z=>{var te=Lo(),K=b(te),ie=b(K);Q(ie,{label:"ApiVersion",onblur:k,get value(){return l.apiVersion},set value(ee){l.apiVersion=ee}}),f(K);var B=P(K,2),U=b(B);Q(U,{label:"Kind",onblur:k,get value(){return l.kind},set value(ee){l.kind=ee}}),f(B);var me=P(B,2),de=b(me);Q(de,{label:"Name",onblur:k,get value(){return l.name},set value(ee){l.name=ee}}),f(me),f(te),V(z,te)};ye(M,z=>{i(t)==="Object"&&z(x)})}var W=P(M,4),se=b(W);rt(se,{get value(){return s.selector.matchLabels},callback:z=>h(z)}),f(W),V(O,D)};ye(L,O=>{i(t)!=="Resource"&&O(E)})}f(g),V(d,g),ue()}var Uo=(d,e,t)=>e(i(t)),Fo=j('<div class="panel svelte-1f14nn9"><div class="content svelte-1f14nn9"><button class="dived item-remove svelte-1f14nn9"><!></button> <!></div></div>'),Vo=(d,e)=>e(),jo=j('<div class="section"><div class="title">Metrics</div> <!> <div class="bottom"><button class="btn btn-primary">Add Metric</button></div></div>');function Ko(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));oe(()=>{t()&&q(a,t().map(h=>({id:Math.random(),item:h})),!0)});function n(){i(a).push({id:Math.random(),item:{type:"Resource",resource:{name:"cpu",target:{type:"AverageValue",averageUtilization:null,averageValue:null}}}})}function s(h){q(a,i(a).filter(g=>g.id!==h.id),!0),l()}function l(){let h=i(a).map(g=>g.item);t(JSON.parse(JSON.stringify(h)))}var o=jo(),c=P(b(o),2);ke(c,17,()=>i(a),_e,(h,g,v)=>{var u=Fo(),r=b(u),m=b(r);m.__click=[Uo,s,g];var p=b(m);qe(p),f(m);var _=P(m,2);Bo(_,{get value(){return i(g).item},callback:S=>(i(g).item=S)&&l()}),f(r),f(u),ne(()=>m.disabled=e.disabled),V(h,u)});var y=P(c,2),k=b(y);k.__click=[Vo,n],f(y),f(o),ne(()=>k.disabled=e.disabled),V(d,o),ue()}xe(["click"]);class Ho extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Deployment,this.resources.StatefulSet,this.resources.DaemonSet,this.resources.Job,this.resources.CronJob]}getStatus(){var n,s,l,o,c,y,k,h,g,v;let e=this.raw,t=[];return this.resources.Deployment.getAllRawList().filter(u=>{u.spec.selector.matchLabels.app===e.spec.scaleTargetRef.name&&t.push(u)}),this.resources.StatefulSet.getAllRawList().filter(u=>{u.spec.selector.matchLabels.app===e.spec.scaleTargetRef.name&&t.push(u)}),this.resources.DaemonSet.getAllRawList().filter(u=>{u.spec.selector.matchLabels.app===e.spec.scaleTargetRef.name&&t.push(u)}),this.resources.Job.getAllRawList().filter(u=>{u.spec.selector.matchLabels.app===e.spec.scaleTargetRef.name&&t.push(u)}),this.resources.CronJob.getAllRawList().filter(u=>{u.spec.selector.matchLabels.app===e.spec.scaleTargetRef.name&&t.push(u)}),[{condition:()=>{var m,p;return((p=(m=e.status)==null?void 0:m.conditions)==null?void 0:p.some(_=>_.type==="Failed"&&_.status==="True"))||!t},result:{status:"Failed",className:"status-failed",message:`HPA 扩缩容失败。${t?((c=(o=(l=e.status)==null?void 0:l.conditions)==null?void 0:o.find(u=>u.type==="Failed"))==null?void 0:c.message)||"可能原因：无法获取指标、达到最大/最小副本数限制。":`目标工作负载 ${(n=e.spec.scaleTargetRef)==null?void 0:n.kind}/${(s=e.spec.scaleTargetRef)==null?void 0:s.name} 不存在。`}`}},{condition:()=>{var u,r;return((u=e.spec)==null?void 0:u.minReplicas)===((r=e.spec)==null?void 0:r.maxReplicas)},result:{status:"Disabled",className:"status-disabled",message:`HPA 未启用自动扩缩容（minReplicas == maxReplicas == ${e.spec.minReplicas}）。`}},{condition:()=>{var u,r;return((u=e.status)==null?void 0:u.currentReplicas)!==((r=e.status)==null?void 0:r.desiredReplicas)},result:{status:"Scaling",className:"status-scaling",message:`HPA 正在调整副本数量：从 ${e.status.currentReplicas} 到 ${e.status.desiredReplicas}。${t?`目标 ${t.kind}/${(y=t==null?void 0:t.metadata)==null?void 0:y.name} 当前副本：${((k=t.status)==null?void 0:k.replicas)||0}`:""}`}},{condition:()=>{var u,r;return((u=e.status)==null?void 0:u.currentReplicas)===((r=e.status)==null?void 0:r.desiredReplicas)},result:{status:"Active",className:"status-active",message:`HPA 正常运行中。当前副本数：${e.status.currentReplicas}，目标指标：${(g=(h=e.spec)==null?void 0:h.metrics)==null?void 0:g.map(u=>{var r,m,p;return u.type+"/"+(((r=u.resource)==null?void 0:r.name)||((p=(m=u.object)==null?void 0:m.metric)==null?void 0:p.name))}).join(", ")}${t?`，关联工作负载：${t==null?void 0:t.kind}/${(v=t==null?void 0:t.metadata)==null?void 0:v.name}`:""}`}},{condition:()=>!1,result:{status:"Inactive",className:"status-inactive",message:"HPA 无法获取监控指标，自动扩缩容已暂停。请检查 Metrics Server 或自定义指标适配器。"}}].find(u=>u.condition()).result}getTableRow(){var a;let e=this.raw,t={id:e.metadata.name,status:this.getStatus(),name:e.metadata.name,namespace:e.metadata.namespace,workload:(a=e.spec.scaleTargetRef)==null?void 0:a.name,minimumReplicas:e.spec.minReplicas,maximumReplicas:e.spec.maxReplicas,currentReplicas:e.status.currentReplicas,age:this.age};return t.status.status!=="Active"&&t.status.message&&(t.rowOption={className:"row-desc"},t.status.showDescription=!0),t}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"200px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Workload",key:"workload",align:"left",width:"150px"},{name:"Minimum Replicas",key:"minimumReplicas",align:"center",sortable:!0},{name:"Maximum Replicas",key:"maximumReplicas",align:"center",sortable:!0},{name:"Current Replicas ",key:"currentReplicas",align:"center",sortable:!0},{name:"Age",key:"age",align:"center",width:"100px"}]}getIntro(e){return[{key:"Type",value:e.spec.type},{key:"Cluster IP:",value:e.spec.clusterIP},{key:"Session Affinity",value:e.spec.sessionAffinity}]}getDetailTabs(e){return[{id:"pods",title:"Pods",component:It,params:{params:{matchLabels:e.spec.selector}}},{id:"ports",title:"Ports",component:Oe,params:{header:[{name:"Name",key:"name",align:"left"},{name:"Port",key:"port",align:"left"},{name:"Protocol",key:"protocol",align:"left"},{name:"Target",key:"targetPort",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.spec.ports||[]}},{id:"selector",title:"Selectors",component:Oe,params:{header:[{name:"Key",key:"key",align:"left"},{name:"Value",key:"value",align:"left"}],buttons:[],menus:[],checkbox:!1,data:Reflect.ownKeys(e.spec.selector).map(t=>({key:t,value:e.spec.selector[t]}))}},{id:"conditions",title:"Conditions",component:Oe,params:{header:[{name:"Condition",key:"type",align:"left"},{name:"Status",key:"status",align:"left"},{name:"Updated",key:"lastTransitionTime",align:"left"},{name:"Message",key:"message",align:"left"}],buttons:[],menus:[],checkbox:!1,data:e.status.conditions||[]}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"scaleTargetRef",component:Io,key:"spec.scaleTargetRef"},{name:"minReplicas",component:be,option:{label:"minReplicas",type:"number"},key:"spec.minReplicas"},{name:"maxReplicas",component:be,option:{label:"maxReplicas",type:"number"},key:"spec.maxReplicas"},{name:"metrics",component:Ko,key:"spec.metrics"}]}]}}class Wo extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod]}getStatus(){let e=this.raw,t=this.resources.Pod.getAllRawList().filter(n=>{var s;return(s=n.spec.volumes)==null?void 0:s.some(l=>{var o;return((o=l.persistentVolumeClaim)==null?void 0:o.claimName)===e.metadata.name})});return[{condition:()=>!1,result:{status:"Unsupported",className:"status-unsupported",description:"当前集群网络插件不支持 NetworkPolicy 功能。需使用 Calico、Cilium 等支持 CNI。"}},{condition:()=>t.length===0,result:{status:"Inactive",className:"status-inactive",description:`NetworkPolicy 未应用到任何 Pod。当前 podSelector 规则：${JSON.stringify(e.spec.podSelector)}`}},{condition:()=>!0,result:{status:"Active",className:"status-active",description:`NetworkPolicy 正在生效。影响 ${t.length} 个 Pod，规则类型：${e.spec.ingress?"Ingress":""}${e.spec.egress?(e.spec.ingress?"+":"")+"Egress":""}`}}].find(n=>n.condition()).result}getTableRow(){var s;let e=this.raw;const t=e.metadata||{},a=e.spec||{};let n={id:t.name,name:t.name||"",namespace:t.namespace||"",status:this.getStatus(e),podSelector:Reflect.ownKeys(((s=a.podSelector)==null?void 0:s.matchLabels)||{}).map(l=>`${l}=${a.podSelector.matchLabels[l]}`).join(";"),age:this.age};return n.ready=`${n.availableReplicas}/${n.replicas}`,n.status.status!=="Active"&&n.status.message&&(n.rowOption={className:"row-desc"},n.status.showDescription=!0),n}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"130px"},{name:"Pod-Selector",key:"podSelector",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getCreatable(){return null}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}}var qo=j('<div class="section"><div class="block colum-2"><!></div></div>');function $a(d,e){ce(e,!0);let t=pe(e,"value",15,"");var a=qo(),n=b(a),s=b(n);Je(s,na(()=>e.option,{get disabled(){return e.disabled},get value(){return t()},set value(l){t(l)}})),f(n),f(a),V(d,a),ue()}var Go=j('<div class="section"><div class="title">Storage Class</div> <div class="block colum-2"><!></div></div>');function en(d,e){ce(e,!0);let t=pe(e,"value",15),a=ae(X([]));oe(()=>{Me.ready("StorageClass",o=>{q(a,o.getAllRawList().map(c=>({name:c.metadata.name,value:c.metadata.name})),!0)})});var n=Go(),s=P(b(n),2),l=b(s);ge(l,{label:"Storage Class",get options(){return i(a)},get disabled(){return e.disabled},get value(){return t()},set value(o){t(o)}}),f(s),f(n),V(d,n),ue()}class Zo extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod,this.resources.PersistentVolumeClaim]}getStatus(){let e=this.raw,t=this.resources.PersistentVolumeClaim.getAllRawList().filter(s=>s.spec.volumeName===e.metadata.name)[0],a=t?this.resources.Pod.getAllRawList().filter(s=>s.spec.volumes.some(l=>{var o;return((o=l.persistentVolumeClaim)==null?void 0:o.claimName)===t.metadata.name})):[];return[{condition:()=>e.status.phase==="Released"&&e.spec.persistentVolumeReclaimPolicy!=="Delete",result:{status:"Released",className:"status-released",message:`PV 已从 PVC 释放，但未被删除（回收策略：${e.spec.persistentVolumeReclaimPolicy}）。需手动清理或重新绑定。`}},{condition:()=>e.status.phase==="Bound"&&t!==null,result:{status:"Bound",className:"status-bound",message:`PV 已绑定到 PVC ${t==null?void 0:t.metadata.namespace}/${t==null?void 0:t.metadata.name}，${a.length>0?`被 ${a.length} 个 Pod 使用`:"未被 Pod 使用"}。存储类：${e.spec.storageClassName||"无"}。`}},{condition:()=>e.status.phase==="Available",result:{status:"Active",className:"status-Active",message:`PV 可用但未绑定到任何 PVC。容量：${e.spec.capacity.storage}，存储类：${e.spec.storageClassName||"无"}。`}},{condition:()=>e.metadata.deletionTimestamp!==void 0,result:{status:"Terminating",className:"status-terminating",message:`PV 正在删除中，删除请求时间：${e.metadata.deletionTimestamp}。回收策略：${e.spec.persistentVolumeReclaimPolicy}。`}}].find(s=>s.condition()).result}getTableRow(){let e=this.raw;const t=e.metadata||{};let a={id:t.name,name:t.name||"",status:this.getStatus(e),reclaim:e.spec.persistentVolumeReclaimPolicy||"Delete",pvc:e.spec.claimRef?`${e.spec.claimRef.namespace}/${e.spec.claimRef.name}`:"-",source:e.spec.storageClassName||"-",reason:e.status.reason||"-",age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.status!=="Bound"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Reclaim Policy",key:"reclaim",align:"left"},{name:"Persistent Volume Claim",key:"pvc",align:"left"},{name:"Source",key:"source",align:"left"},{name:"Reason ",key:"reason",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}isMultiFormDefinition(){return!0}getMultiFormDefinitions(){return{title:"Select Storage Type",types:[{name:"HostPath",type:"hostPath",icon:"HP",description:"HostPath"},{name:"NFS",type:"nfs",icon:"N",description:"NFS"},{name:"AWS EBS",type:"awsElasticBlockStore",icon:"AE",description:"AWS EBS"},{name:"GCE Persistent Disk",type:"gcePersistentDisk",icon:"GD",description:"GCE Persistent Disk"},{name:"CSI",type:"csi",icon:"C",description:"CSI"}]}}getDefinitionType(e){return e.spec.hostPath?"hostPath":e.spec.nfs?"nfs":e.spec.awsElasticBlockStore?"awsElasticBlockStore":e.spec.gcePersistentDisk?"gcePersistentDisk":e.spec.csi?"csi":"unknown"}getFormDefinition(e){let t=[];return e==="hostPath"?t=[{name:"hostPath",children:[{name:"path",component:be,option:{label:"path",type:"text"},key:"spec.hostPath.path"},{name:"type",component:pt,option:{label:"type",options:[{name:"Directory",value:"Directory"},{name:"DirectoryOrCreate",value:"DirectoryOrCreate"},{name:"File",value:"File"}]},key:"spec.hostPath.path"}]}]:e==="nfs"?t=[{name:"nfs",children:[{name:"server",component:be,option:{label:"server",type:"text"},key:"spec.nfs.server"},{name:"path",component:be,option:{label:"path",type:"text"},key:"spec.nfs.path"},{name:"readOnly",component:Le,option:{label:"readOnly"},key:"spec.nfs.readOnly"}]}]:e==="awsElasticBlockStore"?t=[{name:"awsElasticBlockStore",children:[{name:"volumeID",component:be,option:{label:"volumeID",type:"text"},key:"spec.awsElasticBlockStore.volumeID"},{name:"fsType",component:be,option:{label:"fsType",type:"text"},key:"spec.awsElasticBlockStore.fsType"},{name:"partition",component:be,option:{label:"partition",type:"number"},key:"spec.awsElasticBlockStore.partition"}]}]:e==="gcePersistentDisk"?t=[{name:"gcePersistentDisk",children:[{name:"pdName",component:be,option:{label:"pdName",type:"text"},key:"spec.gcePersistentDisk.pdName"},{name:"fsType",component:be,option:{label:"fsType",type:"text"},key:"spec.gcePersistentDisk.fsType"},{name:"partition",component:be,option:{label:"partition",type:"number"},key:"spec.gcePersistentDisk.partition"}]}]:e==="csi"&&(t=[{name:"csi",children:[{name:"driver",component:be,option:{label:"driver",type:"text"},key:"spec.csi.driver"},{name:"volumeHandle",component:be,option:{label:"volumeHandle",type:"text"},key:"spec.csi.volumeHandle"},{name:"fsType",component:be,option:{label:"fsType",type:"text"},key:"spec.csi.fsType"},{name:"volumeAttributes",component:ga,key:"spec.csi.volumeAttributes"}]}]),[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",children:[{name:"capacity",children:[{name:"storage",component:be,option:{label:"storage",type:"text"},key:"spec.capacity.storage"}]},{name:"accessModes",key:"spec.accessModes",component:$a,option:{label:"Access Modes",options:[{name:"ReadWriteOnce",value:"ReadWriteOnce"},{name:"ReadOnlyMany",value:"ReadOnlyMany"},{name:"ReadWriteMany",value:"ReadWriteMany"}]}},{name:"volumeMode",key:"spec.volumeMode",component:pt,option:{label:"Volume Mode",options:[{name:"Filesystem",value:"Filesystem"},{name:"Block",value:"Block"}]}},{name:"persistentVolumeReclaimPolicy",component:pt,option:{label:"persistentVolumeReclaimPolicy",options:[{name:"Delete",value:"Delete"},{name:"Retain",value:"Retain"}]},key:"persistentVolumeReclaimPolicy"},{name:"storageClassName",component:en,key:"spec.storageClassName"},...t,{name:"mountOptions",component:xt,option:{label:"mountOptions"},key:"spec.mountOptions"}]}]}async getTemplate(e){return super.getTemplate(this.getDefinitionType(e))}}class Yo extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod]}getStatus(){let e=this.raw,t=this.resources.Pod.getAllRawList().filter(n=>{var s;return(s=n.spec.volumes)==null?void 0:s.some(l=>{var o;return((o=l.persistentVolumeClaim)==null?void 0:o.claimName)===e.metadata.name})});return[{condition:()=>e.status.phase==="Bound"&&t.length===0,result:{status:"Bound",className:"status-bound",message:`PVC 已绑定到 PV ${e.spec.volumeName}，但未被任何 Pod 使用。PV 状态：未知。`}},{condition:()=>e.status.phase==="Bound"&&t.length>0,result:{status:"Active",className:"status-active",message:`PVC 已绑定到 PV ${e.spec.volumeName}，并被 ${t.length} 个 Pod 使用。PV 状态：未知。`}},{condition:()=>e.status.phase==="Released",result:{status:"Released",className:"status-released",message:`PVC 已释放，但关联的 PV ${e.spec.volumeName} 未被回收。PV 状态：未知。`}}].find(n=>n.condition()).result}getTableRow(){var n,s;let e=this.raw;const t=e.metadata||{};e.spec;let a={id:t.name,name:t.name||"",namespace:t.namespace||"",status:this.getStatus(e),statusStr:e.status.phase,volume:e.spec.volumeName||"",capacity:((n=e.status.capacity)==null?void 0:n.storage)||"",accessModes:((s=e.spec.accessModes)==null?void 0:s.join(","))||"",storageClassName:e.spec.storageClassName||"",volumeMode:e.spec.volumeMode||"",age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left"},{name:"Status",key:"statusStr",align:"left"},{name:"Volume",key:"volume",align:"left"},{name:"Capacity",key:"capacity",align:"left"},{name:"Access Modes",key:"accessModes",align:"left"},{name:"StorageClass",key:"storageClassName",align:"left"},{name:"VolumeMode ",key:"volumeMode",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",children:[{name:"storageClassName",component:en,key:"spec.storageClassName"},{name:"accessModes",key:"spec.accessModes",component:$a,option:{label:"Access Modes",options:[{name:"ReadWriteOnce",value:"ReadWriteOnce"},{name:"ReadOnlyMany",value:"ReadOnlyMany"},{name:"ReadWriteMany",value:"ReadWriteMany"}]}},{name:"volumeMode",key:"spec.volumeMode",component:pt,option:{label:"Volume Mode",options:[{name:"Filesystem",value:"Filesystem"},{name:"Block",value:"Block"}]}},{name:"resources",children:[{name:"requests",children:[{name:"storage",key:"spec.resources.requests.storage",component:be,option:{label:"Storage"}}]}]},{name:"selector",component:ct,key:"spec.selector",defaultValue(){return{}}}]}]}}class Jo extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.PersistentVolumeClaim]}getStatus(){let e=this.raw,t=this.resources.PersistentVolumeClaim.getAllRawList().filter(s=>s.spec.storageClassName===e.metadata.name),a=[];return[{condition:()=>a.length>0||t.length>0,result:{status:"Active",className:"status-active",description:`StorageClass 正在被 ${a.length} 个 PVC 和 ${t.length} 个 PV 使用。Provisioner：${e.provisioner}。`}},{condition:()=>!0,result:{status:"Active",className:"status-active",description:`StorageClass 可用但未被任何 PVC/PV 使用。Provisioner：${e.provisioner}。`}}].find(s=>s.condition()).result}getTableRow(){var n;let e=this.raw;const t=e.metadata||{};e.spec;let a={id:t.name,name:t.name||"",status:this.getStatus(e),provisioner:e.provisioner,default:((n=t.annotations)==null?void 0:n["storageclass.kubernetes.io/is-default-class"])==="true",age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Provisioner ",key:"provisioner",align:"left"},{name:"Default ",key:"default",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"provisioner",component:be,option:{label:"provisioner"},key:"provisioner"},{name:"reclaimPolicy",component:pt,option:{label:"reclaimPolicy",options:[{name:"Delete",value:"Delete"},{name:"Retain",value:"Retain"}]},key:"reclaimPolicy"},{name:"allowVolumeExpansion",component:Le,option:{label:"allowVolumeExpansion"},key:"allowVolumeExpansion"},{name:"volumeBindingMode",component:pt,option:{label:"volumeBindingMode",options:[{name:"Immediate",value:"Immediate"},{name:"WaitForFirstConsumer",value:"WaitForFirstConsumer"}]},key:"volumeBindingMode"},{name:"parameters",component:ga,option:{label:"parameters"},key:"parameters"},{name:"mountOptions",component:xt,option:{label:"mountOptions"},key:"mountOptions"}]}}var Xo=(d,e,t)=>e(i(t)),Qo=j('<div class="block port-grid svelte-1bq9jn6"><div class="field"><!></div> <div class="field"><!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-1bq9jn6"><button class="btn btn-blank">Remove</button></div></div></div>'),$o=(d,e)=>e(),ed=j('<div class="section"><div class="title">Rules</div> <!> <div class="bottom"><button class="btn btn-primary">Add Rule</button></div></div>');function td(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X([])),a=ae(X([])),n=[{name:"*",value:"*"},{name:"apps",value:"apps"},{name:"batch",value:"batch"},{name:"extensions",value:"extensions"},{name:"networking.k8s.io",value:"networking.k8s.io"},{name:"policy",value:"policy"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"},{name:"storage.k8s.io",value:"storage.k8s.io"},{name:"autoscaling",value:"autoscaling"},{name:"certificates.k8s.io",value:"certificates.k8s.io"},{name:"events.k8s.io",value:"events.k8s.io"},{name:"admissionregistration.k8s.io",value:"admissionregistration.k8s.io"},{name:"scheduling.k8s.io",value:"scheduling.k8s.io"},{name:"coordination.k8s.io",value:"coordination.k8s.io"},{name:"node.k8s.io",value:"node.k8s.io"},{name:"flowcontrol.apiserver.k8s.io",value:"flowcontrol.apiserver.k8s.io"},{name:"authentication.k8s.io",value:"authentication.k8s.io"},{name:"apiextensions.k8s.io",value:"apiextensions.k8s.io"},{name:"metrics.k8s.io",value:"metrics.k8s.io"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"},{name:"authorization.k8s.io",value:"authorization.k8s.io"},{name:"discovery.k8s.io",value:"discovery.k8s.io"},{name:"internal.apiserver.k8s.io",value:"internal.apiserver.k8s.io"},{name:"apiregistration.k8s.io",value:"apiregistration.k8s.io"},{name:"storage.k8s.io",value:"storage.k8s.io"},{name:"networking.k8s.io",value:"networking.k8s.io"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"},{name:"apiextensions.k8s.io",value:"apiextensions.k8s.io"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"}],s=[{name:"*",value:"*"},{name:"pods",value:"pods"},{name:"pods/attach",value:"pods/attach"},{name:"pods/exec",value:"pods/exec"},{name:"pods/portforward",value:"pods/portforward"},{name:"pods/proxy",value:"pods/proxy"},{name:"pods/log",value:"pods/log"},{name:"services",value:"services"},{name:"services/proxy",value:"services/proxy"},{name:"namespaces",value:"namespaces"},{name:"namespaces/proxy",value:"namespaces/proxy"},{name:"nodes",value:"nodes"},{name:"nodes/proxy",value:"nodes/proxy"},{name:"endpoints",value:"endpoints"},{name:"endpoints/proxy",value:"endpoints/proxy"},{name:"replicationcontrollers",value:"replicationcontrollers"},{name:"replicationcontrollers/proxy",value:"replicationcontrollers/proxy"},{name:"limitranges",value:"limitranges"},{name:"resourcequotas",value:"resourcequotas"},{name:"persistentvolumeclaims",value:"persistentvolumeclaims"},{name:"persistentvolumes",value:"persistentvolumes"},{name:"configmaps",value:"configmaps"},{name:"secrets",value:"secrets"},{name:"serviceaccounts",value:"serviceaccounts"},{name:"roles",value:"roles"},{name:"rolebindings",value:"rolebindings"},{name:"clusterrolebindings",value:"clusterrolebindings"},{name:"clusterroles",value:"clusterroles"},{name:"customresourcedefinitions",value:"customresourcedefinitions"},{name:"ingresses",value:"ingresses"},{name:"daemonsets",value:"daemonsets"},{name:"deployments",value:"deployments"},{name:"statefulsets",value:"statefulsets"},{name:"cronjobs",value:"cronjobs"},{name:"jobs",value:"jobs"},{name:"horizontalpodautoscalers",value:"horizontalpodautoscalers"},{name:"poddisruptionbudgets",value:"poddisruptionbudgets"},{name:"networkpolicies",value:"networkpolicies"},{name:"ingresses",value:"ingresses"},{name:"pods",value:"pods"}],l=[{name:"*",value:"*"},{name:"get",value:"get"},{name:"list",value:"list"},{name:"watch",value:"watch"},{name:"create",value:"create"},{name:"update",value:"update"},{name:"patch",value:"patch"},{name:"delete",value:"delete"},{name:"deletecollection",value:"deletecollection"}];function o(){i(a).push({id:Math.random(),apiGroups:[],resources:[],verbs:[]})}function c(u){q(a,i(a).filter(r=>r.id!==u.id),!0),y()}oe(()=>{t()&&q(a,t().map(u=>({id:Math.random(),apiGroups:u.apiGroups||[],resources:u.resources||[],verbs:u.verbs||[]})),!0)});function y(){let u=i(a).map(r=>({apiGroups:r.apiGroups||[],resources:r.resources||[],verbs:r.verbs||[]}));t(u),e.callback&&e.callback(u)}var k=ed(),h=P(b(k),2);ke(h,17,()=>i(a),_e,(u,r,m)=>{var p=Qo(),_=b(p),S=b(_);Je(S,{label:"ApiGroups",options:n,onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).apiGroups},set value(G){i(r).apiGroups=G}}),f(_);var C=P(_,2),A=b(C);Je(A,{options:s,label:"Resources",onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).resources},set value(G){i(r).resources=G}}),f(C);var L=P(C,2),E=b(L);Je(E,{label:"Verbs",options:l,onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).verbs},set value(G){i(r).verbs=G}}),f(L);var O=P(L,2),D=b(O),N=b(D);N.__click=[Xo,c,r],f(D),f(O),f(p),ne(()=>N.disabled=e.disabled),V(u,p)});var g=P(h,2),v=b(g);v.__click=[$o,o],f(g),f(k),ne(()=>v.disabled=e.disabled),V(d,k),ue()}xe(["click"]);class ad extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.RoleBinding]}getStatus(){var n;let e=this.raw,t=this.resources.RoleBinding.getAllRawList().filter(s=>s.roleRef.name===e.metadata.name);return[{condition:()=>t.length===0,result:{status:"Unused",className:"status-unused",message:`Role 未被任何 RoleBinding/ClusterRoleBinding 引用。命名空间：${e.metadata.namespace||"集群"}`}},{condition:()=>!0,result:{status:"Active",className:"status-active",message:`Role 正常使用中。关联的 Binding 数量：${t.length}，规则数量：${((n=e.rules)==null?void 0:n.length)||0}`}}].find(s=>s.condition()).result}getTableRow(){let e=this.raw;const t=e.metadata||{};e.spec;let a={id:t.name,name:t.name||"",namespace:t.namespace||"",status:this.getStatus(e),age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"rules",component:td,key:"rules"}]}}class nd extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Role,this.resources.ClusterRole,this.resources.ServiceAccount]}getCreatable(e){return null}getStatus(){let e=this.raw,t=null;e.roleRef.kind==="Role"?t=this.resources.Role.getAllRawList().find(s=>s.metadata.name===e.roleRef.name):(t=this.resources.ClusterRole.getAllRawList().find(s=>s.metadata.name===e.roleRef.name),!t&&!Fe.isAdmin()&&(t={}));let a=e.subjects.map(s=>{let l=!1;return s.kind==="ServiceAccount"?l=this.resources.ServiceAccount.getAllRawList().filter(c=>c.metadata.name===s.name).length>0||!Fe.isAdmin():(s.kind==="User"||s.kind==="Group")&&(l=!0),{name:s.name,kind:s.kind,valid:l}});return[{condition:()=>{const s=!t,l=a.some(o=>!o.valid);return s||l},result:{status:"Invalid",className:"status-invalid",message:`RoleBinding 配置无效。${t?"":`关联的 Role/ClusterRole "${e.roleRef.name}" 不存在。`}${a.filter(s=>!s.valid).map(s=>`Subject "${s.name}" (${s.kind}) 无效。`).join(" ")}`}},{condition:()=>!0,result:{status:"Active",className:"status-active",message:`RoleBinding 正在生效。绑定的 Role：${e.roleRef.name}，Subjects：${a.map(s=>`${s.kind}/${s.name}`).join(", ")}`}}].find(s=>s.condition()).result}getTableRow(){let e=this.raw;const t=e.metadata||{};e.spec;let a={id:t.name,name:t.name||"",namespace:t.namespace||"",status:this.getStatus(e),role:e.roleRef.kind+"/"+e.roleRef.name,users:e.subjects.filter(n=>n.kind==="User").map(n=>n.name).join(","),groups:e.subjects.filter(n=>n.kind==="Group").map(n=>n.name).join(","),serviceAccounts:e.subjects.filter(n=>n.kind==="ServiceAccount").map(n=>`${n.namespace}/${n.name}`).join(","),age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left"},{name:"Role",key:"role",align:"left"},{name:"Users",key:"users",align:"left"},{name:"Groups",key:"groups",align:"left"},{name:"ServiceAccounts",key:"serviceAccounts",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getActions(){return["EditYaml","CloneYaml","line","Download","Delete"]}getIntro(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}}class Fa extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.Pod,this.resources.Secret]}getCreatable(e){return null}getStatus(){let e=this.raw;const t=this.resources.Pod.getAllRawList().filter(s=>s.spec.serviceAccountName===e.metadata.name);let a=this.resources.Secret.getAllRawList().filter(s=>{var l;return s.type==="kubernetes.io/service-account-token"&&((l=s.metadata.annotations)==null?void 0:l["kubernetes.io/service-account.name"])===e.metadata.name});return[{condition:()=>t.length===0?!1:a.some(s=>{var l;return!s.data||((l=s.metadata.annotations)==null?void 0:l["kubernetes.io/service-account.uid"])!==e.metadata.uid}),result:{status:"InUseWithError",className:"status-in-use-with-error",message:`ServiceAccount 被 ${t.length} 个 Pod 使用，但关联的 Secret 可能无效（如 Token 过期或 UID 不匹配）。请检查 Secrets：${a.map(s=>s.metadata.name).join(", ")}`}},{condition:()=>t.length>0,result:{status:"Active",className:"status-active",message:`ServiceAccount 正在被 ${t.length} 个 Pod 使用。关联 Secrets：${a.map(s=>s.metadata.name).join(", ")||"无"}`}},{condition:()=>a.length>0,result:{status:"Active",className:"status-active",message:`ServiceAccount 有效但未被任何 Pod 使用。已生成 Secrets：${a.map(s=>s.metadata.name).join(", ")}`}},{condition:()=>!0,result:{status:"Orphaned",className:"status-orphaned",message:`ServiceAccount 未被使用且无关联的 Secrets。${e.automountServiceAccountToken===!1?"（automountServiceAccountToken 已显式关闭）":"可能未生成 Token。"}`}}].find(s=>s.condition()).result}getTableRow(){var s;let e=this.raw;const t=e.metadata||{},a=e.spec||{};let n={id:t.name,name:t.name||"",namespace:t.namespace||"",status:this.getStatus(e),secrets:((s=a.secrets)==null?void 0:s.length)||0,age:this.age};return n.ready=`${n.availableReplicas}/${n.replicas}`,n.status.status!=="Active"&&n.status.message&&(n.rowOption={className:"row-desc"},n.status.showDescription=!0),n}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left"},{name:"Secrets",key:"secrets",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getActions(){return["EditYaml","CloneYaml","line","Download","Delete"]}getIntro(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}}class sd extends Rt{constructor(e,t){super(e,t)}getTableRow(){var l,o,c,y;let e=this.raw;const t=e.metadata||{},a=e.spec||{},n=e.status||{};let s={id:t.name,name:t.name||"",namespace:t.namespace||"",image:((y=(c=(o=(l=a.template)==null?void 0:l.spec)==null?void 0:o.containers)==null?void 0:c[0])==null?void 0:y.image)||"",completions:a.completions||0,parallelism:a.parallelism||0,status:this.getStatus(e),duration:(new Date(n.completionTime)-new Date(n.startTime))/1e3+"s",creationTimestamp:t.creationTimestamp||"",publicEndpoints:this._getPublicEndpoints(t.annotations||{}),age:this.age};return s.status.status!=="Active"&&s.status.message&&(s.rowOption={className:"row-desc"},s.status.showDescription=!0),s}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",width:"130px",sortable:!0,sorted:"asc"},{name:"Namespace",key:"namespace",align:"left",width:"100px"},{name:"Image",key:"image",align:"left"},{name:"Endpoints",key:"publicEndpoints",align:"left",width:"110px"},{name:"Completions",key:"completions",align:"center",width:"100px"},{name:"Duration",key:"duration",align:"center",width:"80px",sortable:!0},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0},{name:"Health",key:"health",align:"center",width:"150px"}]}getActions(){return["Detail","Yaml","Config","ViewYaml","ViewConfig","Clone","Download","ExecuteShell","Delete"]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"spec",component:null,key:"spec",children:[{name:"completions",component:be,option:{label:"completions",type:"number"},key:"spec.completions"},{name:"parallelism",component:be,option:{label:"parallelism",type:"number"},key:"spec.parallelism"},{name:"backoffLimit",component:be,option:{label:"backoffLimit",type:"number"},key:"spec.backoffLimit"},{name:"activeDeadlineSeconds",component:be,option:{label:"activeDeadlineSeconds",type:"number"},key:"spec.activeDeadlineSeconds"},{name:"selector",component:ct,key:"spec.selector"},{name:"template",component:null,key:"spec.template",children:[{name:"metadata",component:ia,key:"spec.template.metadata"},{name:"spec",component:null,key:"spec.template.spec",children:[{name:"containers",component:Lt,key:"spec.template.spec.containers",defaultValue(){return[]}},{name:"initContainers",component:Mt,key:"spec.template.spec.initContainers",defaultValue(){return[]}},{name:"volumes",component:zt,key:"spec.template.spec.volumes",defaultValue(){return[]}},{name:"imagePullSecrets",component:Bt,key:"spec.template.spec.imagePullSecrets"},{name:"serviceAccountName",component:Ut,key:"spec.template.spec.serviceAccountName"},{name:"automountServiceAccountToken",component:Le,option:{label:"automountServiceAccountToken"},key:"spec.template.spec.automountServiceAccountToken"},{name:"nodeSelector",component:Ft,key:"spec.template.spec.nodeSelector"},{name:"affinity",component:Vt,key:"spec.template.spec.affinity"},{name:"tolerations",component:jt,key:"spec.template.spec.tolerations"},{name:"dnsPolicy",component:Kt,key:"spec.template.spec.dnsPolicy"},{name:"dnsConfig",component:Ht,key:"spec.template.spec.dnsConfig"},{name:"hostNetwork",component:Le,option:{label:"hostNetwork"},key:"spec.template.spec.hostNetwork"},{name:"hostPID",component:Le,option:{label:"hostPID"},key:"spec.template.spec.hostPID"},{name:"hostIPC",component:Le,option:{label:"hostIPC"},key:"spec.template.spec.hostIPC"},{name:"restartPolicy",component:Wt,key:"spec.template.spec.restartPolicy"}]}]}]}]}}var id=(d,e,t)=>e(i(t)),rd=j('<div class="block port-grid svelte-3b1ok7"><div class="field"><div class="title">Api Groups</div> <!></div> <div class="field"><div class="title">Resources</div> <!></div> <div class="field"><div class="title">Verbs</div> <!></div> <div class="field"><!></div> <div class="field"><div class="remove svelte-3b1ok7"><button class="btn btn-blank">Remove</button></div></div></div>'),ld=(d,e)=>e(),od=j('<div class="section"><div class="title">Rules</div> <!> <div class="bottom"><button class="btn btn-primary">Add Rule</button></div></div>');function dd(d,e){ce(e,!0);let t=pe(e,"value",31,()=>X([])),a=ae(X([])),n=[{name:"*",value:"*"},{name:"apps",value:"apps"},{name:"batch",value:"batch"},{name:"extensions",value:"extensions"},{name:"networking.k8s.io",value:"networking.k8s.io"},{name:"policy",value:"policy"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"},{name:"storage.k8s.io",value:"storage.k8s.io"},{name:"autoscaling",value:"autoscaling"},{name:"certificates.k8s.io",value:"certificates.k8s.io"},{name:"events.k8s.io",value:"events.k8s.io"},{name:"admissionregistration.k8s.io",value:"admissionregistration.k8s.io"},{name:"scheduling.k8s.io",value:"scheduling.k8s.io"},{name:"coordination.k8s.io",value:"coordination.k8s.io"},{name:"node.k8s.io",value:"node.k8s.io"},{name:"flowcontrol.apiserver.k8s.io",value:"flowcontrol.apiserver.k8s.io"},{name:"authentication.k8s.io",value:"authentication.k8s.io"},{name:"apiextensions.k8s.io",value:"apiextensions.k8s.io"},{name:"metrics.k8s.io",value:"metrics.k8s.io"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"},{name:"authorization.k8s.io",value:"authorization.k8s.io"},{name:"discovery.k8s.io",value:"discovery.k8s.io"},{name:"internal.apiserver.k8s.io",value:"internal.apiserver.k8s.io"},{name:"apiregistration.k8s.io",value:"apiregistration.k8s.io"},{name:"storage.k8s.io",value:"storage.k8s.io"},{name:"networking.k8s.io",value:"networking.k8s.io"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"},{name:"apiextensions.k8s.io",value:"apiextensions.k8s.io"},{name:"rbac.authorization.k8s.io",value:"rbac.authorization.k8s.io"}],s=[{name:"*",value:"*"},{name:"pods",value:"pods"},{name:"pods/attach",value:"pods/attach"},{name:"pods/exec",value:"pods/exec"},{name:"pods/portforward",value:"pods/portforward"},{name:"pods/proxy",value:"pods/proxy"},{name:"pods/log",value:"pods/log"},{name:"services",value:"services"},{name:"services/proxy",value:"services/proxy"},{name:"namespaces",value:"namespaces"},{name:"namespaces/proxy",value:"namespaces/proxy"},{name:"nodes",value:"nodes"},{name:"nodes/proxy",value:"nodes/proxy"},{name:"endpoints",value:"endpoints"},{name:"endpoints/proxy",value:"endpoints/proxy"},{name:"replicationcontrollers",value:"replicationcontrollers"},{name:"replicationcontrollers/proxy",value:"replicationcontrollers/proxy"},{name:"limitranges",value:"limitranges"},{name:"resourcequotas",value:"resourcequotas"},{name:"persistentvolumeclaims",value:"persistentvolumeclaims"},{name:"persistentvolumes",value:"persistentvolumes"},{name:"configmaps",value:"configmaps"},{name:"secrets",value:"secrets"},{name:"serviceaccounts",value:"serviceaccounts"},{name:"roles",value:"roles"},{name:"rolebindings",value:"rolebindings"},{name:"clusterrolebindings",value:"clusterrolebindings"},{name:"clusterroles",value:"clusterroles"},{name:"customresourcedefinitions",value:"customresourcedefinitions"},{name:"ingresses",value:"ingresses"},{name:"daemonsets",value:"daemonsets"},{name:"deployments",value:"deployments"},{name:"statefulsets",value:"statefulsets"},{name:"cronjobs",value:"cronjobs"},{name:"jobs",value:"jobs"},{name:"horizontalpodautoscalers",value:"horizontalpodautoscalers"},{name:"poddisruptionbudgets",value:"poddisruptionbudgets"},{name:"networkpolicies",value:"networkpolicies"},{name:"ingresses",value:"ingresses"},{name:"pods",value:"pods"}],l=[{name:"*",value:"*"},{name:"get",value:"get"},{name:"list",value:"list"},{name:"watch",value:"watch"},{name:"create",value:"create"},{name:"update",value:"update"},{name:"patch",value:"patch"},{name:"delete",value:"delete"},{name:"deletecollection",value:"deletecollection"}];function o(){i(a).push({id:Math.random(),apiGroups:[],resources:[],nonResourceURLs:[],verbs:[]})}function c(u){q(a,i(a).filter(r=>r.id!==u.id),!0)}oe(()=>{t()&&q(a,t().map(u=>({id:Math.random(),apiGroups:u.apiGroups||[],resources:u.resources||[],nonResourceURLs:u.nonResourceURLs||[],verbs:u.verbs||[]})),!0)});function y(){let u=i(a).map(r=>({apiGroups:r.apiGroups||[],resources:r.resources||[],nonResourceURLs:r.nonResourceURLs||[],verbs:r.verbs||[]}));t(u),e.callback&&e.callback(u)}var k=od(),h=P(b(k),2);ke(h,17,()=>i(a),_e,(u,r,m)=>{var p=rd(),_=b(p),S=P(b(_),2);Je(S,{label:"ApiGroups",options:n,onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).apiGroups},set value(M){i(r).apiGroups=M}}),f(_);var C=P(_,2),A=P(b(C),2);Je(A,{options:s,label:"Resources",onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).resources},set value(M){i(r).resources=M}}),f(C);var L=P(C,2),E=P(b(L),2);Je(E,{label:"Verbs",options:l,onClose:()=>y(),get disabled(){return e.disabled},get value(){return i(r).verbs},set value(M){i(r).verbs=M}}),f(L);var O=P(L,2),D=b(O);xt(D,{label:"nonResourceURLs",callback:()=>y(),get disabled(){return e.disabled},get value(){return i(r).nonResourceURLs},set value(M){i(r).nonResourceURLs=M}}),f(O);var N=P(O,2),G=b(N),R=b(G);R.__click=[id,c,r],f(G),f(N),f(p),ne(()=>R.disabled=e.disabled),V(u,p)});var g=P(h,2),v=b(g);v.__click=[ld,o],f(g),f(k),ne(()=>v.disabled=e.disabled),V(d,k),ue()}xe(["click"]);class cd extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.ClusterRoleBinding]}getStatus(){var n;let e=this.raw,t=this.resources.ClusterRoleBinding.getAllRawList().filter(s=>s.roleRef.name===e.metadata.name);return[{condition:()=>t.length===0,result:{status:"Unused",className:"status-unused",message:`Role 未被任何 RoleBinding/ClusterRoleBinding 引用。命名空间：${e.metadata.namespace||"集群"}`}},{condition:()=>!0,result:{status:"Active",className:"status-active",message:`Role 正常使用中。关联的 Binding 数量：${t.length}，规则数量：${((n=e.rules)==null?void 0:n.length)||0}`}}].find(s=>s.condition()).result}getTableRow(){let e=this.raw;const t=e.metadata||{};let a={id:t.name,name:t.name||"",status:this.getStatus(e),age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getDetailTabs(e){return[{id:"data",title:"Data",component:ba,params:{configmap:e}},{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}getFormDefinition(){return[{name:"metadata",component:Te,key:"metadata",option:{label:"metadata"}},{name:"rules",component:dd,key:"rules"}]}}class ud extends Be{constructor(e,t){super(e,t)}getDependence(){return[this.resources.ClusterRole,this.resources.ServiceAccountAll]}getCreatable(e){return null}getStatus(){let e=this.raw,t=this.resources.ClusterRole.getAllRawList().find(s=>s.metadata.name===e.roleRef.name),a=e.subjects.map(s=>{let l=!1;return s.kind==="ServiceAccount"?l=this.resources.ServiceAccountAll.getAllRawList().filter(c=>c.metadata.name===s.name).length>0:(s.kind==="User"||s.kind==="Group")&&(l=!0),{name:s.name,kind:s.kind,valid:l}});return[{condition:()=>{const s=!t,l=a.some(o=>!o.valid);return s||l},result:{status:"Invalid",className:"status-invalid",message:`ClusterRoleBinding 配置无效。${t?"":`关联的 ClusterRole "${e.roleRef.name}" 不存在。`}${a.filter(s=>!s.valid).map(s=>`Subject "${s.name}" (${s.kind}) 无效。`).join(" ")}`}},{condition:()=>!0,result:{status:"Active",className:"status-active",message:`ClusterRoleBinding 正在生效。绑定的 ClusterRole：${e.roleRef.name}，Subjects：${a.map(s=>`${s.kind}/${s.name}`).join(", ")}`}}].find(s=>s.condition()).result}getTableRow(){let e=this.raw;const t=e.metadata||{};e.spec;let a={id:t.name,name:t.name||"",status:this.getStatus(e),role:e.roleRef.kind+"/"+e.roleRef.name,users:e.subjects.filter(n=>n.kind==="User").map(n=>n.name).join(","),groups:e.subjects.filter(n=>n.kind==="Group").map(n=>n.name).join(","),serviceAccounts:e.subjects.filter(n=>n.kind==="ServiceAccount").map(n=>`${n.namespace}/${n.name}`).join(","),age:this.age};return a.ready=`${a.availableReplicas}/${a.replicas}`,a.status.status!=="Active"&&a.status.message&&(a.rowOption={className:"row-desc"},a.status.showDescription=!0),a}getTableHeader(){return[{name:"State",key:"status",align:"left",width:"100px"},{name:"Name",key:"name",align:"left",sortable:!0,sorted:"asc"},{name:"Role",key:"role",align:"left"},{name:"Users",key:"users",align:"left"},{name:"Groups",key:"groups",align:"left"},{name:"ServiceAccounts",key:"serviceAccounts",align:"left"},{name:"Age",key:"age",align:"center",width:"80px",sortable:!0}]}getIntro(e){return[]}getActionPages(e){return[]}getDetailTabs(e){return[{id:"refers",title:"Related Resources",component:We,params:{name:e.metadata.name,namespace:e.metadata.namespace,kind:e.kind}}]}getDetailComponents(e){return[]}}class md{constructor(e){this.url=e}async post(e={}){let t=await fetch(this.url,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?await t.json():{code:1,msg:"error"}}}var Tt;class ya{constructor(e){At(this,"loading",!1);At(this,"error",!1);At(this,"errorMsg",null);At(this,"done",!1);xa(this,Tt,ae(X(Date.now())));this.url=e,this.requester=new md(e),this.rawData=[],this.clusters=[]}get updated(){return i(oa(this,Tt))}set updated(e){q(oa(this,Tt),e,!0)}async get(e={}){if(Ye.locked||!this.updated||this.done||this.loading)return;this.loading=!0;let{code:t,data:a=[],msg:n}=await this.requester.post(e);t===0?(this.error=!1,this.loading=!1,this.done=!0):(this.error=!0,this.errorMsg=n,this.loading=!1,this.done=!1),this._addOrReplace(a||[]),this.updated=Date.now()}_addOrReplace(e=[]){(e||[]).forEach(t=>{let a=this.rawData.findIndex(n=>n.metadata.name===t.metadata.name&&n.metadata.namespace===t.metadata.namespace);a!==-1?this.rawData[a]=t:this.rawData.push(t)}),this.updated=Date.now()}getData(){return this.rawData}reset(){this.done=!1,this.loading=!1,this.error=!1,this.errorMsg="",this.rawData=[],this.updated=Date.now()}reload(){this.reset(),this.get()}update(e){let t=this.rawData.findIndex(a=>a.metadata.uid===e.metadata.uid);t!==-1?this.rawData[t]=e:this.rawData.push(e),this.updated=Date.now()}delete(e){this.rawData=this.rawData.filter(t=>t.metadata.uid!==e.metadata.uid),this.updated=Date.now()}add(e){this.update(e)}getByName(e){return(this.rawData||[]).find(t=>t.metadata.name===e)}getByMatchLabels(e={}){return(this.rawData||[]).filter(t=>Object.keys(e).every(a=>{var n,s;return((s=(n=t.metadata)==null?void 0:n.labels)==null?void 0:s[a])===e[a]}))}}Tt=new WeakMap;class vd extends ya{constructor(e){super(e)}async get(e){Fe.id&&await super.get()}}class pd extends ya{constructor(e){super(e)}async get(e){Fe.id&&!this.clusters.includes(Fe.id)&&this.done&&(this.clusters.push(Fe.id),this.reset()),await super.get()}}class ua extends ya{constructor(e){super(e),this.namespaced=[]}async get(e){Ye.toggling&&this.done&&this.reset(),Ye.namespace&&(this.namespaced.includes(Ye.namespace)||(this.namespaced.push(Ye.namespace),this.done=!1),await super.get({namespace:Ye.namespace}))}reset(){this.namespaced=[],super.reset()}getData(){return Ye.namespace?this.rawData.filter(e=>e.metadata.namespace===Ye.namespace):this.rawData}getAllData(){return this.rawData}}class Ae{constructor(e,t,a,{type:n=0,namespaced:s=!0,object:l=!1}={}){this.kind=e,this.handler=a,n===0?this.keeper=new ua(t):n===1?this.keeper=new pd(t):n===2&&(this.keeper=new vd(t)),this._dependence=null,this.namespaced=!["ClusterRole","ClusterRoleBinding","PersistentVolume","StorageClass","Node","Namespace"].includes(e)}_getDependenceDark(e=new Set){if(this._dependence)return this._dependence;if(e.has(this))return[];e.add(this);let t=[this];return this.getHandler(null).getDependence().forEach(a=>{t.includes(a)||(t.push(a),a._getDependenceDark(e).forEach(n=>{n!==this&&(t.includes(n)||t.push(n))}))}),this._dependence=t,this._dependence}_getDependence(){return this._dependence}get done(){return this.keeper.done}getHandler(e){let t=new this.handler(e,ut);return t.handleKind=this.kind,t}getRawList(){return this.keeper.getData()}getAllRawList(){return this.keeper instanceof ua?this.keeper.getAllData():this.keeper.getData()}getList(){return this.keeper.getData().map(e=>this.getHandler(e))}getAllList(){let e=this.keeper.getData();return this.keeper instanceof ua&&(e=this.keeper.getAllData()),e.map(t=>this.getHandler(t))}getDetailList(){return this.getList().map(e=>e.getDetail())}getTableList(){return this.getList().map(e=>e.getTableRow())}getByName(e){return this.getAllList().find(t=>this.namespaced?t.name===e&&t.namespace===Ye.namespace:t.name===e)}getRawByName(e){return this.getAllRawList().find(t=>this.namespaced?t.metadata.name===e&&t.metadata.namespace===Ye.namespace:t.metadata.name===e)}getByLabels(e={}){return this.getAllList().filter(t=>Object.keys(e).every(a=>{var n;return((n=t.labels)==null?void 0:n[a])===e[a]}))}getRawByLabels(e={}){return this.getAllRawList().filter(t=>Object.keys(e).every(a=>{var n;return((n=t.metadata.labels)==null?void 0:n[a])===e[a]}))}getRawBySelector(e={}){return this.getAllRawList().filter(t=>Object.keys(e).every(a=>{var n,s;return((s=(n=t.spec.selector)==null?void 0:n.matchLabels)==null?void 0:s[a])===e[a]}))}ready(e){if(Ye.locked)return;let t=this._getDependence();t.forEach(a=>a.keeper.get()),t.find(a=>!a.keeper.done)===void 0&&e&&e()}waitUtil(e){if(Ye.locked)return;let t=this._getDependence();t.forEach(a=>a.keeper.get()),t.find(a=>!a.keeper.done)===void 0?e&&e():setTimeout(()=>this.waitUtil(e),500)}wait(e){if(Ye.locked)return;let t=this._getDependence();t.forEach(a=>a.keeper.get()),t.find(a=>!a.keeper.done)===void 0?e&&e(!0):e&&e(!1)}}const fd={initialize(){Reflect.ownKeys(ut).forEach(d=>ut[d]._getDependenceDark()),Ra.on("resourceUpdate",d=>this.updateResource(d)),Ra.on("resetNamespace",()=>{ut.Namespace.keeper.reset(),console.log("=> Namespace reset done")})},updateResource({kind:d,action:e,target:t}){var a,n,s;["MODIFIED","ERROR","BOOKMARK"].includes(e)?(a=ut[d])==null||a.keeper.update(t):e==="DELETED"?(n=ut[d])==null||n.keeper.delete(t):e==="ADDED"&&((s=ut[d])==null||s.keeper.add(t))}},ut={Node:new Ae("Node","/kube/resource/Node",Jl,{type:1}),Namespace:new Ae("Namespace","/kube/resource/Namespace",to,{type:2}),Pod:new Ae("Pod","/kube/resource/Pod",rs),Deployment:new Ae("Deployment","/kube/resource/Deployment",Rt),Service:new Ae("Service","/kube/resource/Service",cl),Ingress:new Ae("Ingress","/kube/resource/Ingress",Nl),Container:new Ae("Container","/kube/resource/Container",Wl),ConfigMap:new Ae("ConfigMap","/kube/resource/ConfigMap",Hl),Endpoints:new Ae("Endpoints","/kube/resource/Endpoints",Xl),NodeMetrics:new Ae("NodeMetrics","/kube/nodes/metrics",ao,{type:1}),ReplicaSet:new Ae("ReplicaSet","/kube/resource/ReplicaSet",no),DaemonSet:new Ae("DaemonSet","/kube/resource/DaemonSet",ro),StatefulSet:new Ae("StatefulSet","/kube/resource/StatefulSet",xo),CronJob:new Ae("CronJob","/kube/resource/CronJob",Ro),Job:new Ae("Job","/kube/resource/Job",sd),Secret:new Ae("Secret","/kube/resource/Secret",To),HorizontalPodAutoscaler:new Ae("HorizontalPodAutoscaler","/kube/resource/HorizontalPodAutoscaler",Ho),NetworkPolicy:new Ae("NetworkPolicy","/kube/resource/NetworkPolicy",Wo),PersistentVolume:new Ae("PersistentVolume","/kube/resource/PersistentVolume",Zo,{type:1}),PersistentVolumeClaim:new Ae("PersistentVolumeClaim","/kube/resource/PersistentVolumeClaim",Yo),StorageClass:new Ae("StorageClass","/kube/resource/StorageClass",Jo,{type:1}),Role:new Ae("Role","/kube/resource/Role",ad),RoleBinding:new Ae("RoleBinding","/kube/resource/RoleBinding",nd),ServiceAccount:new Ae("ServiceAccount","/kube/resource/ServiceAccount",Fa),ClusterRole:new Ae("ClusterRole","/kube/resource/ClusterRole",cd,{type:1}),ClusterRoleBinding:new Ae("ClusterRoleBinding","/kube/resource/ClusterRoleBinding",ud,{type:1}),ServiceAccountAll:new Ae("ServiceAccountAll","/kube/resource/ServiceAccount",Fa,{type:1})};fd.initialize();const Qd=Object.freeze(Object.defineProperty({__proto__:null,ResourceKinds:ut},Symbol.toStringTag,{value:"Module"}));export{He as K,ut as R,Qd as a};
