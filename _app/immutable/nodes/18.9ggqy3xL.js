import"../chunks/CWj6FrbW.js";import{p as H,s,u as L,b as N,c as l,d as R,g as e,r as S,f as Y,h as f}from"../chunks/QwNgEtIe.js";import{t as j,a as _,c as w}from"../chunks/DU17d604.js";import{i as x}from"../chunks/B8P2podd.js";import{Y as y}from"../chunks/DmUXbx2h.js";import{j as C}from"../chunks/mbYHt68G.js";import{R as E}from"../chunks/BGXyWBGH.js";var T=j('<div class="content svelte-1nud83o"><!></div>');function K(D,o){H(o,!0);let v=s(!1),u=s(null),d=s(""),n=s(null),m=s(null);function p(){e(n).gotoList()}async function k(t){let{code:r,msg:a}=await e(n).create(t);if(r!==0){l(m,a,!0);return}e(n).gotoList()}L(()=>{E.ready(o.data.kind,t=>{var a;let r=(a=t.getByName(o.data.name))==null?void 0:a.raw;if(!r){t.getHandler().gotoList();return}l(d,C.dump(t.getHandler().cleanResource(r)),!0),l(n,t.getHandler(),!0),l(u,r,!0),l(v,!0)})});var c=T(),h=R(c);{var F=t=>{var r=w(),a=Y(r);{var M=i=>{const g=f(()=>e(n).getDefinitionType(e(u))),B=f(()=>e(n).getFormDefinition(e(n).getDefinitionType(e(u))));y(i,{get content(){return e(d)},get kind(){return o.data.kind},get type(){return e(g)},editable:!0,get errorMsg(){return e(m)},onSave:k,saveBtnName:"Clone",scene:"clone",onExit:()=>p(),get kindDefinition(){return e(B)}})},b=i=>{const g=f(()=>e(n).getFormDefinition());y(i,{get content(){return e(d)},get kind(){return o.data.kind},get errorMsg(){return e(m)},onSave:k,scene:"clone",saveBtnName:"Clone",onExit:()=>p(),get kindDefinition(){return e(g)}})};x(a,i=>{e(n).isMultiFormDefinition()?i(M):i(b,!1)})}_(t,r)};x(h,t=>{e(v)&&t(F)})}S(c),_(D,c),N()}export{K as component};
