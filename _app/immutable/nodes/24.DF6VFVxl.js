import"../chunks/CWj6FrbW.js";import{p as at,s as y,a as et,u as L,e as c,d as i,b as ot,c as l,g as s,r as n,n as _,t as it}from"../chunks/QwNgEtIe.js";import{d as nt}from"../chunks/BUwIoTEU.js";import{t as u,a as f}from"../chunks/DU17d604.js";import{i as x}from"../chunks/B8P2podd.js";import{c as rt,h as st,a as lt,U as dt,S as vt}from"../chunks/B6grDUUQ.js";import{s as T,c as q}from"../chunks/DGVFHOD7.js";import{b as A}from"../chunks/Dric7B_l.js";import{Y as ct}from"../chunks/fATInaea.js";import{g as _t}from"../chunks/C0qwNRwb.js";import{S as ft}from"../chunks/CaR8id33.js";import{S as ut,H as mt}from"../chunks/Bdog4nq8.js";import{F as bt}from"../chunks/CYM2tTRf.js";import{j as B}from"../chunks/mbYHt68G.js";import{C as pt}from"../chunks/BENrx8rE.js";import{R as F}from"../chunks/BGXyWBGH.js";function gt(d,o){F.getKindHandler(o.data.kind).then(h=>{let{list:v}=h.getLinks(o.data.name);_t(v)})}var yt=u('<div class="body svelte-jxuajp"><!></div>'),ht=u('<div class="differ-body svelte-jxuajp"><!></div>'),kt=(d,o)=>l(o,"line-by-line"),jt=(d,o)=>l(o,"side-by-side"),xt=u('<div class="btn-group"><button><!> Unified</button> <button><!> Split</button></div>'),St=(d,o)=>o(d),wt=u('<div class="btn-group"><input type="file" style="display: none"> <button class="btn btn-primary"><!> Read from file</button></div>'),Ct=(d,o)=>o(),It=u('<button class="btn btn-primary"><!> Diff</button>'),Dt=(d,o)=>o(),Ft=u('<button class="btn btn-primary"><!> Diff</button>'),Ht=(d,o)=>o(),Rt=u('<div class="content svelte-jxuajp"><!> <!> <div class="foot-btns svelte-jxuajp"><div class="foot-btns-left svelte-jxuajp"><!></div> <div class="foot-btns-right"><div class="btn-group"><!></div> <div class="btn-group"><button class="btn btn-primary"><!> Cancel</button> <button class="btn btn-primary"><!> Save</button></div></div></div></div>');function Qt(d,o){at(o,!0);let h=y(et({})),v=y(!1),m=y(null),H=y(null),p=y("line-by-line"),g=null,k=null;function E(){g&&(l(m,g.getContent(),!0),l(v,!0))}function M(){l(v,!1)}function N(a){let t=a.target.files[0];if(!t){console.log("未选择文件");return}const e=new FileReader;e.onload=r=>{l(m,r.target.result,!0)},e.onerror=r=>{console.error("文件读取失败:",r)},e.readAsText(t)}async function O(){let a=g.getContent(),t=B.load(a),{code:e,msg:r}=await F.getKindHandler(o.data.kind).update({content:a,namespace:t.metadata.namespace});e!==0&&l(m,r,!0)}L(()=>{F.ready(o.data.kind,a=>{var r;let t=(r=a.getByName(o.data.name))==null?void 0:r.raw;if(!t){a.getHandler().gotoList();return}let e=B.dump(t);l(h,e,!0),l(m,e,!0)})}),L(()=>{if(s(v)){const a=rt("original.yaml","modified.yaml",s(h),s(m),"Original","Modified");l(H,st(a,{outputFormat:s(p),highlight:!0,matching:"words"}),!0)}});var S=Rt(),R=i(S);{var z=a=>{var t=yt(),e=i(t);A(ct(e,{get content(){return s(m)}}),r=>g=r,()=>g),n(t),f(a,t)},G=a=>{var t=ht(),e=i(t);lt(e,()=>s(H)),n(t),f(a,t)};x(R,a=>{s(v)?a(G,!1):a(z)})}var U=c(R,2);x(U,a=>{});var P=c(U,2),w=i(P),J=i(w);{var Q=a=>{var t=xt(),e=i(t);e.__click=[kt,p];var r=i(e);dt(r),_(),n(e);var b=c(e,2);b.__click=[jt,p];var D=i(b);vt(D),_(),n(b),n(t),it(()=>{T(e,1,q(["btn btn-primary",s(p)==="line-by-line"&&"hover"])),T(b,1,q(["btn btn-primary",s(p)==="side-by-side"&&"hover"]))}),f(a,t)},V=a=>{var t=wt(),e=i(t);e.__change=[St,N],A(e,D=>k=D,()=>k);var r=c(e,2);r.__click=()=>k&&k.click();var b=i(r);bt(b),_(),n(r),n(t),f(a,t)};x(J,a=>{s(v)?a(Q):a(V,!1)})}n(w);var Y=c(w,2),C=i(Y),W=i(C);{var X=a=>{var t=It();t.__click=[Ct,E];var e=i(t);ut(e),_(),n(t),f(a,t)},Z=a=>{var t=Ft();t.__click=[Dt,M];var e=i(t);mt(e),_(),n(t),f(a,t)};x(W,a=>{s(v)?a(Z,!1):a(X)})}n(C);var K=c(C,2),j=i(K);j.__click=[gt,o];var $=i(j);pt($),_(),n(j);var I=c(j,2);I.__click=[Ht,O];var tt=i(I);ft(tt),_(),n(I),n(K),n(Y),n(P),n(S),f(d,S),ot()}nt(["click","change"]);export{Qt as component};
