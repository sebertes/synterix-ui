import"../chunks/CWj6FrbW.js";import{p as qe,s as pe,a as Se,h as fe,g as e,u as Te,c as me,aA as ea,f as B,d as t,r as a,e as d,t as c,b as Be,M as aa}from"../chunks/QwNgEtIe.js";import{t as n,a as i,c as de,b as ta}from"../chunks/DU17d604.js";import{i as p}from"../chunks/B8P2podd.js";import{s as u}from"../chunks/DGaM1_9x.js";import{e as ie,i as oe}from"../chunks/bwyIVu-M.js";import{s as he}from"../chunks/D7ICzF4-.js";import{s as Y,c as Z}from"../chunks/DGVFHOD7.js";import{d as ra,e as sa}from"../chunks/BUwIoTEU.js";import{s as le}from"../chunks/DlV0Rhhi.js";import{b as va}from"../chunks/Dric7B_l.js";import{D as ia}from"../chunks/2DHpit1V.js";import{T as oa}from"../chunks/BKZmce3h.js";import{p as la}from"../chunks/Cbxbsz7q.js";import{c as Le}from"../chunks/CH5d7z7W.js";import{C as da}from"../chunks/Cpp2hBeD.js";import{C as na}from"../chunks/BENrx8rE.js";import{A as ze}from"../chunks/DZ_SlTCF.js";import{R as Ce,r as _a}from"../chunks/BGXyWBGH.js";import{t as ca}from"../chunks/YCu01eox.js";var ua=n('<div class="ep-item"> </div>'),pa=n("<a> </a>"),fa=(D,l,Q)=>l(D,Q().name),ma=n("<div></div>"),ha=n('<div><div class="bar"></div> <button class="dived arrow"><!></button></div>'),ba=n('<div class="row-desc-text"> </div>'),ga=n("<div> </div> <!>",1),ka=n('<div class="success"><!></div>'),xa=n('<div class="error"><!></div>'),ya=n('<div class="target"><a> </a> <span><!></span> <a> </a></div>'),wa=n('<!> <div class="target"><span>Default</span> <span><!></span> <a> </a></div>',1),Pa=n('<div class="k1 svelte-119hol3"><div class="process-bar svelte-119hol3"><div class="process-bar-in svelte-119hol3"></div></div> <div class="percent svelte-119hol3"> </div></div>'),Sa=n('<div class="k1 svelte-119hol3"><div class="process-bar svelte-119hol3"><div class="process-bar-in svelte-119hol3"></div></div> <div class="percent svelte-119hol3"> </div></div>'),Ta=n('<div class="k1 svelte-119hol3"><div class="process-bar svelte-119hol3"><div class="process-bar-in svelte-119hol3"></div></div> <div class="percent svelte-119hol3"> </div></div>'),La=n("<div><!></div>"),Ca=(D,l)=>e(l).action(),Ma=n('<div class="workload-header-right"><button class="btn"> </button></div>'),Ea=n('<div class="run svelte-119hol3"><span class="svelte-119hol3"> </span><span class="svelte-119hol3"> </span></div>'),Aa=n('<div class="states svelte-119hol3"></div>'),Da=(D,l)=>l(!1),Ia=(D,l)=>l(!0),Na=n('<div class="workload-content"><div class="workload-header"><div class="workload-header-title"> </div> <!></div> <div class="workload-tables"><!></div></div> <div></div> <div><!> <div class="tools svelte-119hol3"><div class="label">Ratio</div> <button class="sbtn dived svelte-119hol3">-</button> <div class="size svelte-119hol3"> </div> <button class="sbtn dived svelte-119hol3">+</button></div></div>',1);function Ha(D,l){qe(l,!0);const Q=(s,v=aa)=>{var f=de(),I=B(f);ie(I,17,()=>v().cells,oe,(U,r)=>{var P=La(),N=t(P);{var te=V=>{var _e=de(),we=B(_e);ie(we,17,()=>e(r).value,oe,(Pe,C)=>{var S=ua(),re=t(S);a(S),c(()=>u(re,`${e(C).port??""}/${e(C).protocol??""}`)),i(Pe,S)}),i(V,_e)},Ye=(V,_e)=>{{var we=C=>{var S=pa(),re=t(S,!0);a(S),c(()=>{he(S,"href",`/dashboard/${Le.path??""}/resource/${l.kind??""}/${e(r).value??""}`),u(re,e(r).value)}),i(C,S)},Pe=(C,S)=>{{var re=W=>{var j=ha();j.__click=[fa,Ue,v];var se=t(j);ie(se,21,()=>{var M;return(M=v().status)==null?void 0:M.podStatusList},oe,(M,E)=>{var F=ma();c(()=>{Y(F,1,Z(["bar-in",e(E).className]),"svelte-119hol3"),le(F,`width: ${e(E).ratio??""}%`)}),i(M,F)}),a(se);var ce=d(se,2),H=t(ce);ia(H),a(ce),a(j),c(()=>Y(j,1,Z(["scale scale-dropped event-hole",v().name===o.deploy&&"active"]))),i(W,j)},Ze=(W,j)=>{{var se=H=>{var M=ga(),E=B(M),F=t(E,!0);a(E);var K=d(E,2);{var X=G=>{var J=ba(),T=t(J,!0);a(J),c(()=>u(T,e(r).value.message)),i(G,J)};p(K,G=>{e(r).value.showDescription&&G(X)})}c(()=>{Y(E,1,Z(["status-text",e(r).value.className]),"svelte-119hol3"),u(F,e(r).value.status)}),i(H,M)},ce=(H,M)=>{{var E=K=>{var X=de(),G=B(X);{var J=k=>{var m=ka(),R=t(m);da(R),a(m),i(k,m)},T=k=>{var m=xa(),R=t(m);na(R),a(m),i(k,m)};p(G,k=>{e(r).value===!0?k(J):k(T,!1)})}i(K,X)},F=(K,X)=>{{var G=T=>{var k=wa(),m=B(k);ie(m,17,()=>e(r).value,oe,(x,h)=>{var b=ya(),y=t(b),w=t(y,!0);a(y);var g=d(y,2),z=t(g);ze(z),a(g);var q=d(g,2),ue=t(q,!0);a(q),a(b),c(()=>{he(y,"href",e(h).url),u(w,e(h).url),he(q,"href",`/dashboard/${Le.path??""}/resources/services/${e(h).service??""}`),u(ue,e(h).service)}),i(x,b)});var R=d(m,2),L=d(t(R),2),O=t(L);ze(O),a(L);var A=d(L,2),ve=t(A,!0);a(A),a(R),c(()=>{he(A,"href",`/dashboard/${Le.path??""}/resources/services/${v().defaultService??""}`),u(ve,v().defaultService)}),i(T,k)},J=(T,k)=>{{var m=L=>{var O=Pa(),A=t(O),ve=t(A);a(A);var x=d(A,2),h=t(x);a(x),a(O),c(()=>{var b,y;le(ve,`width: ${((b=e(r).value)==null?void 0:b.cpuPercent)??""}%`),u(h,`${((y=e(r).value)==null?void 0:y.cpuPercent)??""}%`)}),i(L,O)},R=(L,O)=>{{var A=x=>{var h=Sa(),b=t(h),y=t(b);a(b);var w=d(b,2),g=t(w);a(w),a(h),c(()=>{var z,q;le(y,`width: ${((z=e(r).value)==null?void 0:z.memoryPercent)??""}%`),u(g,`${((q=e(r).value)==null?void 0:q.memoryPercent)??""}%`)}),i(x,h)},ve=(x,h)=>{{var b=w=>{var g=Ta(),z=t(g),q=t(z);a(z);var ue=d(z,2),$e=t(ue);a(ue),a(g),c(()=>{var Ke,Re;le(q,`width: ${((Ke=e(r).value)==null?void 0:Ke.podPercent)??""}%`),u($e,`${((Re=e(r).value)==null?void 0:Re.podPercent)??""}%`)}),i(w,g)},y=w=>{var g=ta();c(()=>u(g,e(r).value)),i(w,g)};p(x,w=>{e(r).key==="pods"?w(b):w(y,!1)},h)}};p(L,x=>{e(r).key==="ram"?x(A):x(ve,!1)},O)}};p(T,L=>{e(r).key==="cpu"?L(m):L(R,!1)},k)}};p(K,T=>{e(r).key==="target"?T(G):T(J,!1)},X)}};p(H,K=>{e(r).key==="default"?K(E):K(F,!1)},M)}};p(W,H=>{e(r).key==="status"&&e(r).value?H(se):H(ce,!1)},j)}};p(C,W=>{e(r).key==="health"&&v().status&&v().status.podStatusList?W(re):W(Ze,!1)},S)}};p(V,C=>{e(r).key==="name"?C(we):C(Pe,!1)},_e)}};p(N,V=>{e(r).key==="publicEndpoints"?V(te):V(Ye,!1)})}a(P),c(()=>Y(P,1,Z(["table-cell",e(r).align,e(r).key]),"svelte-119hol3")),i(U,P)}),i(s,f)};let $=pe(Se([])),ne=pe(!1),ee=pe(Se([])),_=pe(null),o=Se({deploy:null,podList:[],visible:!1,position:{x:0,y:0},menuElement:null}),be=fe(()=>{var s;if(o.deploy){let v=e($).find(f=>f.name===o.deploy);return((s=v==null?void 0:v.status)==null?void 0:s.podStatusList)||[]}return[]});function Ue(s,v){o.deploy=v,o.visible=!0,o.position=la(s.target.closest(".scale-dropped"),o.menuElement)}async function Me(s){if(o.deploy){let{code:v,msg:f}=await e(_).scaling({name:o.deploy,namespace:_a.namespace,up:s});v!==0&&ca.error(f)}}let je=s=>{!s.target.closest(".scale-menu")&&!(s.target.closest(".scale-dropped")||s.target.classList.contains("scale-dropped"))&&(o.visible=!1,o.deploy=null)};Te(()=>{Ce.getKindHandler(l.kind).then(s=>me(_,s,!0))}),Te(()=>{Ce.wait(l.kind,(s,v)=>{me(ne,s,!0),s&&me($,v.getTableList(),!0)})}),Te(()=>{e(_)&&me(ee,e(_).getTableMenus(),!0)});var Ee=Na();sa("click",ea,je);var ge=B(Ee),ke=t(ge),xe=t(ke),Fe=t(xe,!0);a(xe);var Ge=d(xe,2);{var Je=s=>{var v=de();const f=fe(()=>e(_).getCreatable(l.kind));var I=B(v);{var U=r=>{var P=Ma(),N=t(P);N.__click=[Ca,f];var te=t(N,!0);a(N),a(P),c(()=>u(te,e(f).name)),i(r,P)};p(I,r=>{e(f)&&r(U)})}i(s,v)};p(Ge,s=>{e(_)&&s(Je)})}a(ke);var Ae=d(ke,2),Oe=t(Ae);{var Qe=s=>{const v=fe(()=>e(_).getTableHeader()),f=fe(()=>e(_).getTableButtons());oa(s,{get header(){return e(v)},get data(){return e($)},get buttons(){return e(f)},get menus(){return e(ee)},onShowMenu:I=>e(_).onShowTableMenu(e(ee),I),row:Q,get ready(){return e(ne)}})};p(Oe,s=>{e(_)&&s(Qe)})}a(Ae),a(ge);var De=d(ge,2),ae=d(De,2),Ie=t(ae);{var Ve=s=>{var v=Aa();ie(v,21,()=>e(be),oe,(f,I)=>{var U=Ea(),r=t(U),P=t(r,!0);a(r);var N=d(r),te=t(N,!0);a(N),a(U),c(()=>{u(P,e(I).status),u(te,e(I).size)}),i(f,U)}),a(v),i(s,v)};p(Ie,s=>{e(be).length>0&&s(Ve)})}var Ne=d(Ie,2),He=d(t(Ne),2);He.__click=[Da,Me];var ye=d(He,2),We=t(ye,!0);a(ye);var Xe=d(ye,2);Xe.__click=[Ia,Me],a(Ne),a(ae),va(ae,s=>o.menuElement=s,()=>o==null?void 0:o.menuElement),c(()=>{var s;u(Fe,l.kind),Y(De,1,Z(["mask",o.visible&&"open"]),"svelte-119hol3"),Y(ae,1,Z(["scale-menu",o.visible&&"open"]),"svelte-119hol3"),le(ae,`left:${o.position.left??""}px;top:${o.position.top??""}px`),u(We,((s=e(be)[0])==null?void 0:s.total)||0)}),i(D,Ee),Be()}ra(["click"]);var Ka=n('<div class="no-support svelte-1brukqf">Not support resource Kind</div>');function rt(D,l){qe(l,!0);var Q=de(),$=B(Q);{var ne=_=>{Ha(_,{get kind(){return l.data.kind},get kindName(){return l.data.kind}})},ee=_=>{var o=Ka();i(_,o)};p($,_=>{Ce.isSupport(l.data.kind)?_(ne):_(ee,!1)})}i(D,Q),Be()}export{rt as component};
