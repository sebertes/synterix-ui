import"../chunks/CWj6FrbW.js";import{p as S,s,u as Y,b as j,c as d,d as w,g as e,r as E,f as H,h as c}from"../chunks/QwNgEtIe.js";import{t as R,a as _,c as T}from"../chunks/DU17d604.js";import{i as x}from"../chunks/B8P2podd.js";import{Y as y}from"../chunks/DmUXbx2h.js";import{j as B}from"../chunks/mbYHt68G.js";import{R as N}from"../chunks/BGXyWBGH.js";var U=R('<div class="content svelte-1nud83o"><!></div>');function K(D,o){S(o,!0);let p=s(!1),u=s(null),f=s(""),t=s(null),g=s("");function v(){e(t).gotoList()}async function k(r){let{code:n,msg:i}=await e(t).create(r);if(n!==0){d(g,i,!0);return}e(t).gotoList()}Y(()=>{N.ready(o.data.kind,r=>{var i;let n=(i=r.getByName(o.data.name))==null?void 0:i.raw;if(!n){r.getHandler().gotoList();return}d(t,r.getHandler(),!0),d(f,B.dump(n),!0),d(u,n,!0),d(p,!0)})});var l=U(),h=w(l);{var F=r=>{var n=T(),i=H(n);{var M=a=>{const m=c(()=>e(t).getDefinitionType(e(u))),L=c(()=>e(t).getFormDefinition(e(t).getDefinitionType(e(u))));y(a,{get content(){return e(f)},get kind(){return o.data.kind},get type(){return e(m)},editable:!0,get kindDefinition(){return e(L)},get errorMsg(){return e(g)},onSave:k,scene:"edit",onExit:()=>v()})},b=a=>{const m=c(()=>e(t).getFormDefinition());y(a,{get content(){return e(f)},get kind(){return o.data.kind},get kindDefinition(){return e(m)},onExit:()=>v(),get errorMsg(){return e(g)},scene:"edit",onSave:k})};x(i,a=>{e(t).isMultiFormDefinition()?a(M):a(b,!1)})}_(r,n)};x(h,r=>{e(p)&&r(F)})}E(l),_(D,l),j()}export{K as component};
